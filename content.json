{"meta":{"title":"å¿ƒå°å¤©ä¸ªäººåšå®¢","subtitle":"ç”Ÿæ´»ä¸æ­¢coding,è¿˜æœ‰è¯—å’Œè¿œæ–¹ã€‚","description":"ç”Ÿæ´»ä¸æ­¢coding,è¿˜æœ‰è¯—å’Œè¿œæ–¹ã€‚","author":"å¿ƒå°å¤©","url":"http://puguojing.com"},"pages":[{"title":"about","date":"2018-11-05T08:08:55.000Z","updated":"2018-11-05T08:08:55.344Z","comments":true,"path":"about/index.html","permalink":"http://puguojing.com/about/index.html","excerpt":"","text":""},{"title":"categories","date":"2018-11-05T07:54:52.000Z","updated":"2018-11-05T07:55:16.783Z","comments":true,"path":"categories/index.html","permalink":"http://puguojing.com/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-11-05T07:48:59.000Z","updated":"2018-11-05T07:53:12.387Z","comments":true,"path":"tags/index.html","permalink":"http://puguojing.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"å®‰è£…é…ç½®TensorFlowçš„GPUç‰ˆæœ¬","slug":"å®‰è£…é…ç½®TensorFlowçš„GPUç‰ˆæœ¬","date":"2019-01-07T09:01:47.000Z","updated":"2019-01-10T11:50:01.845Z","comments":true,"path":"2019/01/07/å®‰è£…é…ç½®TensorFlowçš„GPUç‰ˆæœ¬/","link":"","permalink":"http://puguojing.com/2019/01/07/å®‰è£…é…ç½®TensorFlowçš„GPUç‰ˆæœ¬/","excerpt":"","text":"###win10ä¸‹tensorflowã€Keraçš„GPUç‰ˆæœ¬é…ç½® ä»‹ç»ä½ å‡†å¤‡é…ç½®TensorFlow GPUç‰ˆæœ¬çš„ä¹‹å‰ï¼Œä½ è‚¯å®šå·²ç»ååˆ†ç†Ÿæ‚‰äº†pythonçš„å¼€å‘ç¯å¢ƒçš„é…ç½®ã€‚ä¸€ä¸ªPythonçš„åˆå­¦è€…ï¼Œé€šå¸¸ä¸ä¼šä¸Šæ¥å°±åšé‚£ä¹ˆå¤æ‚çš„å·¥ä½œã€‚Pythonã€pipã€anacodaã€virtualenvã€virtualenvwrapperâ€¦åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯pythonè™šæ‹Ÿç¯å¢ƒã€ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿå¦‚ä½•åœ¨windows/linux/macä¸‹å®‰è£…é…ç½®pythonçš„å¼€å‘ç¯å¢ƒã€ä½ å¯ä»¥å‚è€ƒæˆ‘çš„ã€è¿™ç¯‡æ–‡ç« ã€‘æˆ–è€…è‡ªå·±æŸ¥é˜…èµ„æ–™ã€‚ ä½ å·²ç»å®‰è£…å¥½äº†Pythonçš„å¼€å‘ç¯å¢ƒï¼Œä¸ç®¡ä½ æ˜¯ä¸ä½¿ç”¨anacondaè¿˜æ˜¯pipï¼Œvirtuaenvï¼Œè¿™é‡Œæˆ‘ç”¨çš„æ˜¯â€œpython3+pip+virtualenvwrapperâ€çš„ç¯å¢ƒ,æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®‰è£…CUDAå’ŒcuDNNã€‚ ####1.è¯¥å¦‚ä½•é€‰æ‹©CUDAçš„ç‰ˆæœ¬ï¼Ÿè¿™é‡Œå»ºè®®é€‰æ‹©CUDA9.0çš„ç‰ˆæœ¬ï¼Œè‡³äºä¸ºä»€ä¹ˆé€‰æ‹©CUDA9.0è€Œä¸é€‰æ‹©æœ€æ–°çš„CUDA10.0è¿™é‡Œè®²ä¸€ä¸‹ã€‚ å› ä¸ºç°åœ¨tensorflow-gpuçš„ç‰ˆæœ¬æ›´æ–°åˆ°tensorflow-gpu==1.12ç‰ˆæœ¬ï¼Œå®ƒä¸æ”¯æŒCUDA10.0ç‰ˆæœ¬ï¼Œå³ä½¿ä½ æ­£ç¡®å®‰è£…äº†CUDA10.0ç‰ˆæœ¬å’Œå¯¹åº”çš„cuDNNç‰ˆæœ¬ï¼Œä½ åœ¨tensorflow``` æ—¶ï¼Œä¹Ÿä¼šé‡åˆ° â€œæ‰¾ä¸åˆ°å¯¹åº”çš„DLLæ¨¡å—çš„é”™è¯¯â€ã€‚1234å½“ç„¶å¦‚æœä½ éè¦å®‰è£…CUDA 10.0çš„ç‰ˆæœ¬ï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªè¢«ä¿®æ”¹è¿‡çš„tensorflow-gpuæœ¬åœ°å®‰è£…ç‰ˆæœ¬ï¼Œä»–å¯ä»¥åœ¨CUDA10.0çš„ç‰ˆæœ¬ä¸‹æ­£å¸¸è¿è¡Œã€‚è¿™é‡Œæ˜¯ä¸‹è½½é“¾æ¥ï¼š[xxxx.whl]()ä¸‹è½½å®Œæˆåé€šè¿‡ pip install xxxx.whl1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859å®‰è£…ï¼Œå½“ç„¶åœ¨å®‰è£…å‰,å¦‚æœä½ å·²ç»å®‰è£…è¿‡tensorflowåŒ…æˆ–è€…tensorflow-gpuåŒ…çš„è¯ï¼Œä½ éœ€è¦å…ˆå¸è½½ä»–ä»¬ã€‚è€Œè‡³äºæ›´è€çš„8.1çš„ç‰ˆæœ¬ï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºä»–çœ‹èµ·æ¥æœ‰ç‚¹è¿‡æ—¶äº†ï¼Œå¦ä¸€æ–¹é¢æ˜¯å› ä¸ºä»–åœ¨å®‰è£…å’Œä½¿ç”¨çš„æ—¶å€™ä¼šäº§ç”Ÿä¸€äº›ä¸å…¼å®¹é—®é¢˜ï¼Œæ‰€ä»¥ä¹Ÿä¸å»ºè®®ä½¿ç”¨ã€‚#### 2.å®‰è£…è¿™é‡Œçš„å‚è€ƒå®‰è£…ç‰ˆæœ¬ç»„åˆï¼špython3.6 + tensorflow 1.12 + keras 2.2.4 + CUDA 10.0 + cuDNN 7.4é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ä»–ä»¬å‡ ä¸ªä¹‹é—´çš„å…³ç³»![QQ20190104-165158@2x](http://puguojing-hexo.oss-cn-shanghai.aliyuncs.com/QQ20190104-165115%402x.png)åœ¨å®‰è£…ä¹‹å‰è¯·æŸ¥çœ‹ä¸€ä¸‹è‡ªå·±çš„æ˜¾å¡æ˜¯å¦æ”¯æŒCUDAã€‚GTX 1060 1070 1080/1080iéƒ½æ”¯æŒï¼Œå‰©ä¸‹çš„å¯ä»¥å‚è€ƒä¸‹é¢çš„ç½‘ç«™æŸ¥çœ‹ï¼š[CUDAæ˜¾å¡æŸ¥è¯¢]()##### 1.å®‰è£…CUDAè¿™é‡Œæ˜¯ä¸‹è½½è¿æ¥ï¼š[CUDA10.0ä¸‹è½½è¿æ¥](https://developer.nvidia.com/cuda-downloads?target_os=Windows&amp;target_arch=x86_64&amp;target_version=10&amp;target_type=exelocal) ![WX20190110-173234@2x](media/15465901117286/WX20190110-173234@2x.png)[CUDA9.0ä¸‹è½½é“¾æ¥](https://developer.nvidia.com/cuda-90-download-archive?target_os=Windows&amp;target_arch=x86_64&amp;target_version=10&amp;target_type=exelocal)![WX20190110-173122@2x](media/15465901117286/WX20190110-173122@2x.png)ä¸‹è½½å®Œæˆåå°½é‡ä»¥ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œå®‰è£…ã€‚ä»–ä¼šæç¤ºä½ é€‰å®‰è£…æ–¹å¼æ˜¯ç²¾ç®€è¿˜æ˜¯è‡ªå®šä¹‰ã€‚è¿™é‡Œä½ å¯ä»¥ç›´æ¥é€‰ç²¾ç®€ï¼Œå¦‚æœä½ é€‰æ‹©è‡ªå®šä¹‰ï¼Œå¯ä»¥å‹¾é€‰æ‰visualstudioç»„ä»¶çš„éƒ¨åˆ†ï¼Œå¦‚æœä½ æ²¡æœ‰ä½¿ç”¨visualstudioçš„IDEçš„è¯ã€‚å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥åœ¨[æ­¤ç”µè„‘]-&gt;[é¼ æ ‡å³é”®]-&gt;[å±æ€§]-&gt;[é«˜çº§]-&gt;[ç¯å¢ƒå˜é‡]-&gt;[ç³»ç»Ÿç¯å¢ƒå˜é‡]ä¸­çœ‹åˆ°2ä¸ªå…³äºCUDA_PATHçš„ç¯å¢ƒå˜é‡è®¾ç½®ï¼Œè¯´æ˜ä½ å®‰è£…æˆåŠŸã€‚##### 2.å®‰è£…cuDNNcuDNNçš„å®‰è£…éœ€è¦ä½ å…ˆæ³¨å†Œä¸€ä¸ªè´¦æˆ·ç™»å½•ï¼Œç„¶åæ‰è®©ä½ ä¸‹è½½ï¼Œå®‰è£…æ—¶æ³¨æ„ï¼Œè¯·å®‰è£…å¯¹åº”çš„CUDAç‰ˆæœ¬çš„cuDNNç‰ˆæœ¬ï¼Œ[cuDNN for CUDAä¸‹è½½é“¾æ¥](https://developer.nvidia.com/cudnn) æ³¨å†Œå®Œæˆä¸‹è½½æ—¶é‡Œé¢ä¼šæœ‰ï¼š![A985FE99-7CDB-4b53-88A0-B6DD8BD5A6A7](media/15465901117286/A985FE99-7CDB-4b53-88A0-B6DD8BD5A6A7.png)ä¸‹è½½å®Œæˆåä»–æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹å‡ºæ¥æ˜¯ä¸€ä¸ªcudaæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰binã€libã€includeç­‰æ–‡ä»¶å¤¹åŠä¸€äº›.DDLæ–‡ä»¶ï¼Œä½ å¯ä»¥æŠŠå®ƒæ”¾åˆ°ä»»æ„åœ°æ–¹ï¼ˆç”šè‡³å’ŒCUDAçš„å®‰è£…è·¯å¾„æ”¾åœ¨ä¸€èµ·ï¼‰ï¼Œåªè¦ä½ é…ç½®çš„ç¯å¢ƒå˜é‡èƒ½å¼•ç”¨åˆ°ä»–ã€‚è¿™é‡Œæˆ‘ä»¬å‚è€ƒå»ºè®®åšæ³•ï¼ŒæŠŠå®ƒæ”¾åˆ°C:\\Program Filesç›˜é‡Œé¢,è·¯å¾„ä¸ºï¼šC:\\Program Files\\cuda ä¸‹é¢æˆ‘ä»¬æ¥é…ç½®cuDNNçš„ç¯å¢ƒå˜é‡ã€‚![](http://puguojing-hexo.oss-cn-shanghai.aliyuncs.com/NZMTTP%259%7B%244ZV%29%40I86AXVHV.png)æœ€ä¸»è¦çš„æ˜¯è¦æŠŠcuDNNä¸­çš„binä¸­çš„ XXXX.DLLæ–‡ä»¶èƒ½å¤Ÿé€šè¿‡ç³»ç»Ÿç¯å¢ƒå˜é‡Pathä¸­æ‰¾åˆ°ä¸‹é¢æ˜¯ç¯å¢ƒå˜é‡çš„å†…å®¹åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡çš„Pathä¸­æ·»åŠ ï¼šç½‘ä¸Šæœ‰ä¸€äº›å¤æ‚çš„å¤šä¸ªç¯å¢ƒå˜é‡é…ç½®ï¼Œä½ ä¸éœ€è¦å‚è€ƒä»–ä»¬ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šä»–ä»¬ä¸ºä»€ä¹ˆä¼šæŠŠç¯å¢ƒå˜é‡é…ç½®çš„é‚£ä¹ˆå¤æ‚ï¼Œä½ å¯çœ‹çœ‹tensorflowå®˜ç½‘çš„ä»‹ç»ï¼šhttps://tensorflow.google.cn/install/gpu###### 3.å®‰è£…tensorflow-gpuç›´æ¥é€šè¿‡pipå®‰è£…ï¼š pip install tensorflow-gpu123å¦‚æœæ˜¯10.0çš„è¯è®°å¾—ä½¿ç”¨ä¸Šé¢æˆ‘æä¾›çš„whlå®‰è£…åŒ…å®‰è£…ã€‚###### 4.å®‰è£…keras pip install keras` å®‰è£…å¥½ä¹‹åKerasä¼šè‡ªåŠ¨ä½¿ç”¨tensorflowçš„GPUç‰ˆæœ¬ï¼Œä¸éœ€è¦å…¶ä»–é…ç½®ã€‚ é‡æ–°è¿è¡Œä½ çš„ç¨‹åºä½ ä¼šå‘ç°ï¼Œå·²ç»ä½¿ç”¨äº†GPUçš„ç‰ˆæœ¬å¹¶ä¸”ä¼šæ˜¾ç¤ºä½ çš„æ˜¾å¡å‹å·ã€å¤§å°ç­‰ä¿¡æ¯ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ·±åº¦å­¦ä¹ ","slug":"æŠ€æœ¯/æ·±åº¦å­¦ä¹ ","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ·±åº¦å­¦ä¹ /"}],"tags":[{"name":"TensorFlow","slug":"TensorFlow","permalink":"http://puguojing.com/tags/TensorFlow/"},{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"http://puguojing.com/tags/æœºå™¨å­¦ä¹ /"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ·±åº¦å­¦ä¹ ","slug":"æŠ€æœ¯/æ·±åº¦å­¦ä¹ ","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ·±åº¦å­¦ä¹ /"}]},{"title":"Pythonè¯»å–å¤§æ–‡ä»¶çš„æ³¨æ„äº‹é¡¹","slug":"Pythonè¯»å–å¤§æ–‡ä»¶çš„æ³¨æ„äº‹é¡¹","date":"2018-12-12T03:20:31.000Z","updated":"2018-12-13T03:28:40.020Z","comments":true,"path":"2018/12/12/Pythonè¯»å–å¤§æ–‡ä»¶çš„æ³¨æ„äº‹é¡¹/","link":"","permalink":"http://puguojing.com/2018/12/12/Pythonè¯»å–å¤§æ–‡ä»¶çš„æ³¨æ„äº‹é¡¹/","excerpt":"","text":"pythonè¯»å†™æ–‡ä»¶çš„éƒ½å¾ˆç®€å•ï¼Œç›´æ¥ä¸€ä¸ªwith openå°±è§£å†³äº†ï¼Œä½†æ˜¯è¿™ä¹Ÿåªæ˜¯åœ¨å­¦ä¹ åŸºç¡€çŸ¥è¯†æ—¶å€™çš„å°æ¡ˆä¾‹ï¼Œä¸èƒ½è½»æ˜“æ”¾å…¥é¡¹ç›®ä¸­ã€‚ 1.read()ä¸readlines()123456with open(file_path, &apos;rb&apos;) as f: sha1Obj.update(f.read())orwith open(file_path, &apos;rb&apos;) as f: for line in f.readlines(): print(line) è¿™å¯¹æ–¹æ³•åœ¨è¯»å–å°æ–‡ä»¶æ—¶ç¡®å®ä¸ä¼šäº§ç”Ÿä»€ä¹ˆå¼‚å¸¸ï¼Œä½†æ˜¯ä¸€æ—¦è¯»å–å¤§æ–‡ä»¶ï¼Œå¾ˆå®¹æ˜“ä¼šäº§ç”ŸMemoryErrorï¼Œä¹Ÿå°±æ˜¯å†…å­˜æº¢å‡ºçš„é—®é¢˜ã€‚ ####Why Memory Errorï¼Ÿ æˆ‘ä»¬é¦–å…ˆæ¥çœ‹çœ‹è¿™å‡ ä¸ªæ–¹æ³•ï¼š readæ–¹æ³•read([size])æ–¹æ³•ä»æ–‡ä»¶å½“å‰ä½ç½®èµ·è¯»å–sizeä¸ªå­—èŠ‚ï¼Œè‹¥æ— å‚æ•°sizeï¼ˆsize=-1ï¼‰ï¼Œåˆ™è¡¨ç¤ºè¯»å–è‡³æ–‡ä»¶ç»“æŸEOFä¸ºæ­¢ï¼Œå½“æ–‡ä»¶å¤§å°å¤§äºå¯ç”¨å†…å­˜æ—¶ï¼Œè‡ªç„¶ä¼šå‘ç”Ÿå†…å­˜æº¢å‡ºçš„é”™è¯¯ã€‚ readlineæ–¹æ³•è¯¥æ–¹æ³•æ¯æ¬¡è¯»å‡ºä¸€è¡Œå†…å®¹ï¼Œæ‰€ä»¥ï¼Œè¯»å–æ—¶å ç”¨å†…å­˜å°ï¼Œæ¯”è¾ƒé€‚åˆå¤§æ–‡ä»¶ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ã€‚ å¯é€‰å‚æ•° size çš„å«ä¹‰åŒä¸Šã€‚å®ƒæ˜¯ä»¥è¡Œä¸ºå•ä½è¿”å›å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡è¯»ä¸€è¡Œï¼Œä¾æ¬¡å¾ªç¯ï¼Œå¦‚æœä¸é™å®š sizeï¼Œç›´åˆ°æœ€åä¸€ä¸ªè¿”å›çš„æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œæ„å‘³ç€åˆ°æ–‡ä»¶æœ«å°¾äº†(EOF). readlinesæ–¹æ³•sizeå‚æ•° åŒä¸Šã€‚å®ƒè¿”å›çš„æ˜¯ä»¥è¡Œä¸ºå•ä½çš„åˆ—è¡¨ï¼Œå³ç›¸å½“äºå…ˆæ‰§è¡Œ readline() ï¼Œå¾—åˆ°æ¯ä¸€è¡Œï¼Œç„¶åæŠŠè¿™ä¸€è¡Œçš„å­—ç¬¦ä¸²ä½œä¸ºåˆ—è¡¨ä¸­çš„å…ƒç´ å¡åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œæœ€åå°†æ­¤åˆ—è¡¨è¿”å›ã€‚readlinesæ„é€ çš„æ˜¯list|è€Œä¸æ˜¯iterï¼Œæ‰€ä»¥æ‰€æœ‰çš„å†…å®¹éƒ½ä¼šä¿å­˜åœ¨å†…å­˜ä¹‹ä¸Šï¼Œæ–‡ä»¶å†…å®¹è¿‡å¤§åŒæ ·ä¹Ÿä¼šå‘ç”Ÿå†…å­˜æº¢å‡ºçš„é”™è¯¯ã€‚ 2.æ­£ç¡®çš„ç”¨æ³•åœ¨å®é™…è¿è¡Œçš„ç³»ç»Ÿä¹‹ä¸­å¦‚æœå†™å‡ºä¸Šè¿°ä»£ç æ˜¯ååˆ†å±é™©çš„ï¼Œã€‚æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹æ­£ç¡®ç”¨æ³•ã€‚ å¦‚æœæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶æ¨èç”¨å¦‚ä¸‹è¿™ç§å†™æ³•ï¼Œå¯ä»¥è‡ªå·±æŒ‡å®šç¼“å†²åŒºæœ‰å¤šå°‘byteã€‚æ˜¾ç„¶ç¼“å†²åŒºè¶Šå¤§ï¼Œè¯»å–é€Ÿåº¦è¶Šå¿«ã€‚ 12345678with open(file_path, &apos;rb&apos;) as f: while True: buf = f.read(1024) if buf: Obj.update(buf) else: break è€Œå¦‚æœæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œåˆ™å¯ä»¥ç”¨readlineæ–¹æ³•æˆ–ç›´æ¥è¿­ä»£æ–‡ä»¶ï¼ˆpythonè¿™é‡Œå°è£…äº†ä¸€ä¸ªè¯­æ³•ç³–ï¼ŒäºŒè€…çš„å†…ç”Ÿé€»è¾‘ä¸€è‡´ï¼Œä¸è¿‡æ˜¾ç„¶è¿­ä»£æ–‡ä»¶çš„å†™æ³•æ›´pythonic ï¼‰æ¯æ¬¡è¯»å–ä¸€è¡Œï¼Œæ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ã€‚ç¬”è€…ç®€å•æµ‹è¯•äº†ä¸€ä¸‹ï¼Œåœ¨3Gæ–‡ä»¶ä¹‹ä¸‹ï¼Œå¤§æ¦‚æ€§èƒ½å’Œå‰è€…å·®äº†20%. 1234567891011with open(file_path, &apos;rb&apos;) as f: while True: line = f.readline() if buf: print(line) else: break with open(file_path, &apos;rb&apos;) as f: for line in f: print(line) æ‰€ä»¥åœ¨ä½¿ç”¨pythonè¯»å–æ–‡ä»¶çš„æ—¶å€™å¦‚æœæ˜¯å¤§æ–‡ä»¶ï¼ˆæ¥è¿‘å†…å­˜æˆ–å¤§äº1Gï¼‰å»ºè®®ä½¿ç”¨read(size=1024)ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰æˆ–è€…readline()ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰ã€‚å¦‚æœæ–‡ä»¶ä¸å¤§ï¼Œè€Œä¸”éœ€è¦ç»å¸¸ä½¿ç”¨æ–‡ä»¶æ•°æ®ï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨read()å’Œreadlines()æŠŠæ•°æ®å…¨åŠ è½½åˆ°å†…å­˜é‡Œã€‚ 3.å†…å­˜æ£€æµ‹å·¥å…·çš„ä»‹ç»å¯¹äºpythonä»£ç çš„å†…å­˜å ç”¨é—®é¢˜ï¼Œå¯¹äºä»£ç è¿›è¡Œå†…å­˜ç›‘æ§ååˆ†å¿…è¦ã€‚è¿™é‡Œæ¨èä¸¤ä¸ªå°å·¥å…·æ¥æ£€æµ‹pythonä»£ç çš„å†…å­˜å ç”¨ã€‚ ####memory_profiler é¦–å…ˆå…ˆç”¨pipå®‰è£…memory_profiler 1pip install memory_profiler memory_profileræ˜¯åˆ©ç”¨pythonçš„è£…é¥°å™¨å·¥ä½œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¿›è¡Œæµ‹è¯•çš„å‡½æ•°ä¸Šæ·»åŠ è£…é¥°å™¨ã€‚ 123456789101112131415from hashlib import sha1import sys@profiledef my_func(): sha1Obj = sha1() with open(sys.argv[1], &apos;rb&apos;) as f: while True: buf = f.read(10 * 1024 * 1024) if buf: sha1Obj.update(buf) else: break print(sha1Obj.hexdigest())if __name__ == &apos;__main__&apos;: my_func() ä¹‹ååœ¨è¿è¡Œä»£ç æ—¶åŠ ä¸Šâ€-m memory_profilerâ€œ å°±å¯ä»¥äº†è§£å‡½æ•°æ¯ä¸€æ­¥ä»£ç çš„å†…å­˜å ç”¨äº† 1pyhton -m memory_profiler test.py guppyä¾ä»ç„¶æ˜¯é€šè¿‡pipå…ˆå®‰è£…guppy 1pip install guppy ä¹‹åå¯ä»¥åœ¨ä»£ç ä¹‹ä¸­åˆ©ç”¨guppyç›´æ¥æ‰“å°å‡ºå¯¹åº”å„ç§pythonç±»å‹ï¼ˆlistã€tupleã€dictç­‰ï¼‰åˆ†åˆ«åˆ›å»ºäº†å¤šå°‘å¯¹è±¡ï¼Œå ç”¨äº†å¤šå°‘å†…å­˜ã€‚ 1234567891011from guppy import hpyimport sysdef my_func(): mem = hpy() with open(sys.argv[1], &apos;rb&apos;) as f: while True: buf = f.read(10 * 1024 * 1024) if buf: print(mem.heap()) else: break è¿è¡Œåï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°å‡ºå¯¹åº”çš„å†…å­˜å ç”¨æ•°æ®ã€‚ é€šè¿‡ä¸Šè¿°ä¸¤ç§å·¥å…·guppyä¸memory_profilerå¯ä»¥å¾ˆå¥½åœ°æ¥ç›‘æ§pythonä»£ç è¿è¡Œæ—¶çš„å†…å­˜å ç”¨é—®é¢˜ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"python","slug":"python","permalink":"http://puguojing.com/tags/python/"},{"name":"å†…å­˜æº¢å‡º","slug":"å†…å­˜æº¢å‡º","permalink":"http://puguojing.com/tags/å†…å­˜æº¢å‡º/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"é›†ç¾¤ä»‹ç»åŠé…ç½®","slug":"é›†ç¾¤ä»‹ç»åŠé…ç½®","date":"2018-11-09T15:13:23.000Z","updated":"2018-11-09T15:13:23.651Z","comments":true,"path":"2018/11/09/é›†ç¾¤ä»‹ç»åŠé…ç½®/","link":"","permalink":"http://puguojing.com/2018/11/09/é›†ç¾¤ä»‹ç»åŠé…ç½®/","excerpt":"","text":"","categories":[],"tags":[],"keywords":[]},{"title":"é¡¹ç›®éƒ¨ç½²ä¹‹é˜¿é‡Œäº‘æœåŠ¡å™¨ç¯å¢ƒé…ç½®ã€æ•°æ®åº“å®‰è£…","slug":"é¡¹ç›®éƒ¨ç½²ä¹‹é˜¿é‡Œäº‘æœåŠ¡å™¨ç¯å¢ƒé…ç½®ã€æ•°æ®åº“å®‰è£…","date":"2018-11-06T13:33:50.000Z","updated":"2018-11-18T16:12:49.090Z","comments":true,"path":"2018/11/06/é¡¹ç›®éƒ¨ç½²ä¹‹é˜¿é‡Œäº‘æœåŠ¡å™¨ç¯å¢ƒé…ç½®ã€æ•°æ®åº“å®‰è£…/","link":"","permalink":"http://puguojing.com/2018/11/06/é¡¹ç›®éƒ¨ç½²ä¹‹é˜¿é‡Œäº‘æœåŠ¡å™¨ç¯å¢ƒé…ç½®ã€æ•°æ®åº“å®‰è£…/","excerpt":"","text":"ä»Šå¤©ä¸»è¦è®²ä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²é¡¹ç›®ï¼Œé¦–å…ˆä»‹ç»ä¸€ä¸‹æˆ‘çš„é˜¿é‡Œäº‘ç³»ç»Ÿæ˜¯Ubuntu 16.04 64ä½çš„ç‰ˆæœ¬ã€‚ ç™»å½•é˜¿é‡Œäº‘æœåŠ¡å™¨é¦–å…ˆä½¿ç”¨sshç™»é™†é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼š é˜¿é‡Œäº‘æœåŠ¡é»˜è®¤æ˜¯ä½¿ç”¨çš„rootç”¨æˆ·ï¼Œæ‰€ä»¥ä¸éœ€è¦æˆ‘ä»¬å†å¼€å¯rootç”¨æˆ·äº†ï¼Œå¦‚æœä½ æ²¡æœ‰å¼€å¯rootç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨sudo passwd rootå‘½ä»¤ï¼Œç„¶åè¾“å…¥2érootå¯†ç å¼€å¯rootã€‚ ##ä¿®æ”¹aptçš„å®‰è£…æº å¯¹äºåŸç‰ˆçš„ubuntuç³»ç»Ÿaptçš„å®‰è£…åŒ…çš„æºæ˜¯å›½å¤–çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ 1/etc/apt/source.list æ–‡ä»¶ä¸­æŸ¥çœ‹aptæº,ä½†æ˜¯æ›´å¥½çš„æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠaptæºæ›¿æ¢æˆå›½å†…çš„æºã€‚ ä¸ºäº†é¿å…å‡ºé”™ä½ å¯ä»¥é¦–å…ˆå¤‡ä»½ä¸€ä¸‹source.list cd åˆ°/etc/apt/ç›®å½•ä¸‹æ‰§è¡Œï¼š 1cp source.list source.list.bak ä¼šæŠŠsource.listæ‹·è´ä¸€ä»½å¹¶å‘½ä»¤ä¸ºsource.list.bakã€‚ ç„¶åæˆ‘ä»¬å¯ä»¥åˆ é™¤source.listå†…å®¹ï¼ŒæŠŠå†…å®¹æ›¿æ¢æˆä¸‹é¢çš„æºï¼š 1234567891011121314151617deb-src http://archive.ubuntu.com/ubuntu xenial main restricteddeb http://mirrors.aliyun.com/ubuntu/ xenial main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universedeb http://mirrors.aliyun.com/ubuntu/ xenial universedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates universedeb http://mirrors.aliyun.com/ubuntu/ xenial multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiversedeb http://archive.canonical.com/ubuntu xenial partnerdeb-src http://archive.canonical.com/ubuntu xenial partnerdeb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universedeb http://mirrors.aliyun.com/ubuntu/ xenial-security universedeb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse ç„¶åæ‰§è¡Œï¼š 1sudo apt update æ›´æ–°æºã€‚ ä½†å…¶å®é˜¿é‡Œäº‘æœåŠ¡å™¨çš„Ubuntuç³»ç»Ÿæœ¬èº«å·²ç»å¸®ä½ ä¿®æ”¹å¥½äº†aptçš„æºï¼Œæ‰€ä»¥ä½ åœ¨ä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨çš„Ubuntuç³»ç»Ÿæ—¶å¹¶ä¸éœ€è¦æ‰§è¡Œä¸Šé¢çš„æ“ä½œï¼Œä½ åªéœ€è¦åœ¨ä½¿ç”¨apt å®‰è£…ä¸€äº›è½¯ä»¶ä¹‹å‰æ‰§è¡Œï¼šsudo apt updateå°±å¥½äº†ã€‚ å®‰è£…Vimä½ å¯ä»¥ä½¿ç”¨ï¼š 1sudo apt install vim å®‰è£…vim ï¼Œå½“ç„¶ç”±äºä½ ç°åœ¨å¯èƒ½æ˜¯rootç”¨æˆ·ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦åŠ sudo ç›´æ¥è¾“å…¥ï¼š 1apt install vim å°±å¯ä»¥å®‰è£…ã€‚ä½†æ˜¯æ›´å¥½çš„æ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨å…¶å®å·²ç»å¸®ä½ å®‰è£…äº†vimï¼Œæ‰€ä»¥ä½ æ ¹æœ¬ä¸éœ€è¦åœ¨å®‰è£…ã€‚ä½ å¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥ï¼š 1vim ä»–ä¼šæ˜¾ç¤ºå¦‚ä¸‹çš„ä¿¡æ¯ç»™ä½ ï¼Œè¯´æ˜ä½ å·²ç»å®‰è£…äº†vim å®‰è£…mysql æ•°æ®åº“ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…mysqlæ•°æ®åº“ï¼š 1sudo apt install mysql-server mysql-client åœ¨å®‰è£…çš„æ—¶å€™ä¼šè®©ä½ è®¾å®šæ•°æ®åº“çš„å¯†ç ï¼Œè¾“å…¥è‡ªå·±æƒ³è®¾å®šçš„æ•°æ®åº“å¯†ç å³å¯ã€‚ å®‰è£…å®Œæˆåå¯ä»¥ä½¿ç”¨ï¼š 1mysql --help æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ›´ç¡®å®šçš„æ˜¯æˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨ä¸€ä¸‹mysql,è¾“å…¥ï¼š 1mysql -uroot -p ä¼šæç¤ºä½ è¾“å…¥æ•°æ®åº“çš„å¯†ç ï¼ˆå°±æ˜¯ä½ åœ¨å®‰è£…æ•°æ®çš„æ—¶å€™è®¾å®šçš„ï¼‰ä½ ä¹Ÿå¯ä»¥å°è¯•æŸ¥çœ‹ä¸€äº›æ•°æ®åº“ï¼š 1mysql&gt; show database; æ³¨æ„åˆ«å¿˜äº†æœ€åçš„åˆ†å·ã€‚æœ€åè¾“å…¥quit;é€€å‡ºmysqlã€‚ å®‰è£…memcachedï¼šé€šè¿‡å‘½ä»¤ï¼š 1apt install memcached å³å¯å®‰è£…ã€‚ç„¶åæµ‹è¯•ä¸€ä¸‹: 1telnet 127.0.0.1 11211 å†å°è¯•å­˜å‚¨ä¸€ä¸‹æ•°æ®ï¼š 12set username 0 60 5hello ç„¶ååœ¨è·å–ä¸€ä¸‹æ•°æ®ï¼š 1get username å‘ç°å¯ä»¥æ“ä½œæ—¶è¯´æ˜æ²¡é—®é¢˜ã€‚(è¾“å…¥quité€€å‡ºmemcached) å®‰è£…python3Ubuntuç³»ç»Ÿä¼šè‡ªå·±é»˜è®¤ç»™æˆ‘ä»¬å®‰è£…python2.7ï¼Œä½ å¯ä»¥ä½¿ç”¨python -VæŸ¥çœ‹å½“å‰çš„python ç‰ˆæœ¬ã€‚ä½†æ˜¯ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯python3æ‰€ä»¥è¿˜éœ€è¦å®‰è£…python3: 1sudo apt install python3 å®‰è£…å®Œæˆåå¯ä»¥ä½¿ç”¨ï¼š 1python3 -V æŸ¥çœ‹ä¸€ä¸‹ å®‰è£…å®Œpython3ä¹‹åè¿˜éœ€è¦å®‰è£…python3å¯¹åº”çš„pip(pipä¸æ‡‚çš„è¯è¯·è¯·è‡ªè¡Œè°·æ­Œ) 1sudo apt install python3-pip è¿™é‡Œä¼šå®‰è£…python3å¯¹åº”ä½¿ç”¨çš„pip3 pip æ˜¯ç”¨æ¥ç®¡ç†pythonçš„åŒ…çš„å·¥å…·ï¼Œç›´æ¥è¾“å…¥pythoné»˜è®¤ä»£è¡¨çš„python2ï¼Œå¯¹åº”çš„pipæ˜¯pip2ï¼Œæ‰€ä»¥è¾“å…¥æ—¶pythonã€pipä»£è¡¨çš„åˆ†åˆ«æ˜¯python2å’Œpip2ã€‚è€Œå¦‚æœæƒ³ä½¿ç”¨python3ç‰ˆæœ¬å°±éœ€è¦è¾“å…¥ï¼špython3å’Œpip3ã€‚è¿™é‡Œçš„ç³»ç»Ÿé»˜è®¤å®‰è£…çš„æ˜¯python2 å’Œpip2ä½†æ˜¯æˆ‘ä»¬éœ€è¦python3å’Œpip3,æ‰€ä»¥éœ€è¦é‡æ–°å®‰è£…ã€‚ å®‰è£…å®Œpip3ä¹‹åå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹pipçš„ç‰ˆæœ¬ï¼š å¯ä»¥çœ‹åˆ°pipå’Œpip3çš„ç‰ˆæœ¬éƒ½æ˜¯8.1,ä½†æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨æœ€æ–°çš„pip3çš„åŒ…ï¼Œæ‰€ä»¥éœ€è¦æ›´æ–°pip3ï¼ˆç”±äºpip2æˆ‘ä»¬ä¸ä½¿ç”¨æ‰€ä»¥å°±ä¸æ›´æ–°äº†ï¼‰ 1pip3 install --upgrade pip ä½†æ˜¯ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š è¿™ä¸»è¦æ˜¯å› ä¸ºpip3æ–°æ—§ç‰ˆæœ¬çš„é—®é¢˜ã€‚ æˆ‘ä»¬å°è¯•ä¿®æ”¹ä¸€ä¸‹/usr/bin/pip3ä¸­çš„å†…å®¹å°±ã€‚æ‰“å¼€/usr/bin/pip3 1vim /usr/bin/pip3 å†…å®¹å¦‚ä¸‹: 12345678910111213#!/usr/bin/python3# GENERATED BY DEBIANimport sys# Run the main entry point, similarly to how setuptools does it, but because# we didn&apos;t install the actual entry point from setup.py, don&apos;t use the# pkg_resources API.from pip import mainif __name__ == &apos;__main__&apos;: sys.exit(main())~~ ä¿®æ”¹ä¸ºï¼š 123from pip import __main__ if __name__ == &apos;__main__&apos;: sys.exit(__main__._main()) å¦‚æœè¿˜æŠ¥é”™ï¼Œç›´æ¥é‡æ–°å¼ºåˆ¶å‡çº§å®‰è£…ï¼š 1sudo python3 -m pip install --upgrade --force-reinstall pip é‡æ–°æŸ¥çœ‹ä¸€ä¸‹ï¼š 1pip3 --version æ›´æ–°åˆ°äº†18.1 å®‰è£…virtualenvwrapperï¼Œ1pip3 install virtualenvwrapper å®‰è£…å®Œæˆä¹‹åæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›é…ç½®ï¼š1.åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼ˆcd ~/ï¼‰æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹â€œ.vitualenvsâ€ç”¨æ¥å­˜æ”¾æˆ‘ä»¬çš„è™šæ‹Ÿç¯å¢ƒ 12cd ~/mkdir .virtualenvs ç„¶åæ‰§è¡Œls -alçœ‹ä¸€ä¸‹ï¼š å‘ç° .virtualenvs æ–‡ä»¶å¤¹ 2.é…ç½®ç¯å¢ƒå˜é‡æˆ‘ä»¬å®‰è£…å®Œæˆä¹‹åè¿˜æ— æ³•ä½¿ç”¨virtualenvwrapperå‘½ä»¤ï¼Œè¿˜éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ã€‚å…ˆæ‰§è¡Œï¼š 1which virtualenvwrapper.sh çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„virtualenvwrapperè·¯å¾„ åœ¨ï¼š 1/usr/local/bin/virtualenvwrapper.sh è·¯å¾„ä¸‹ã€‚ ç„¶å æ‰“å¼€ç”¨æˆ·ç›®å½•ä¸‹çš„ .bashrcæ–‡ä»¶åœ¨æœ€åæ·»åŠ ä¸‹é¢ä»£ç : 12export WORKON_HOME=$HOME/.virtualenvs source /usr/local/bin/virtualenvwrapper.sh ç„¶åé€€å‡º.bashrcæ–‡ä»¶ï¼Œè¾“å…¥å‘½ä»¤source ~/.bashrcä½¿.bashrcç”Ÿæ•ˆã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å‘½ä»¤æ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå˜é‡äº†ï¼šï¼ˆç”±äºæˆ‘ä»¬çš„virtualenvwrapperå®‰è£…åœ¨äº†pyton3ç¯å¢ƒä¸­æ‰€ä»¥å¯ä»¥ç›´æ¥åˆ›å»ºï¼‰ 1mkvirtualenv xfz-env æ³¨æ„ï¼šå¦‚æœä½ æŠŠvirtualenvwrapperå®‰è£…åœ¨äº†python2çš„ç¯å¢ƒä¸­ï¼Œåœ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„æ—¶å€™éœ€è¦ä½¿ç”¨â€“pythonå‚æ•°æŒ‡å®šä½¿ç”¨å“ªä¸ªPythonæ–‡ä»¶ï¼Œå®‰è£…python3çš„è·¯å¾„æ˜¯åœ¨/usr/bin/python3ã€‚é‚£ä¹ˆç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1mkvirtualenv --python=/usr/bin/python3 xfz-env åˆ›å»ºå®Œæˆå¯ä»¥åœ¨â€œã€‚virtualenvsâ€ç›®å½•ä¸‹æŸ¥çœ‹envç¯å¢ƒï¼š ä½ å¯ä»¥ä½¿ç”¨ï¼š 1workon xfz-env è¿›å…¥åˆ°æŒ‡å®šçš„è™šæ‹Ÿç¯å¢ƒ æ³¨æ„åœ¨source .bashrcå¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯: 1234567No module named virtualenvwrappervirtualenvwrapper.sh: There was a problem running the initialization hooks.If Python could not import the module virtualenvwrapper.hook_loader,check that virtualenvwrapper has been installed forVIRTUALENVWRAPPER_PYTHON=/usr/bin/python and that PATH isset properly. é‚£ä¹ˆåœ¨ .bashrc åŠ å…¥: 1export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3 ä»è¿œç¨‹ä»“åº“ä¸‹è½½ä»£ç æˆ‘ä»¬åº”è¯¥åº”è¯¥å§å®Œæ•´çš„ä»£ç ä¸Šä¼ åˆ°äº†è‡ªå·±çš„GitHubæˆ–è€…ç äº‘ä¸­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä»è¿œç¨‹ä»“åº“æŠŠä»£ç pullåˆ°æœåŠ¡å™¨ï¼š 1.é¦–å…ˆè¿›å…¥åˆ° â€œ/srcâ€ï¼Œcd /src2.åœ¨/srcä¸‹æ–°å»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ 1mkdir xiaofaozhuo 3.ç„¶åè¿›å…¥xiaofaozhuoæ–‡ä»¶å¤¹æ‰§è¡Œï¼š 123git initgit remote add origin https://gitee.com/PuGuoJing/xiaofanzhuogit pull origin master å¦‚æœæ²¡æœ‰å®‰è£…git æ‰§è¡Œï¼š 1apt install git å®‰è£…gitã€‚ è¿™æ ·ä½ å°±å¯ä»¥æŠŠæ‰€æœ‰çš„è¿œç¨‹ä»£ç ä¸‹è½½åˆ°æœåŠ¡å™¨äº†ã€‚ å®‰è£…require.txtä¾èµ–åŒ…è¿›å…¥è‡ªå·±çš„è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œç„¶åè¿›å…¥åˆ°é¡¹ç›®æ‰€åœ¨çš„ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š 1pip3 install -r requirements.txt å®‰è£…é¡¹ç›®ä¾èµ–çš„åŒ…ã€‚å¦‚æœæç¤ºOSError: mysql_config not foundï¼Œé‚£ä¹ˆå†å®‰è£…: 1sudo apt install libmysqld-dev å³å¯ã€‚ æ³¨æ„çŸ­ä¿¡éªŒè¯ç çš„åŒ…éœ€è¦å•ç‹¬å®‰è£…ã€‚æŠŠdysms_pythonæ–‡ä»¶å¤¹ä¸Šä¼ åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åè¿›å…¥åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚æ‰§è¡Œå‘½ä»¤ï¼špython setup.py installã€‚ å¯¹äºä¸€äº›ç¬¬ä¸‰æ–¹çš„æ— æ³•é€šè¿‡pipå®‰è£…çš„åŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œæ¯”å¦‚è¿™é‡Œçš„é˜¿é‡Œäº‘çŸ­ä¿¡éªŒè¯ç æœåŠ¡å°±éœ€è¦é€šè¿‡setup.pyæ‰‹åŠ¨å®‰è£…ã€‚ åˆ›å»ºæ•°æ®åº“åœ¨å®‰è£…å¥½æ‰€æœ‰çš„ç¯å¢ƒä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºæˆ‘ä»¬é¡¹ç›®ä½¿ç”¨çš„æ•°æ®åº“ã€‚ é¦–å…ˆè¿›å…¥æˆ‘ä»¬çš„æ•°æ®ï¼š1mysql -uroot -p ç„¶åæ‰§è¡Œï¼š 1create database xfz; åˆ›å»ºæˆ‘ä»¬æ‰€ä½¿ç”¨çš„æ•°æ®xfzã€‚åˆ›å»ºå®Œæˆåæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š 1show databases; æŸ¥çœ‹æ•°æ®åº“ã€‚ä¹‹åæˆ‘ä»¬è¿›å…¥åˆ°é¡¹ç›®æ ¹è·¯å¾„æ‰§è¡Œ: 12python3 manage.py makemigrationspython3 manage.py migrate å°†æ¨¡å‹æ˜ å°„åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬çš„æ•°æ®åº“åˆ›å»ºæˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨äº†ã€‚ åœ¨æ•°æ®åº“åˆ›å»ºæˆåŠŸä¹‹åå…¶å®æˆ‘ä»¬å¾€å¾€è¿˜éœ€è¦ä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯æˆ‘ä»¬æƒ³å¯ä»¥åœ¨è¿œç¨‹ä½¿ç”¨navcatå»è¿æ¥æŸ¥çœ‹æˆ‘ä»¬çš„æ•°æ®åº“ï¼Œé‚£æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦åšä¸‹é¢å‡ ä»¶äº‹ã€‚ 1.å¼€å¯é˜¿é‡Œäº‘ç½‘ç»œå®‰å…¨ç»„ä¸­çš„3306ç«¯å£çš„é˜²ç«å¢™ã€‚å…·ä½“å¦‚ä½•å¼€å¯è¯·å¼€æˆ‘çš„å¦ä¸€ç¯‡åšå®¢Macä¸‹è´­ä¹°é…ç½®å’Œè®¿é—®é˜¿é‡Œäº‘æœåŠ¡å™¨çš„è¯¦ç»†æ­¥éª¤ä¸­çš„[MACä½¿ç”¨sshè¿œç¨‹è¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨]**[æ·»åŠ ç½‘ç»œå®‰å…¨ç»„]** æˆ–è€…è‡ªè¡Œç™¾åº¦ã€‚ 2.ä¸ºæˆ‘ä»¬çš„æ•°æ®åº“åˆ›å»ºç”¨æˆ·æˆæƒï¼Œè¿™æ ·æ‰å¯ä»¥è¿œç¨‹è¿æ¥ã€‚å…·ä½“å‚è€ƒï¼šé˜¿é‡Œäº‘è¿œç¨‹è¿æ¥æ•°æ®åº“ 3.ä¿®æ”¹æˆ‘ä»¬çš„æ•°æ®åº“ä¸­çš„é…ç½®æ–‡ä»¶ALLOW_HOST,å¦‚æœè¯¥é…ç½®ä¸º127.0.0.1ï¼Œè¯·åˆ é™¤æˆ–æ³¨é‡Šæ‰æ­¤è¡Œã€‚ æ³¨æ„windowsä¸‹mysqlé…ç½®æ–‡ä»¶æ˜¯.iniæ–‡ä»¶ï¼Œlinuxä¸‹æ˜¯.cnfæ–‡ä»¶ï¼Œè¯·æ‰¾åˆ°è‡ªå·±å¯¹åº”çš„é…ç½®æ–‡ä»¶ä¿®æ”¹ã€‚ linux ä¸€èˆ¬åœ¨/etc/mysql/ä¸‹æœ‰mysqld.cnfä½†æ˜¯åšä¸»çš„æ˜¯åœ¨ï¼š 1/etc/mysql/mysql.conf.d/mysqld.cnf ä¸‹æ‰€ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µæŸ¥æ‰¾ã€‚ åœ¨é…ç½®å¥½ä¸Šè¿°ä¹‹åä¸€èˆ¬å°±å¯ä»¥é€šè¿‡navcatè¿œç¨‹è¿æ¥æˆ‘ä»¬çš„æ•°æ®åº“äº†ã€‚ç”¨æˆ·åå’Œå¯†ç å°±æ˜¯ä½ åœ¨ç¬¬äºŒéƒ¨å¼€å¯æƒé™çš„ç”¨æˆ·åå¯†ç ã€‚ æµ‹è¯•è¿è¡Œé¡¹ç›®é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¿®æ”¹setting.pyä¸­çš„ALLOW_HOST=[47.92.52.97]ï¼Œå³æˆ‘ä»¬é˜¿é‡Œäº‘æœåŠ¡å™¨çš„å…¬ç½‘Ipè¿™æ ·å°±å¯ä»¥é€šè¿‡å…¶ä»–ç”µè„‘è®¿é—®æˆ‘ä»¬çš„æœåŠ¡å™¨äº†ã€‚ ç„¶åæˆ‘ä»¬åœ¨é¡¹ç›®ä¸‹æ‰§è¡Œ: 1python3 manage.py runserver 0.0.0.0:8000 è¿™æ ·å°±å¯ä»¥é€šè¿‡Ip:8000 æ¥è®¿é—®æˆ‘ä»¬çš„ç½‘ç«™äº†ï¼Œåœ¨ç½‘ç«™åœ°å€æ è¾“å…¥ï¼šhttp://47.92.53.97ï¼š8000å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç½‘ç«™äº†ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šæœ‰ä¸€äº›æ˜¾ç¤ºé—®é¢˜ï¼Œè¿™ä¸»è¦æ˜¯æˆ‘ä»¬çš„é™æ€æ–‡ä»¶æœªæ­£ç¡®åŠ è½½ã€‚ æ”¶é›†é™æ€æ–‡ä»¶ï¼ˆcss\\js\\imageï¼‰é¡¹ç›®ä¸­æˆ‘ä»¬çš„é™æ€æ–‡ä»¶ä¸€èˆ¬éƒ½æ˜¯åˆ†æ•£çš„ã€‚ä¸æ–¹ä¾¿æœåŠ¡å™¨å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠæ‰€æœ‰çš„é™æ€æ–‡ä»¶æ”¶é›†åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼š é¦–å…ˆåœ¨æˆ‘ä»¬åœ¨é¡¹ç›®ä¸‹æ–°å»ºè®®å„ä½ç©ºæ–‡ä»¶å¤¹: 1mkdir static_dist ç”¨æ¥å­˜æ”¾ç´ æœ‰çš„é™æ€æ–‡ä»¶ï¼Œç„¶ååœ¨setting.pyä¸­é…ç½®: 1STATIC_ROOT= os.path.join(BASE_DIR,&apos;static_dist&apos;) ç„¶åæ‰§è¡Œ: 1python manage.py collectstatic collectstatic ä¼šæ”¶é›†setting.pyä¸­çš„STATICFILES_DIRS æŒ‡å®šçš„ç›®å½•æ‰€æœ‰çš„é™æ€æ–‡ä»¶å’Œå„ä¸ªappä¸‹çš„staticä¸‹çš„é™æ€æ–‡ä»¶åˆ°static_distæ–‡ä»¶å¤¹ä¸­ã€‚å…·ä½“å‚è€ƒdjangoæ–‡æ¡£ã€‚ å®‰è£…é…ç½®uwsgiuwsgiæ˜¯ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ï¼Œéé™æ€æ–‡ä»¶çš„ç½‘ç»œè¯·æ±‚å°±å¿…é¡»é€šè¿‡ä»–å®Œæˆï¼Œä»–ä¹Ÿå¯ä»¥å……å½“é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œä½†ä¸æ˜¯ä»–çš„å¼ºé¡¹ã€‚uwsgiæ˜¯ä½¿ç”¨pythonç¼–å†™çš„ï¼Œå› æ­¤é€šè¿‡pip3 install uwsgiå°±å¯ä»¥äº†ã€‚(uwsgiå¿…é¡»å®‰è£…åœ¨ç³»ç»Ÿçº§åˆ«çš„Pythonç¯å¢ƒä¸­ï¼Œä¸è¦å®‰è£…åˆ°è™šæ‹Ÿç¯å¢ƒä¸­)ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªå«åšuwsgi.iniçš„é…ç½®æ–‡ä»¶ï¼ˆåŸåˆ™ä¸Šå¯ä»¥åœ¨ä»»ä½•ä½ç½®åˆ›å»ºï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ç›®å½•é‡Œåˆ›å»ºï¼‰ï¼š 123456789101112131415161718192021222324[uwsgi]# å¿…é¡»å…¨éƒ¨ä¸ºç»å¯¹è·¯å¾„# é¡¹ç›®çš„è·¯å¾„chdir = /srv/xiaofanzhuan #è¡¨ç¤ºæˆ‘ä»¬é¡¹ç›®åœ¨æœåŠ¡å™¨ä¸­çš„ç»å¯¹è·¯å¾„ # Djangoçš„wsgiæ–‡ä»¶module = xiaofanzhuan.wsgi #æŒ‡å®šæˆ‘ä»¬é¡¹ç›®ä¸­çš„wsgiæ–‡ä»¶# Pythonè™šæ‹Ÿç¯å¢ƒçš„è·¯å¾„home = /root/.virtualenvs/xfz-env# è¿›ç¨‹ç›¸å…³çš„è®¾ç½®# ä¸»è¿›ç¨‹master = true# æœ€å¤§æ•°é‡çš„å·¥ä½œè¿›ç¨‹processes = 10http = :8000 #è¿è¡Œç«¯å£# è®¾ç½®socketçš„æƒé™chmod-socket = 666 #socketç”¨ç”¨å’Œnginxé€šä¿¡# é€€å‡ºçš„æ—¶å€™æ˜¯å¦æ¸…ç†ç¯å¢ƒvacuum = truedaemonize = /var/log/xfz_uwsgi.log #æŒ‡å®šlogæ–‡ä»¶ä½ç½®ï¼Œä¸€èˆ¬çš„é”™è¯¯ä¿¡æ¯å…¨åœ¨é‡Œé¢ ç„¶åé€šè¿‡å‘½ä»¤uwsgi â€“ini uwsgi.iniè¿è¡Œï¼Œç¡®ä¿æ²¡æœ‰é”™è¯¯ã€‚ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—®http://ipåœ°å€:8000ï¼Œå¦‚æœèƒ½å¤Ÿè®¿é—®åˆ°é¡µé¢ï¼ˆå¯èƒ½æ²¡æœ‰é™æ€æ–‡ä»¶ï¼‰è¯´æ˜uwsgié…ç½®æ²¡æœ‰é—®é¢˜ã€‚ é€šè¿‡ps aux | grep uwsgi æŸ¥çœ‹uwsgiè¿è¡Œæƒ…å†µï¼Œä½¿ç”¨kill -9 ç¬¬ä¸€ä¸ªuwsgi pid å…³é—­uwsgiè¿è¡Œã€‚ å®‰è£…é…ç½®niginxè™½ç„¶uwsgiå¯ä»¥æ­£å¸¸çš„éƒ¨ç½²æˆ‘ä»¬çš„é¡¹ç›®äº†ã€‚ä½†æˆ‘ä»¬è¿˜æ˜¯ä¾ç„¶è¦é‡‡ç”¨nginxæ¥ä½œä¸ºwebæœåŠ¡å™¨ã€‚ä½¿ç”¨nginxæ¥ä½œä¸ºwebæœåŠ¡å™¨æœ‰ä»¥ä¸‹å¥½å¤„ï¼š uwsgiå¯¹é™æ€æ–‡ä»¶èµ„æºå¤„ç†å¹¶ä¸å¥½ï¼ŒåŒ…æ‹¬å“åº”é€Ÿåº¦ï¼Œç¼“å­˜ç­‰ã€‚nginxä½œä¸ºä¸“ä¸šçš„webæœåŠ¡å™¨ï¼Œæš´éœ²åœ¨å…¬ç½‘ä¸Šä¼šæ¯”uwsgiæ›´åŠ å®‰å…¨ä¸€ç‚¹ã€‚è¿ç»´èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚æ¯”å¦‚è¦å°†æŸäº›IPå†™å…¥é»‘åå•ï¼Œnginxå¯ä»¥éå¸¸æ–¹ä¾¿çš„å†™è¿›å»ã€‚è€Œuwsgiå¯èƒ½è¿˜è¦å†™ä¸€å¤§æ®µä»£ç æ‰èƒ½å®ç°ã€‚ å®‰è£…ï¼šé€šè¿‡apt install nginxå³å¯å®‰è£…ã€‚ nginxç®€å•æ“ä½œå‘½ä»¤ï¼šå¯åŠ¨ï¼šservice nginx startå…³é—­ï¼šservice nginx stopé‡å¯ï¼šservice nginx restartæµ‹è¯•é…ç½®æ–‡ä»¶ï¼šservice nginx configtest æ·»åŠ é…ç½®æ–‡ä»¶ï¼šåœ¨/etc/nginx/conf.dç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå«åšzhiliaoketang.confï¼Œç„¶åå°†ä»¥ä¸‹ä»£ç ç²˜è´´è¿›å»ï¼š 12345678910111213141516171819202122232425262728upstream zhiliaoketang &#123; server unix:///srv/zhiliaoketang/zhiliaoketang.sock; &#125;# é…ç½®æœåŠ¡å™¨server &#123; # ç›‘å¬çš„ç«¯å£å· listen 80; # åŸŸå server_name 192.168.0.101; charset utf-8; # æœ€å¤§çš„æ–‡ä»¶ä¸Šä¼ å°ºå¯¸ client_max_body_size 75M; # é™æ€æ–‡ä»¶è®¿é—®çš„url location /static &#123; # é™æ€æ–‡ä»¶åœ°å€ alias /srv/zhiliaoketang/static_dist; &#125; # æœ€åï¼Œå‘é€æ‰€æœ‰éé™æ€æ–‡ä»¶è¯·æ±‚åˆ°djangoæœåŠ¡å™¨ location / &#123; uwsgi_pass zhiliaoketang; # uwsgi_paramsæ–‡ä»¶åœ°å€ include /etc/nginx/uwsgi_params; &#125;&#125; å†™å®Œé…ç½®æ–‡ä»¶åï¼Œä¸ºäº†æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦è®¾ç½®æˆåŠŸï¼Œè¿è¡Œå‘½ä»¤ï¼šservice nginx configtestï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œè¯´æ˜æˆåŠŸã€‚æ¯æ¬¡ä¿®æ”¹å®Œäº†é…ç½®æ–‡ä»¶ï¼Œéƒ½è¦è®°å¾—è¿è¡Œservice nginx restartã€‚ uwsgi å’Œnginxçš„å…³ç³»åŠä»–ä»¬å„è‡ªçš„ä½œç”¨ã€‚ä½¿ç”¨supervisorç®¡ç†uwsgiè¿›ç¨‹ï¼šè®©supervisorç®¡ç†uwsgiï¼Œå¯ä»¥åœ¨uwsgiå‘ç”Ÿæ„å¤–çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨çš„é‡å¯ã€‚ å®‰è£…supervisorï¼šå› ä¸ºsupervisoræ˜¯ç”¨pythonå†™æˆçš„ï¼Œæ‰€ä»¥é€šè¿‡pipå³å¯å®‰è£…ã€‚å¹¶ä¸”å› ä¸ºsupervisorä¸æ”¯æŒpython3ï¼Œå› æ­¤éœ€è¦æŠŠsupervisorå®‰è£…åœ¨python2çš„ç¯å¢ƒä¸­ã€‚pip2 install supervisorã€‚ å¯åŠ¨ï¼šåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å«åšsupervisor.confï¼Œç„¶åå°†ä»¥ä¸‹ä»£ç å¡«å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041# supervisorçš„ç¨‹åºåå­— [program:mysite] # supervisoræ‰§è¡Œçš„å‘½ä»¤ command=uwsgi --ini zlkt_uwsgi.ini # é¡¹ç›®çš„ç›®å½• directory = /srv/zhiliaoketang # å¼€å§‹çš„æ—¶å€™ç­‰å¾…å¤šå°‘ç§’ startsecs=0 # åœæ­¢çš„æ—¶å€™ç­‰å¾…å¤šå°‘ç§’ stopwaitsecs=0 # è‡ªåŠ¨å¼€å§‹ autostart=true # ç¨‹åºæŒ‚äº†åè‡ªåŠ¨é‡å¯ autorestart=true # è¾“å‡ºçš„logæ–‡ä»¶ stdout_logfile=/srv/zhiliaoketang/log/supervisord.log # è¾“å‡ºçš„é”™è¯¯æ–‡ä»¶ stderr_logfile=/srv/zhiliaoketang/log/supervisord.err [supervisord] # logçš„çº§åˆ« loglevel=debug [inet_http_server] # supervisorçš„æœåŠ¡å™¨ port = :9001 # ç”¨æˆ·åå’Œå¯†ç  username = admin password = 123 # ä½¿ç”¨supervisorctlçš„é…ç½® [supervisorctl] # ä½¿ç”¨supervisorctlç™»å½•çš„åœ°å€å’Œç«¯å£å· serverurl = http://127.0.0.1:9001 # ç™»å½•supervisorctlçš„ç”¨æˆ·åå’Œå¯†ç  username = admin password = 123 [rpcinterface:supervisor] supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface ç„¶åä½¿ç”¨å‘½ä»¤supervisord -c supervisor.confè¿è¡Œå°±å¯ä»¥äº†ã€‚ä»¥åå¦‚æœæƒ³è¦å¯åŠ¨uwsgiï¼Œå°±å¯ä»¥é€šè¿‡å‘½ä»¤supervisorctl -c supervisor.confè¿›å…¥åˆ°ç®¡ç†æ§åˆ¶å°ï¼Œç„¶åå¯ä»¥æ‰§è¡Œç›¸å…³çš„å‘½ä»¤è¿›è¡Œç®¡ç†ï¼š status # æŸ¥çœ‹çŠ¶æ€start program_name #å¯åŠ¨ç¨‹åºrestart program_name #é‡æ–°å¯åŠ¨ç¨‹åºstop program_name # å…³é—­ç¨‹åºreload # é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶quit # é€€å‡ºæ§åˆ¶å°","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é˜¿é‡Œäº‘æœåŠ¡å™¨","slug":"æŠ€æœ¯/é˜¿é‡Œäº‘æœåŠ¡å™¨","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é˜¿é‡Œäº‘æœåŠ¡å™¨/"}],"tags":[{"name":"é˜¿é‡Œäº‘æœåŠ¡å™¨","slug":"é˜¿é‡Œäº‘æœåŠ¡å™¨","permalink":"http://puguojing.com/tags/é˜¿é‡Œäº‘æœåŠ¡å™¨/"},{"name":"éƒ¨ç½²","slug":"éƒ¨ç½²","permalink":"http://puguojing.com/tags/éƒ¨ç½²/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é˜¿é‡Œäº‘æœåŠ¡å™¨","slug":"æŠ€æœ¯/é˜¿é‡Œäº‘æœåŠ¡å™¨","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é˜¿é‡Œäº‘æœåŠ¡å™¨/"}]},{"title":"Macä¸‹è´­ä¹°é…ç½®å’Œè®¿é—®é˜¿é‡Œäº‘æœåŠ¡å™¨çš„è¯¦ç»†æ­¥éª¤","slug":"Macä¸‹è´­ä¹°é…ç½®å’Œè®¿é—®é˜¿é‡Œäº‘æœåŠ¡å™¨çš„è¯¦ç»†æ­¥éª¤","date":"2018-11-06T09:08:02.000Z","updated":"2018-11-06T10:58:45.294Z","comments":true,"path":"2018/11/06/Macä¸‹è´­ä¹°é…ç½®å’Œè®¿é—®é˜¿é‡Œäº‘æœåŠ¡å™¨çš„è¯¦ç»†æ­¥éª¤/","link":"","permalink":"http://puguojing.com/2018/11/06/Macä¸‹è´­ä¹°é…ç½®å’Œè®¿é—®é˜¿é‡Œäº‘æœåŠ¡å™¨çš„è¯¦ç»†æ­¥éª¤/","excerpt":"","text":"æœ€è¿‘ä¸€ç›´æƒ³ä¹°ä¸€ä¸ªé˜¿é‡Œäº‘æœåŠ¡å™¨ç©ç©ï¼Œå¬è¯´å­¦ç”Ÿç‰ˆçš„éå¸¸ä¾¿å®œä¸€ä¸ªæœˆåªè¦9.9å…ƒï¼Œä½†æ˜¯æˆ‘å·²ç»æ¯•ä¸šäº†å•Šï¼Œæ‰€ä»¥å¿ç—›ä¹°äº†ä¸€ä¸ªå…¥é—¨ä¸€70.2å…ƒ/æœˆã€‚ é˜¿é‡Œäº‘æ³¨å†Œé¦–å…ˆä½ éœ€è¦æ³¨å†Œä¸€ä¸ªé˜¿é‡Œäº‘è´¦æˆ·æˆ–è€…ä¸æƒ³æ³¨å†Œç›´æ¥ä½¿ç”¨è‡ªå·±çš„æ·˜å®ã€æ”¯ä»˜å®è´¦æˆ·ç™»å½•ä¹Ÿå¯ä»¥ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ³¨å†Œ é˜¿é‡Œäº‘æ³¨å†Œ é˜¿é‡Œäº‘ç¿¼è®¡åˆ’å¦‚æœä½ è¿˜æ˜¯å­¦ç”Ÿçš„è¯ï¼Œé‚£ä¹ˆæ­å–œä½ å¯ä»¥åœ¨è¿™é‡ŒåŠ å…¥é˜¿é‡Œäº‘ç¿¼è®¡åˆ’ä¸€ä¸ªæœˆåªéœ€è¦9.5å…ƒï¼ğŸ˜ é˜¿é‡Œäº‘æœåŠ¡å™¨ECSè´­ä¹°é‚£å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ä¸æ»¡è¶³æ¡äº‘ç¿¼è®¡åˆ’çš„æ¡ä»¶é‚£å°±åªèƒ½åœ¨ ã€é˜¿é‡Œäº‘ã€‘-ã€äº§å“ã€‘-ã€ç²¾é€‰ã€‘-ã€äº‘æœåŠ¡å™¨ECSã€‘(ECSæ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨çš„åå­—ï¼Œè…¾è®¯çš„å«CVMï¼Œä»…ä»…æ˜¯ä¸€ä¸ªåå­—è€Œå·²) åœ¨ç‚¹å‡»è¿›å…¥ä¹‹åä½ ä¼šçœ‹åˆ°å¦‚ä¸‹çš„ç•Œé¢ï¼š 1.ç‚¹å‡»ç«‹å³è´­ä¹°ï¼Œï¼š2.ä½ ä¼šçœ‹åˆ°ä¸€å¤§å †ä½ å¹¶ä¸èƒ½çœ‹æ‡‚çš„é…ç½®ï¼Œæ²¡å…³ç³»ï¼Œä½ å¯ä»¥ç›´æ¥é€‰æ‹©ã€ä¸€é”®è´­ä¹°ã€‘ 3.æ˜¯ä¸æ˜¯å¼€èµ·æ¥æ¸…çˆ½å¤šäº†ï¼Ÿé‚£è¿™äº›é…ç½®åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿåœ°åŸŸï¼šè¡¨ç¤ºä½ æœåŠ¡å™¨çš„åœ°ç†ä½ç½®ï¼Œå…·ä½“ä¸åŒçš„åœ°ç†ä½ç½®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè¿™ä¸ªä¸»è¦æ˜¯è®¿é—®è€…çš„è·ç¦»æœåŠ¡å™¨è¶Šè¿œä¸€èˆ¬æƒ…å†µè®¿é—®é€Ÿåº¦è¶Šæ…¢ï¼Œæ‰€ä»¥ä½ çœ‹åˆ°å‘è¾¾çš„åä¸œåœ°åŒºæœåŠ¡å™¨ç¨å¾®è´µä¸€ç‚¹ã€‚ä½ å¯ä»¥æ ¹æ®ä½ çš„å…·ä½“åœ°ç†ä½ç½®æƒ…å†µå’Œmoneyå¤šå°‘è‡ªç”±é€‰æ‹©ï¼Œå“ªä¸€ä¸ªåŒºåŸŸéƒ½å¯ä»¥ã€‚ä½†æ˜¯è¦è®°ä½ä½ è‡ªå·±æ‰€é€‰æ‹©çš„åŒºåŸŸï¼Œå› ä¸ºè´­ä¹°å®Œæˆåæˆ‘ä»¬è¦åˆ°è¿™ä¸ªåŒºåŸŸçš„ç®¡ç†æ§åˆ¶å°ä¸‹ç®¡ç†æˆ‘ä»¬çš„æœåŠ¡å™¨ã€‚ å®ä¾‹ï¼šå°±æ˜¯è´­ä¹°çš„ç”µè„‘ä¸»æœºäº†ï¼Œå…·ä½“é…ç½®æ€ä¹ˆé€‰æ‹©ï¼Œå…³é”®çœ‹ä½ çš„éœ€æ±‚äº†ï¼Œå°±åƒæˆ‘ä»¬ä¹°ç”µè„‘ä¸€æ ·CPUã€å†…å­˜ã€ç£ç›˜å¤§å°ï¼Œå…·ä½“è¦çœ‹ä½ æ¥å¹²ä»€ä¹ˆï¼Œä¸€èˆ¬æˆ‘å°±é€‰æœ€å°çš„ï¼Œå› ä¸ºæˆ‘çš„ç½‘ç«™å°±æ˜¯ä¸ªäººå°ç½‘ç«™å•Šã€‚ é•œåƒï¼šè¿™ä¸ªä¸»è¦æ˜¯æˆ‘ä»¬è´­ä¹°çš„ä¸»æœºä½ æƒ³è®©ä»–è£…ä»€ä¹ˆæ ·çš„æ“ä½œç³»ç»Ÿå’Œæ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œæœ‰Windowsã€linuxä¸¤å¤§ç±»ã€‚è‡³äºä½ è¯¥å¦‚ä½•é€‰æ‹©ä¸»è¦å‚è€ƒä½ ç½‘ç«™é‡‡ç”¨çš„æŠ€æœ¯ï¼Œç”±äºæœ¬äººä½¿ç”¨çš„æ˜¯Pythonå¼€å‘çš„ç½‘ç«™,æ‰€ä»¥é€‰æ‹©æ˜¯Ubuntuï¼Œä¸€æ¬¾å¼ºå¤§è€Œç®€å•çš„Linuxå‘è¡Œç‰ˆã€‚ å…¬ç½‘å¸¦å®½ï¼šè¿™ä¸ªè¦å–å†³ä½ ç½‘ç«™çš„è®¿é—®é‡äº†ï¼Œæˆ‘å½“ç„¶é€‰æœ€ä½çš„äº†1Mbpså¯¹äºæˆ‘æ¥è¯´å¤Ÿäº†ã€‚ è´­ä¹°é‡ï¼šå°±æ˜¯è´­ä¹°æ—¶é—´ï¼Œä½ å¯ä»¥è´­ä¹°ä¸€å‘¨ï¼Œè¿™é‡Œæ¥¼ä¸»ä¹°äº†ä¸€ä¸ªæœˆã€‚ 4.é€‰æ‹©å®Œé…ç½®ä¹‹åç›´æ¥ç‚¹å‡»ã€ç«‹å³è´­ä¹°ã€‘ 5.å‹¾é€‰ã€äº‘æœåŠ¡å™¨ECSæœåŠ¡æ¡æ¬¾ã€‘-ã€å»ä¸‹å•ã€‘ 6.ã€ç¡®è®¤æ”¯ä»˜ã€‘ï¼Œç„¶åä½¿ç”¨æ”¯ä»˜å®æ‰«ç æ”¯ä»˜å³å¯ã€‚ æŸ¥çœ‹è´­ä¹°äº‘æœåŠ¡å™¨ECS1.åœ¨ä½ è´­ä¹°å®Œæˆä¹‹åä¸€èˆ¬ä¼šè‡ªåŠ¨è·³è½¬åˆ°äº‘æœåŠ¡å™¨ECSç®¡ç†æ§åˆ¶å°ï¼Œä½ å¯ä»¥é€šè¿‡ç‚¹å‡»ä¸»é¡µå³ä¸Šè§’çš„ã€æ§åˆ¶å°ã€‘è¿›å…¥æ§åˆ¶å°ç®¡ç†é¡µé¢ã€‚ 2.è¿›å…¥ä¹‹ååœ¨å·¦ä¾§é€‰æ‹©ã€äº‘æœåŠ¡å™¨ECSã€‘ 3.è¿›å…¥ä¹‹åé€‰æ‹© å·¦ä¾§ã€å®ä¾‹ã€‘æŸ¥çœ‹è´­ä¹°çš„äº‘æœåŠ¡å™¨ã€‚ 4.å¦‚æœåœ¨ã€å®ä¾‹ã€‘ä¸‹æ²¡æœ‰æ‰¾åˆ°äº‘æœåŠ¡å™¨çš„è¯ï¼Œè¯´æ˜ä½ å¯èƒ½æ²¡æœ‰åˆ‡æ¢åˆ°è‡ªå·±å¯¹åº”åœ°ç†ä½ç½®çš„æ§åˆ¶å°ã€‚ä½ å¯ä»¥é€šè¿‡åšå·¦ä¸Šè§’ä¸‹æ‹‰é€‰æ‹©è‡ªå·±è´­ä¹°æ—¶é€‰æ‹©çš„æœåŠ¡å™¨åœ°ç†åŒºåŸŸã€‚ 4.åœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°ã€åŸºæœ¬ä¿¡æ¯ã€‘ã€é…ç½®ä¿¡æ¯ã€‘ã€ä»˜è´¹ä¿¡æ¯ã€‘ã€ç›‘æ§ä¿¡æ¯ã€‘ç­‰ç­‰ã€‚ è¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨åœ¨è¿™é‡Œé¢å¯ä»¥è¿›è¡Œã€Œè¿œç¨‹è¿æ¥ã€åˆ°ä½ çš„æœåŠ¡å™¨ï¼Œä½†æ˜¯åœ¨è¿›è¡Œã€Œè¿œç¨‹è¿æ¥ã€ä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦é…ç½®ä¸€ä¸‹æˆ‘ä»¬çš„æœåŠ¡å™¨ç”¨æˆ·å¯†ç ï¼š 1.ç‚¹å‡»ã€æ›´å¤šã€‘ã€å¯†ç /å¯†é’¥ã€‘ã€é‡ç½®å¯†ç ã€‘ï¼Œå°±å¯ä»¥è‡ªå·±è®¾ç½®ç™»å½•å¯†ç äº†ã€‚ 2.åœ¨è®¾ç½®å®Œç™»å½•å¯†ç åéœ€è¦é‡å¯æœåŠ¡å™¨ï¼Œä½ å¯ä»¥åœ¨ã€ç®¡ç†ã€‘ä¸­é‡å¯æœåŠ¡å™¨ï¼š ç„¶åæˆ‘ä»¬å°±å¯ä»¥ç‚¹å‡»ã€è¿œç¨‹è¿æ¥ã€‘ï¼Œç¬¬ä¸€æ¬¡è¿œç¨‹è¿æ¥æ—¶ä¼šç»™ä½ ä¸€ä¸ªé»˜è®¤çš„6ä½å¯†ç ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ä¸Šé¢çš„ã€é‡ç½®å¯†ç ã€‘ä¸­æ‰¾åˆ°ã€ä¿®æ”¹è¿œç¨‹è¿æ¥å¯†ç ã€‘è¿›è¡Œä¿®æ”¹è‡ªå·±çš„å¯†ç ã€‚åœ¨è¾“å…¥è¿œç¨‹è¿æ¥å¯†ç åä¼šè¿›å…¥ä¸‹é¢çš„ç•Œé¢ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç å°±å¯ä»¥ç™»å½•äº†ã€‚ ç”¨æˆ·åé»˜è®¤æ˜¯root,å¯†ç å°±æ˜¯åˆšæ‰æˆ‘ä»¬é‡ç½®çš„å¯†ç ï¼ˆä¸æ˜¯è¿œç¨‹è¿æ¥å¯†ç ï¼‰ã€‚ MACä½¿ç”¨sshè¿œç¨‹è¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸è¿‡é˜¿é‡Œäº‘æä¾›çš„è¿™ä¸ªã€Œè¿œç¨‹è¿æ¥ã€æˆ‘ä»¬å¯è‚¯å®šä¸å¤ªä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šä½¿ç”¨è‡ªå·±çš„sshå®¢æˆ·ç«¯ç™»å½•é˜¿é‡Œäº‘ä¸»æœºã€‚ ä½†æ˜¯åœ¨ä½¿ç”¨shhè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨ä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å®‰å…¨è®¾ç½®ï¼Œå¦åˆ™ä½ ç”¨sshè¿æ¥æˆ–è€…pingå…¬ç½‘ipéƒ½æ˜¯ä¼šå¤±è´¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆè¿›è¡Œè®¾ç½®ã€‚ 1.ç‚¹å‡»ã€Œæ›´å¤šã€-ã€Œå®‰å…¨ç»„é…ç½®ã€-ã€Œé…ç½®è§„åˆ™ã€ 2.ç‚¹å‡»ã€Œæ·»åŠ å®‰å…¨ç»„è§„åˆ™ã€ç„¶åå°±å¼€å§‹æ·»åŠ è§„åˆ™äº†ï¼Œå¯å‚è€ƒæˆ‘çš„é…ç½® ç„¶åæˆ‘ä»¬æ¥pingä¸€ä¸‹å’Œå°è¯•ä½¿ç”¨sshç™»å½•ï¼šå…ˆçœ‹ä¸€ä¸‹IPåœ°å€ï¼Œåœ¨ã€å®ä¾‹ã€‘ä¿¡æ¯ä¸­æŸ¥çœ‹ ç„¶åå°è¯•pingå’Œsshç™»å½•ï¼š æŸ¥çœ‹è¿œç¨‹ç½‘ç»œæ˜¯å¦æ­£å¸¸è¿æ¥ï¼š 1ping 47.93.53.97 è¿œç¨‹ç™»å½•ï¼šrootç”¨æˆ·åï¼ŒæŒ‰æç¤ºè¾“å…¥ä¸Šé¢é‡ç½®çš„ç™»å½•å¯†ç  1ssh root@47.93.53.97 è¿æ¥æˆåŠŸåå°±å¯ä»¥å¹²è‡ªå·±çš„äº‹æƒ…äº†ï¼","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é˜¿é‡Œäº‘","slug":"æŠ€æœ¯/é˜¿é‡Œäº‘","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é˜¿é‡Œäº‘/"}],"tags":[{"name":"é˜¿é‡Œäº‘æœåŠ¡å™¨","slug":"é˜¿é‡Œäº‘æœåŠ¡å™¨","permalink":"http://puguojing.com/tags/é˜¿é‡Œäº‘æœåŠ¡å™¨/"},{"name":"éƒ¨ç½²","slug":"éƒ¨ç½²","permalink":"http://puguojing.com/tags/éƒ¨ç½²/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é˜¿é‡Œäº‘","slug":"æŠ€æœ¯/é˜¿é‡Œäº‘","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é˜¿é‡Œäº‘/"}]},{"title":"celeryæ‰§è¡Œä»»åŠ¡æŠ¥é”™ï¼Œæœ‰å¯èƒ½æ˜¯ä½ çš„ç‰ˆæœ¬ä¸å¯¹","slug":"celery(1)è§£å†³è¿è¡Œtaskä»»åŠ¡æ—¶workeræŠ¥é”™","date":"2018-11-06T06:13:44.000Z","updated":"2018-12-13T03:28:40.022Z","comments":true,"path":"2018/11/06/celery(1)è§£å†³è¿è¡Œtaskä»»åŠ¡æ—¶workeræŠ¥é”™/","link":"","permalink":"http://puguojing.com/2018/11/06/celery(1)è§£å†³è¿è¡Œtaskä»»åŠ¡æ—¶workeræŠ¥é”™/","excerpt":"","text":"å¦‚æœçš„celery workerèƒ½å¤Ÿæ­£å¸¸èµ·æ¥ï¼Œä½†æ˜¯åœ¨è¿è¡Œtaskä»»åŠ¡æ—¶å´æ˜¾ç¤ºå¦‚ä¸‹é”™è¯¯: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273(xxx-env) âœ celerydemo celery -A celerydemo worker -l info[2018-11-28 11:34:56,216: WARNING/MainProcess] /Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/celery/apps/worker.py:161: CDeprecationWarning:Starting from version 3.2 Celery will refuse to accept pickle by default.The pickle serializer is a security concern as it may give attackersthe ability to execute any command. It&apos;s important to secureyour broker from unauthorized access when using pickle, so we thinkthat enabling pickle should require a deliberate action and not bethe default choice.If you depend on pickle then you should set a setting to disable thiswarning and to be sure that everything will continue workingwhen you upgrade to Celery 3.2:: CELERY_ACCEPT_CONTENT = [&apos;pickle&apos;, &apos;json&apos;, &apos;msgpack&apos;, &apos;yaml&apos;]You must only enable the serializers that you will actually use. warnings.warn(CDeprecationWarning(W_PICKLE_DEPRECATED)) -------------- celery@PgjMacbookPro.local v3.1.26.post2 (Cipater)---- **** -------- * *** * -- Darwin-18.2.0-x86_64-i386-64bit-- * - **** ---- ** ---------- [config]- ** ---------- .&gt; app: celerydemo:0x10e621b70- ** ---------- .&gt; transport: redis://127.0.0.1:6379/0- ** ---------- .&gt; results: disabled://- *** --- * --- .&gt; concurrency: 4 (prefork)-- ******* ------- ***** ----- [queues] -------------- .&gt; celery exchange=celery(direct) key=celery[tasks] . main.tasks.mytask1[2018-11-28 11:34:56,386: INFO/MainProcess] Connected to redis://127.0.0.1:6379/0[2018-11-28 11:34:56,399: INFO/MainProcess] mingle: searching for neighbors[2018-11-28 11:34:57,409: INFO/MainProcess] mingle: all alone[2018-11-28 11:34:57,420: WARNING/MainProcess] /Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/celery/fixups/django.py:265: UserWarning: Using settings.DEBUG leads to a memory leak, never use this setting in production environments! warnings.warn(&apos;Using settings.DEBUG leads to a memory leak, never &apos;[2018-11-28 11:34:57,420: WARNING/MainProcess] celery@PgjMacbookPro.local ready.[2018-11-28 11:36:06,000: ERROR/MainProcess] Unrecoverable error: AttributeError(&quot;&apos;str&apos; object has no attribute &apos;items&apos;&quot;,)Traceback (most recent call last): File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/celery/worker/__init__.py&quot;, line 206, in start self.blueprint.start(self) File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/celery/bootsteps.py&quot;, line 123, in start step.start(parent) File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/celery/bootsteps.py&quot;, line 374, in start return self.obj.start() File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/celery/worker/consumer.py&quot;, line 280, in start blueprint.start(self) File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/celery/bootsteps.py&quot;, line 123, in start step.start(parent) File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/celery/worker/consumer.py&quot;, line 884, in start c.loop(*c.loop_args()) File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/celery/worker/loops.py&quot;, line 76, in asynloop next(loop) File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/kombu/async/hub.py&quot;, line 340, in create_loop cb(*cbargs) File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/kombu/transport/redis.py&quot;, line 1019, in on_readable self._callbacks[queue](message) File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/kombu/transport/virtual/__init__.py&quot;, line 534, in _callback self.qos.append(message, message.delivery_tag) File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/kombu/transport/redis.py&quot;, line 146, in append pipe.zadd(self.unacked_index_key, delivery_tag, time()) \\ File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/redis/client.py&quot;, line 2263, in zadd for pair in iteritems(mapping): File &quot;/Users/pgj/.virtualenvs/xxx-env/lib/python3.6/site-packages/redis/_compat.py&quot;, line 123, in iteritems return iter(x.items())AttributeError: &apos;str&apos; object has no attribute &apos;items&apos; è¯´æ˜ä½ çš„pip install å®‰è£…çš„redis çš„ç‰ˆæœ¬ä¸å¯¹ï¼å¿…é¡»è¦å’Œä½ çš„celery,celery-with-redisç‰ˆæœ¬å¯¹åº”ï¼šçœ‹ä¸€ä¸‹æˆ‘ä¹‹å‰æŠ¥é”™çš„redisç‰ˆæœ¬ï¼š 1redis 3.0.1 æ›´æ”¹åçš„ç‰ˆæœ¬: 1redis 2.10.6","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"}],"tags":[{"name":"celery","slug":"celery","permalink":"http://puguojing.com/tags/celery/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"}]},{"title":"å¸¸ç”¨ä¹¦ç±åˆ—è¡¨","slug":"å¸¸ç”¨ä¹¦ç±åˆ—è¡¨","date":"2018-11-06T06:13:44.000Z","updated":"2018-11-06T10:52:51.275Z","comments":true,"path":"2018/11/06/å¸¸ç”¨ä¹¦ç±åˆ—è¡¨/","link":"","permalink":"http://puguojing.com/2018/11/06/å¸¸ç”¨ä¹¦ç±åˆ—è¡¨/","excerpt":"","text":"pythonä¹¦ç±åˆ—è¡¨","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://puguojing.com/categories/å·¥å…·/"}],"tags":[{"name":"ä¹¦ç±","slug":"ä¹¦ç±","permalink":"http://puguojing.com/tags/ä¹¦ç±/"}],"keywords":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://puguojing.com/categories/å·¥å…·/"}]},{"title":"éšç¬”","slug":"éšç¬”","date":"2018-11-06T03:32:20.000Z","updated":"2018-11-06T04:04:12.573Z","comments":true,"path":"2018/11/06/éšç¬”/","link":"","permalink":"http://puguojing.com/2018/11/06/éšç¬”/","excerpt":"","text":"æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„è¿™é‡Œå¹¶æ²¡æœ‰ä»€ä¹ˆå†…å®¹â€¦","categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://puguojing.com/categories/éšç¬”/"}],"tags":[],"keywords":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://puguojing.com/categories/éšç¬”/"}]},{"title":"Macä¸‹Redisæ•°æ®çš„å®‰è£…ã€æ“ä½œã€é…ç½®","slug":"macä¸‹Redisæ•°æ®çš„å®‰è£…ã€æ“ä½œã€é…ç½®","date":"2018-10-16T07:49:56.000Z","updated":"2018-11-06T03:20:18.796Z","comments":true,"path":"2018/10/16/macä¸‹Redisæ•°æ®çš„å®‰è£…ã€æ“ä½œã€é…ç½®/","link":"","permalink":"http://puguojing.com/2018/10/16/macä¸‹Redisæ•°æ®çš„å®‰è£…ã€æ“ä½œã€é…ç½®/","excerpt":"","text":"1.å®‰è£…ä½¿ç”¨brewå®‰è£… 1brew install redis å®Œæˆåä¼šè‡ªåŠ¨å®‰è£…redis-serverå’Œredis-cliã€‚ rediså®‰è£…åï¼Œé»˜è®¤ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹PSè¿›ç¨‹å‘½ä»¤æŸ¥çœ‹ï¼š 1ps aux|grep redis æ‰§è¡Œç»“æœï¼š 1234âœ ~ ps aux|grep redispgj 17677 0.0 0.0 4287208 1064 s001 S+ 3:54ä¸‹åˆ 0:00.01 grep --color=auto --exclude-dir=.bzr --exclude-dir=CVS --exclude-dir=.git --exclude-dir=.hg --exclude-dir=.svn redispgj 17616 0.0 0.0 4295500 1160 s003 S+ 3:44ä¸‹åˆ 0:00.02 redis-cli -h 127.0.0.1 -p 6379 -a foobaredpgj 17555 0.0 0.0 4309276 2312 s002 S+ 3:40ä¸‹åˆ 0:00.62 redis-server 127.0.0.1:6379 å¯ä»¥çœ‹åˆ°è¿›ç¨‹PIDä¸º17555çš„å°±æ˜¯redis-server,å¯ä»¥ä½¿ç”¨ï¼š 1kill 17555 å…³é—­RedisæœåŠ¡ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼Œå¼ºåˆ¶æ€æ­»è¿›ç¨‹ï¼Œå¯èƒ½å¯¼è‡´Rediséƒ¨åˆ†ç¼“å­˜ä¸¢å¤±ï¼‰ã€‚ æ‰‹åŠ¨å¯åŠ¨ï¼šRediså®‰è£…å®Œæˆåä¼šç”Ÿæˆ/usr/local/etc/redis.confæ–‡ä»¶ï¼Œæ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼š 1redis-server /usr/local/etc/redis.conf ä¼šæ˜¾ç¤ºï¼š 123456789101112131415161718192021âœ ~ redis-server /usr/local/etc/redis.conf17555:C 16 Oct 15:40:34.312 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo17555:C 16 Oct 15:40:34.313 # Redis version=4.0.4, bits=64, commit=00000000, modified=0, pid=17555, just started17555:C 16 Oct 15:40:34.313 # Configuration loaded17555:M 16 Oct 15:40:34.316 * Increased maximum number of open files to 10032 (it was originally set to 4864). _._ _.-``__ &apos;&apos;-._ _.-`` `. `_. &apos;&apos;-._ Redis 4.0.4 (00000000/0) 64 bit .-`` .-```. ```\\/ _.,_ &apos;&apos;-._ ( &apos; , .-` | `, ) Running in standalone mode |`-._`-...-` __...-.``-._|&apos;` _.-&apos;| Port: 6379 | `-._ `._ / _.-&apos; | PID: 17555 `-._ `-._ `-./ _.-&apos; _.-&apos; |`-._`-._ `-.__.-&apos; _.-&apos;_.-&apos;| | `-._`-._ _.-&apos;_.-&apos; | http://redis.io `-._ `-._`-.__.-&apos;_.-&apos; _.-&apos; |`-._`-._ `-.__.-&apos; _.-&apos;_.-&apos;| | `-._`-._ _.-&apos;_.-&apos; | `-._ `-._`-.__.-&apos;_.-&apos; _.-&apos; `-._ `-.__.-&apos; _.-&apos; `-._ _.-&apos; è¯´æ˜å¯åŠ¨æˆåŠŸã€‚ å®¢æˆ·ç«¯è¿æ¥1redis-cli -h [ip] -p [ç«¯å£] -h:æŒ‡å®šIP-p:æŒ‡å®šç«¯å£å·ï¼ˆé»˜è®¤6379ï¼Œå¯åœ¨redis.confä¸­ä¿®æ”¹ï¼‰ 1redis-cli -h 127.0.0.1 -p 6379 ###é…ç½®é…ç½®æ–‡ä»¶å…·ä½“åœ¨ï¼š/usr/local/etc/redis.conf 1.æ·»åŠ å¯†ç åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°ï¼š 1234# use a very strong password otherwise it will be very easy to break.## requirepass foobared# å…¶ä¸­requirepassåé¢çš„å­—ç¬¦ï¼Œå°±æ˜¯Redisæ•°æ®åº“å¯†ç ,é»˜è®¤æ—¶æ³¨é‡Šæ‰çš„ã€‚å¦‚æœæ­¤å¤„æŒ‡å®šäº†å¯†ç ï¼Œé‚£ä¹ˆä»¥åä½¿ç”¨redis-clié“¾æ¥redisæ•°æ®åº“çš„æ—¶å€™å°±è¦ä½¿ç”¨å¯†ç ï¼Œå¦åˆ™è¿æ¥Redisæ•°æ®åº“ä¹‹å,æ— æ³•è¿›è¡ŒRedisæ•°æ®åº“æ“ä½œã€‚æ¯”å¦‚æŒ‡å®šå¯†ç ä¸ºï¼š123456 1234# use a very strong password otherwise it will be very easy to break.#requirepass 123456# é‚£ä¹ˆä»¥åä½¿ç”¨redis-cliè¿æ¥æ•°æ®åº“çš„æ—¶å€™å°±è¦ç”¨-aæŒ‡å®šå¯†ç ä¸‹é¢çš„å‘½ä»¤: 1redis-cli -h 127.0.0.1 -p 6379 -a 123456 å¦‚æœä½ åœ¨è¿æ¥redisæ•°æ®åº“æ˜¯æ²¡æœ‰ä½¿ç”¨-aæŒ‡å®šå¯†ç ï¼Œä¹Ÿå¯ä»¥åœ¨redis-cliå‘½ä»¤è¡Œä¸­ä½¿ç”¨ï¼šauth passwordæŒ‡å®šå¯†ç ï¼š 12127.0.0.1:6379&gt; auth 123456OK 2.è®©å…¶å…¶ä»–çš„ç”µè„‘è®¿é—®å¯ä»¥redisåœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾æ‰“bind,é»˜è®¤IPåªæœ‰127.0.0.1ï¼š 1bind 127.0.0.1 ::1 åœ¨127.0.0.1åé¢åŠ ä¸Šè‡ªå·±ç”µè„‘çš„ï¼ˆredis-serveræ‰€åœ¨çš„ç”µè„‘ï¼‰çš„IPã€‚ 1bind 127.0.0.1 198.168.1.102 æ³¨æ„ï¼šæ·»åŠ ä¸æ˜¯Rediså®¢æˆ·ç«¯çš„IPï¼Œæ˜¯redis-serverç«¯çš„IPã€‚è¿™æ ·åˆ«çš„å®¢æˆ·ç«¯å°±å¯ä»¥ä½¿ç”¨ï¼š 1redis-cli -h 198.168.1.102 6379 æ¥è¿æ¥redisæ•°æ®åº“äº†","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"Redis","slug":"Redis","permalink":"http://puguojing.com/tags/Redis/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"Macä¸‹Redisæ•°æ®çš„å®‰è£…ã€æ“ä½œã€é…ç½®","slug":"Redisæ•°æ®åº“çš„æ•°æ®ç±»å‹åŠæ“ä½œ","date":"2018-10-16T07:49:56.000Z","updated":"2018-11-22T16:25:54.695Z","comments":true,"path":"2018/10/16/Redisæ•°æ®åº“çš„æ•°æ®ç±»å‹åŠæ“ä½œ/","link":"","permalink":"http://puguojing.com/2018/10/16/Redisæ•°æ®åº“çš„æ•°æ®ç±»å‹åŠæ“ä½œ/","excerpt":"","text":"redisæ•™ç¨‹ï¼šæ¦‚è¿°redisæ˜¯ä¸€ç§nosqlæ•°æ®åº“,ä»–çš„æ•°æ®æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼ŒåŒæ—¶rediså¯ä»¥å®šæ—¶æŠŠå†…å­˜æ•°æ®åŒæ­¥åˆ°ç£ç›˜ï¼Œå³å¯ä»¥å°†æ•°æ®æŒä¹…åŒ–ï¼Œå¹¶ä¸”ä»–æ¯”memcachedæ”¯æŒæ›´å¤šçš„æ•°æ®ç»“æ„(string,liståˆ—è¡¨[é˜Ÿåˆ—å’Œæ ˆ],set[é›†åˆ],sorted set[æœ‰åºé›†åˆ],hash(hashè¡¨))ã€‚ç›¸å…³å‚è€ƒæ–‡æ¡£ï¼šhttp://redisdoc.com/index.html redisä½¿ç”¨åœºæ™¯ï¼š ç™»å½•ä¼šè¯å­˜å‚¨ï¼šå­˜å‚¨åœ¨redisä¸­ï¼Œä¸memcachedç›¸æ¯”ï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚ æ’è¡Œç‰ˆ/è®¡æ•°å™¨ï¼šæ¯”å¦‚ä¸€äº›ç§€åœºç±»çš„é¡¹ç›®ï¼Œç»å¸¸ä¼šæœ‰ä¸€äº›å‰å¤šå°‘åçš„ä¸»æ’­æ’åã€‚è¿˜æœ‰ä¸€äº›æ–‡ç« é˜…è¯»é‡çš„æŠ€æœ¯ï¼Œæˆ–è€…æ–°æµªå¾®åšçš„ç‚¹èµæ•°ç­‰ã€‚ ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¯”å¦‚celeryå°±æ˜¯ä½¿ç”¨redisä½œä¸ºä¸­é—´äººã€‚ å½“å‰åœ¨çº¿äººæ•°ï¼šè¿˜æ˜¯ä¹‹å‰çš„ç§€åœºä¾‹å­ï¼Œä¼šæ˜¾ç¤ºå½“å‰ç³»ç»Ÿæœ‰å¤šå°‘åœ¨çº¿äººæ•°ã€‚ ä¸€äº›å¸¸ç”¨çš„æ•°æ®ç¼“å­˜ï¼šæ¯”å¦‚æˆ‘ä»¬çš„BBSè®ºå›ï¼Œæ¿å—ä¸ä¼šç»å¸¸å˜åŒ–çš„ï¼Œä½†æ˜¯æ¯æ¬¡è®¿é—®é¦–é¡µéƒ½è¦ä»mysqlä¸­è·å–ï¼Œå¯ä»¥åœ¨redisä¸­ç¼“å­˜èµ·æ¥ï¼Œä¸ç”¨æ¯æ¬¡è¯·æ±‚æ•°æ®åº“ã€‚ æŠŠå‰200ç¯‡æ–‡ç« ç¼“å­˜æˆ–è€…è¯„è®ºç¼“å­˜ï¼šä¸€èˆ¬ç”¨æˆ·æµè§ˆç½‘ç«™ï¼Œåªä¼šæµè§ˆå‰é¢ä¸€éƒ¨åˆ†æ–‡ç« æˆ–è€…è¯„è®ºï¼Œé‚£ä¹ˆå¯ä»¥æŠŠå‰é¢200ç¯‡æ–‡ç« å’Œå¯¹åº”çš„è¯„è®ºç¼“å­˜èµ·æ¥ã€‚ç”¨æˆ·è®¿é—®è¶…è¿‡çš„ï¼Œå°±è®¿é—®æ•°æ®åº“ï¼Œå¹¶ä¸”ä»¥åæ–‡ç« è¶…è¿‡200ç¯‡ï¼Œåˆ™æŠŠä¹‹å‰çš„æ–‡ç« åˆ é™¤ã€‚ å¥½å‹å…³ç³»ï¼šå¾®åšçš„å¥½å‹å…³ç³»ä½¿ç”¨rediså®ç°ã€‚ å‘å¸ƒå’Œè®¢é˜…åŠŸèƒ½ï¼šå¯ä»¥ç”¨æ¥åšèŠå¤©è½¯ä»¶ã€‚rediså’Œmemcachedçš„æ¯”è¾ƒï¼šmemcached redisç±»å‹ |çº¯å†…å­˜æ•°æ®åº“ å†…å­˜ç£ç›˜åŒæ­¥æ•°æ®åº“æ•°æ®ç±»å‹ åœ¨å®šä¹‰valueæ—¶å°±è¦å›ºå®šæ•°æ®ç±»å‹ ä¸éœ€è¦è™šæ‹Ÿå†…å­˜ ä¸æ”¯æŒ æ”¯æŒè¿‡æœŸç­–ç•¥ æ”¯æŒ æ”¯æŒå­˜å‚¨æ•°æ®å®‰å…¨ ä¸æ”¯æŒ å¯ä»¥å°†æ•°æ®åŒæ­¥åˆ°dump.dbä¸­ç¾éš¾æ¢å¤ ä¸æ”¯æŒ å¯ä»¥å°†ç£ç›˜ä¸­çš„æ•°æ®æ¢å¤åˆ°å†…å­˜ä¸­åˆ†å¸ƒå¼ æ”¯æŒ ä¸»ä»åŒæ­¥è®¢é˜…ä¸å‘å¸ƒ ä¸æ”¯æŒ æ”¯æŒ redisåœ¨ubuntuç³»ç»Ÿä¸­çš„å®‰è£…ä¸å¯åŠ¨ å®‰è£…ï¼š1sudo apt-get install redis-server å¸è½½ï¼š1sudo apt-get purge --auto-remove redis-server å¯åŠ¨rediså®‰è£…åï¼Œé»˜è®¤ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š 1ps aux|grep redis å¦‚æœæƒ³è‡ªå·±æ‰‹åŠ¨å¯åŠ¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå¯åŠ¨ï¼š 1sudo service redis-server start åœæ­¢ï¼š1sudo service redis-server stop å¯¹redisçš„æ“ä½œå¯¹redisçš„æ“ä½œå¯ä»¥ç”¨ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ–¹å¼é‡‡ç”¨redis-cliï¼Œç¬¬äºŒç§æ–¹å¼é‡‡ç”¨ç¼–ç¨‹è¯­è¨€ï¼Œæ¯”å¦‚Pythonã€PHPå’ŒJAVAç­‰ã€‚ ä½¿ç”¨redis-cliå¯¹redisè¿›è¡Œå­—ç¬¦ä¸²æ“ä½œï¼šå¯åŠ¨redisï¼š1sudo service redis-server start è¿æ¥ä¸Šredis-serverï¼š1redis-cli -h [ip] -p [ç«¯å£] æ·»åŠ ï¼š123set key value``` å¦‚ï¼š set username xiaotuo` å°†å­—ç¬¦ä¸²å€¼valueå…³è”åˆ°keyã€‚å¦‚æœkeyå·²ç»æŒæœ‰å…¶ä»–å€¼ï¼Œsetå‘½ä»¤å°±è¦†å†™æ—§å€¼ï¼Œæ— è§†å…¶ç±»å‹ã€‚å¹¶ä¸”é»˜è®¤çš„è¿‡æœŸæ—¶é—´æ˜¯æ°¸ä¹…ï¼Œå³æ°¸è¿œä¸ä¼šè¿‡æœŸã€‚ åˆ é™¤ï¼š del key å¦‚ï¼š del usernameè®¾ç½®è¿‡æœŸæ—¶é—´ï¼š expire key timeout(å•ä½ä¸ºç§’)ä¹Ÿå¯ä»¥åœ¨è®¾ç½®å€¼çš„æ—¶å€™ï¼Œä¸€åŒæŒ‡å®šè¿‡æœŸæ—¶é—´ï¼š set key value EX timeout æˆ–ï¼š setex key timeout valueæŸ¥çœ‹è¿‡æœŸæ—¶é—´ï¼š ttl key å¦‚ï¼š ttl usernameæŸ¥çœ‹å½“å‰redisä¸­çš„æ‰€æœ‰keyï¼š keys *åˆ—è¡¨æ“ä½œï¼š åœ¨åˆ—è¡¨å·¦è¾¹æ·»åŠ å…ƒç´ ï¼š lpush key valueå°†å€¼valueæ’å…¥åˆ°åˆ—è¡¨keyçš„è¡¨å¤´ã€‚å¦‚æœkeyä¸å­˜åœ¨ï¼Œä¸€ä¸ªç©ºåˆ—è¡¨ä¼šè¢«åˆ›å»ºå¹¶æ‰§è¡Œlpushæ“ä½œã€‚å½“keyå­˜åœ¨ä½†ä¸æ˜¯åˆ—è¡¨ç±»å‹æ—¶ï¼Œå°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ åœ¨åˆ—è¡¨å³è¾¹æ·»åŠ å…ƒç´ ï¼š rpush key valueå°†å€¼valueæ’å…¥åˆ°åˆ—è¡¨keyçš„è¡¨å°¾ã€‚å¦‚æœkeyä¸å­˜åœ¨ï¼Œä¸€ä¸ªç©ºåˆ—è¡¨ä¼šè¢«åˆ›å»ºå¹¶æ‰§è¡ŒRPUSHæ“ä½œã€‚å½“keyå­˜åœ¨ä½†ä¸æ˜¯åˆ—è¡¨ç±»å‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ æŸ¥çœ‹åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼š lrange key start stopè¿”å›åˆ—è¡¨keyä¸­æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼ŒåŒºé—´ä»¥åç§»é‡startå’ŒstopæŒ‡å®š,å¦‚æœè¦å·¦è¾¹çš„ç¬¬ä¸€ä¸ªåˆ°æœ€åçš„ä¸€ä¸ªlrange key 0 -1ã€‚ ç§»é™¤åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼š ç§»é™¤å¹¶è¿”å›åˆ—è¡¨keyçš„å¤´å…ƒç´ ï¼š lpop keyç§»é™¤å¹¶è¿”å›åˆ—è¡¨çš„å°¾å…ƒç´ ï¼šrpop keyç§»é™¤å¹¶è¿”å›åˆ—è¡¨keyçš„ä¸­é—´å…ƒç´ ï¼š lrem key count valueå°†åˆ é™¤keyè¿™ä¸ªåˆ—è¡¨ä¸­ï¼Œcountä¸ªå€¼ä¸ºvalueçš„å…ƒç´ ã€‚ æŒ‡å®šè¿”å›ç¬¬å‡ ä¸ªå…ƒç´ ï¼š lindex key indexå°†è¿”å›keyè¿™ä¸ªåˆ—è¡¨ä¸­ï¼Œç´¢å¼•ä¸ºindexçš„è¿™ä¸ªå…ƒç´ ã€‚ è·å–åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼š llen key å¦‚ï¼š llen languagesåˆ é™¤æŒ‡å®šçš„å…ƒç´ ï¼š lrem key count value å¦‚ï¼š lrem languages 0 phpæ ¹æ®å‚æ•° count çš„å€¼ï¼Œç§»é™¤åˆ—è¡¨ä¸­ä¸å‚æ•° value ç›¸ç­‰çš„å…ƒç´ ã€‚countçš„å€¼å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ï¼š count &gt; 0ï¼šä»è¡¨å¤´å¼€å§‹å‘è¡¨å°¾æœç´¢ï¼Œç§»é™¤ä¸valueç›¸ç­‰çš„å…ƒç´ ï¼Œæ•°é‡ä¸ºcountã€‚count &lt; 0ï¼šä»è¡¨å°¾å¼€å§‹å‘è¡¨å¤´æœç´¢ï¼Œç§»é™¤ä¸ valueç›¸ç­‰çš„å…ƒç´ ï¼Œæ•°é‡ä¸ºcountçš„ç»å¯¹å€¼ã€‚count = 0ï¼šç§»é™¤è¡¨ä¸­æ‰€æœ‰ä¸value ç›¸ç­‰çš„å€¼ã€‚seté›†åˆçš„æ“ä½œï¼š æ·»åŠ å…ƒç´ ï¼š sadd set value1 value2â€¦. å¦‚ï¼š sadd team xiaotuo datuoæŸ¥çœ‹å…ƒç´ ï¼š smembeers set å¦‚ï¼š smembers teamç§»é™¤å…ƒç´ ï¼š srem set memberâ€¦ å¦‚ï¼š srem team xiaotuo datuoæŸ¥çœ‹é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°ï¼š scard set å¦‚ï¼š scard team1è·å–å¤šä¸ªé›†åˆçš„äº¤é›†ï¼š sinter set1 set2 å¦‚ï¼š sinter team1 team2è·å–å¤šä¸ªé›†åˆçš„å¹¶é›†ï¼š sunion set1 set2 å¦‚ï¼š sunion team1 team2è·å–å¤šä¸ªé›†åˆçš„å·®é›†ï¼šsdiff set1 set2å¦‚ï¼šsdiff team1 team2hashå“ˆå¸Œæ“ä½œï¼š æ·»åŠ ä¸€ä¸ªæ–°å€¼ï¼š hset key field value å¦‚ï¼š hset website baidu baidu.comå°†å“ˆå¸Œè¡¨keyä¸­çš„åŸŸfieldçš„å€¼è®¾ä¸ºvalueã€‚å¦‚æœkeyä¸å­˜åœ¨ï¼Œä¸€ä¸ªæ–°çš„å“ˆå¸Œè¡¨è¢«åˆ›å»ºå¹¶è¿›è¡Œ HSETæ“ä½œã€‚å¦‚æœåŸŸ fieldå·²ç»å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ï¼Œæ—§å€¼å°†è¢«è¦†ç›–ã€‚ è·å–å“ˆå¸Œä¸­çš„fieldå¯¹åº”çš„å€¼ï¼š hget key field å¦‚ï¼š hget website baiduåˆ é™¤fieldä¸­çš„æŸä¸ªfieldï¼š hdel key field å¦‚ï¼š hdel website baiduè·å–æŸä¸ªå“ˆå¸Œä¸­æ‰€æœ‰çš„fieldå’Œvalueï¼š hgetall key å¦‚ï¼š hgetall websiteè·å–æŸä¸ªå“ˆå¸Œä¸­æ‰€æœ‰çš„fieldï¼š hkeys key å¦‚ï¼š hkeys websiteè·å–æŸä¸ªå“ˆå¸Œä¸­æ‰€æœ‰çš„å€¼ï¼š hvals keyå¦‚ï¼šhvals websiteåˆ¤æ–­å“ˆå¸Œä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªfieldï¼š hexists key fieldå¦‚ï¼šhexists website baiduè·å–å“ˆå¸Œä¸­æ€»å…±çš„é”®å€¼å¯¹ï¼š hlen fieldå¦‚ï¼šhlen websiteäº‹åŠ¡æ“ä½œï¼šRedisäº‹åŠ¡å¯ä»¥ä¸€æ¬¡æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œäº‹åŠ¡å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š éš”ç¦»æ“ä½œï¼šäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ã€æŒ‰é¡ºåºåœ°æ‰§è¡Œï¼Œä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ‰“æ‰°ã€‚åŸå­æ“ä½œï¼šäº‹åŠ¡ä¸­çš„å‘½ä»¤è¦ä¹ˆå…¨éƒ¨è¢«æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨éƒ½ä¸æ‰§è¡Œã€‚å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼š multiä»¥åæ‰§è¡Œçš„æ‰€æœ‰å‘½ä»¤ï¼Œéƒ½åœ¨è¿™ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œçš„ã€‚ æ‰§è¡Œäº‹åŠ¡ï¼š execä¼šå°†åœ¨multiå’Œexecä¸­çš„æ“ä½œä¸€å¹¶æäº¤ã€‚ å–æ¶ˆäº‹åŠ¡ï¼š discardä¼šå°†multiåçš„æ‰€æœ‰å‘½ä»¤å–æ¶ˆã€‚ ç›‘è§†ä¸€ä¸ªæˆ–è€…å¤šä¸ªkeyï¼š watch keyâ€¦ç›‘è§†ä¸€ä¸ª(æˆ–å¤šä¸ª)keyï¼Œå¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œä¹‹å‰è¿™ä¸ª(æˆ–è¿™äº›) keyè¢«å…¶ä»–å‘½ä»¤æ‰€æ”¹åŠ¨ï¼Œé‚£ä¹ˆäº‹åŠ¡å°†è¢«æ‰“æ–­ã€‚ å–æ¶ˆæ‰€æœ‰keyçš„ç›‘è§†ï¼š unwatchå‘å¸ƒ/è®¢é˜…æ“ä½œï¼š ç»™æŸä¸ªé¢‘é“å‘å¸ƒæ¶ˆæ¯ï¼š publish channel messageè®¢é˜…æŸä¸ªé¢‘é“çš„æ¶ˆæ¯ï¼š subscribe channelæŒä¹…åŒ–ï¼šredisæä¾›äº†ä¸¤ç§æ•°æ®å¤‡ä»½æ–¹å¼ï¼Œä¸€ç§æ˜¯RDBï¼Œå¦å¤–ä¸€ç§æ˜¯AOFï¼Œä»¥ä¸‹å°†è¯¦ç»†ä»‹ç»è¿™ä¸¤ç§å¤‡ä»½ç­–ç•¥ï¼š | | RDB | AOF | | â€” | â€” | â€” | | å¼€å¯å…³é—­ | å¼€å¯ï¼šé»˜è®¤å¼€å¯ã€‚å…³é—­ï¼šæŠŠé…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰çš„saveéƒ½æ³¨é‡Šï¼Œå°±æ˜¯å…³é—­äº†ã€‚ | å¼€å¯ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­appendonly yeså³å¼€å¯äº†aofï¼Œä¸ºnoå…³é—­ã€‚ | | åŒæ­¥æœºåˆ¶ | å¯ä»¥æŒ‡å®šæŸä¸ªæ—¶é—´å†…å‘ç”Ÿå¤šå°‘ä¸ªå‘½ä»¤è¿›è¡ŒåŒæ­¥ã€‚æ¯”å¦‚1åˆ†é’Ÿå†…å‘ç”Ÿäº†2æ¬¡å‘½ä»¤ï¼Œå°±åšä¸€æ¬¡åŒæ­¥ã€‚ | æ¯ç§’åŒæ­¥æˆ–è€…æ¯æ¬¡å‘ç”Ÿå‘½ä»¤ååŒæ­¥ | | å­˜å‚¨å†…å®¹ | å­˜å‚¨çš„æ˜¯redisé‡Œé¢çš„å…·ä½“çš„å€¼ | å­˜å‚¨çš„æ˜¯æ‰§è¡Œçš„æ›´æ–°æ•°æ®çš„æ“ä½œå‘½ä»¤ | | å­˜å‚¨æ–‡ä»¶çš„è·¯å¾„ | æ ¹æ®dirä»¥åŠdbfilenameæ¥æŒ‡å®šè·¯å¾„å’Œå…·ä½“çš„æ–‡ä»¶å | æ ¹æ®dirä»¥åŠappendfilenameæ¥æŒ‡å®šå…·ä½“çš„è·¯å¾„å’Œæ–‡ä»¶å | | ä¼˜ç‚¹ | ï¼ˆ1ï¼‰å­˜å‚¨æ•°æ®åˆ°æ–‡ä»¶ä¸­ä¼šè¿›è¡Œå‹ç¼©ï¼Œæ–‡ä»¶ä½“ç§¯æ¯”aofå°ã€‚ï¼ˆ2ï¼‰å› ä¸ºå­˜å‚¨çš„æ˜¯rediså…·ä½“çš„å€¼ï¼Œå¹¶ä¸”ä¼šç»è¿‡å‹ç¼©ï¼Œå› æ­¤åœ¨æ¢å¤çš„æ—¶å€™é€Ÿåº¦æ¯”AOFå¿«ã€‚ï¼ˆ3ï¼‰éå¸¸é€‚ç”¨äºå¤‡ä»½ã€‚ | ï¼ˆ1ï¼‰AOFçš„ç­–ç•¥æ˜¯æ¯ç§’é’Ÿæˆ–è€…æ¯æ¬¡å‘ç”Ÿå†™æ“ä½œçš„æ—¶å€™éƒ½ä¼šåŒæ­¥ï¼Œå› æ­¤å³ä½¿æœåŠ¡å™¨æ•…éšœï¼Œæœ€å¤šåªä¼šä¸¢å¤±1ç§’çš„æ•°æ®ã€‚ ï¼ˆ2ï¼‰AOFå­˜å‚¨çš„æ˜¯Rediså‘½ä»¤ï¼Œå¹¶ä¸”æ˜¯ç›´æ¥è¿½åŠ åˆ°aofæ–‡ä»¶åé¢ï¼Œå› æ­¤æ¯æ¬¡å¤‡ä»½çš„æ—¶å€™åªè¦æ·»åŠ æ–°çš„æ•°æ®è¿›å»å°±å¯ä»¥äº†ã€‚ï¼ˆ3ï¼‰å¦‚æœAOFæ–‡ä»¶æ¯”è¾ƒå¤§äº†ï¼Œé‚£ä¹ˆRedisä¼šè¿›è¡Œé‡å†™ï¼Œåªä¿ç•™æœ€å°çš„å‘½ä»¤é›†åˆã€‚ | | ç¼ºç‚¹ | ï¼ˆ1ï¼‰RDBåœ¨å¤šå°‘æ—¶é—´å†…å‘ç”Ÿäº†å¤šå°‘å†™æ“ä½œçš„æ—¶å€™å°±ä¼šå‡ºå‘åŒæ­¥æœºåˆ¶ï¼Œå› ä¸ºé‡‡ç”¨å‹ç¼©æœºåˆ¶ï¼ŒRDBåœ¨åŒæ­¥çš„æ—¶å€™éƒ½é‡æ–°ä¿å­˜æ•´ä¸ªRedisä¸­çš„æ•°æ®ï¼Œå› æ­¤ä½ ä¸€èˆ¬ä¼šè®¾ç½®åœ¨æœ€å°‘5åˆ†é’Ÿæ‰ä¿å­˜ä¸€æ¬¡æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€æ—¦æœåŠ¡å™¨æ•…éšœï¼Œä¼šé€ æˆ5åˆ†é’Ÿçš„æ•°æ®ä¸¢å¤±ã€‚ï¼ˆ2ï¼‰åœ¨æ•°æ®ä¿å­˜è¿›RDBçš„æ—¶å€™ï¼ŒRedisä¼šforkå‡ºä¸€ä¸ªå­è¿›ç¨‹ç”¨æ¥åŒæ­¥ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šéå¸¸è€—æ—¶ã€‚ | ï¼ˆ1ï¼‰AOFæ–‡ä»¶å› ä¸ºæ²¡æœ‰å‹ç¼©ï¼Œå› æ­¤ä½“ç§¯æ¯”RDBå¤§ã€‚ ï¼ˆ2ï¼‰AOFæ˜¯åœ¨æ¯ç§’æˆ–è€…æ¯æ¬¡å†™æ“ä½œéƒ½è¿›è¡Œå¤‡ä»½ï¼Œå› æ­¤å¦‚æœå¹¶å‘é‡æ¯”è¾ƒå¤§ï¼Œæ•ˆç‡å¯èƒ½æœ‰ç‚¹æ…¢ã€‚ï¼ˆ3ï¼‰AOFæ–‡ä»¶å› ä¸ºå­˜å‚¨çš„æ˜¯å‘½ä»¤ï¼Œå› æ­¤åœ¨ç¾éš¾æ¢å¤çš„æ—¶å€™Redisä¼šé‡æ–°è¿è¡ŒAOFä¸­çš„å‘½ä»¤ï¼Œé€Ÿåº¦ä¸åŠRDBã€‚ | | æ›´å¤š | http://redisdoc.com/topic/persistence.html#redis | | å®‰å…¨ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®requirepass passwordï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯è¿æ¥çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨å¯†ç ï¼š redis-cli -p 127.0.0.1 -p 6379 redis&gt; set username xxx (error) NOAUTH Authentication required. redis&gt; auth password redis&gt; set username xxx OKPythonæ“ä½œrediså®‰è£…python-redisï¼š pip install redisæ–°å»ºä¸€ä¸ªæ–‡ä»¶æ¯”å¦‚redis_test.pyï¼Œç„¶ååˆå§‹åŒ–ä¸€ä¸ªrediså®ä¾‹å˜é‡ï¼Œå¹¶ä¸”åœ¨ubuntuè™šæ‹Ÿæœºä¸­å¼€å¯redisã€‚æ¯”å¦‚è™šæ‹Ÿæœºçš„ipåœ°å€ä¸º192.168.174.130ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š ä»redisåŒ…ä¸­å¯¼å…¥Redisç±» from redis import Redis åˆå§‹åŒ–rediså®ä¾‹å˜é‡ xtredis = Redis(host=â€™192.168.174.130â€™,port=6379)å¯¹å­—ç¬¦ä¸²çš„æ“ä½œï¼šæ“ä½œredisçš„æ–¹æ³•åç§°ï¼Œè·Ÿä¹‹å‰ä½¿ç”¨redis-cliä¸€æ ·ï¼Œç°å°±ä¸€äº›å¸¸ç”¨çš„æ¥åšä¸ªç®€å•ä»‹ç»ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹(æ‰¿æ¥ä»¥ä¸Šçš„ä»£ç )ï¼š æ·»åŠ ä¸€ä¸ªå€¼è¿›å»ï¼Œå¹¶ä¸”è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º60ç§’ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œåˆ™æ°¸è¿œä¸ä¼šè¿‡æœŸ xtredis.set(â€˜usernameâ€™,â€™xiaotuoâ€™,ex=60) è·å–ä¸€ä¸ªå€¼ xtredis.get(â€˜usernameâ€™) åˆ é™¤ä¸€ä¸ªå€¼ xtredis.delete(â€˜usernameâ€™) ç»™æŸä¸ªå€¼è‡ªå¢1 xtredis.set(â€˜read_countâ€™,1) xtredis.incr(â€˜read_countâ€™) # è¿™æ—¶å€™read_countå˜ä¸º2 ç»™æŸä¸ªå€¼å‡å°‘1 xtredis.decr(â€˜read_countâ€™) # è¿™æ—¶å€™read_countå˜ä¸º1å¯¹åˆ—è¡¨çš„æ“ä½œï¼šåŒå­—ç¬¦ä¸²æ“ä½œï¼Œæ‰€æœ‰æ–¹æ³•çš„åç§°è·Ÿä½¿ç”¨redis-cliæ“ä½œæ˜¯ä¸€æ ·çš„ï¼š ç»™languagesè¿™ä¸ªåˆ—è¡¨å¾€å·¦è¾¹æ·»åŠ ä¸€ä¸ªpython xtredis.lpush(â€˜languagesâ€™,â€™pythonâ€™) ç»™languagesè¿™ä¸ªåˆ—è¡¨å¾€å·¦è¾¹æ·»åŠ ä¸€ä¸ªphp xtredis.lpush(â€˜languagesâ€™,â€™phpâ€™) ç»™languagesè¿™ä¸ªåˆ—è¡¨å¾€å·¦è¾¹æ·»åŠ ä¸€ä¸ªjavascript xtredis.lpush(â€˜languagesâ€™,â€™javascriptâ€™) è·å–languagesè¿™ä¸ªåˆ—è¡¨ä¸­çš„æ‰€æœ‰å€¼ print xtredis.lrange(â€˜languagesâ€™,0,-1) [â€˜javascriptâ€™,â€™phpâ€™,â€™pythonâ€™]å¯¹é›†åˆçš„æ“ä½œï¼š ç»™é›†åˆteamæ·»åŠ ä¸€ä¸ªå…ƒç´ xiaotuo xtredis.sadd(â€˜teamâ€™,â€™xiaotuoâ€™) ç»™é›†åˆteamæ·»åŠ ä¸€ä¸ªå…ƒç´ datuo xtredis.sadd(â€˜teamâ€™,â€™datuoâ€™) ç»™é›†åˆteamæ·»åŠ ä¸€ä¸ªå…ƒç´ slice xtredis.sadd(â€˜teamâ€™,â€™sliceâ€™) è·å–é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´  xtredis.smembers(â€˜teamâ€™) [â€˜datuoâ€™,â€™xiaotuoâ€™,â€™sliceâ€™] # æ— åºçš„å¯¹å“ˆå¸Œ(hash)çš„æ“ä½œï¼š ç»™websiteè¿™ä¸ªå“ˆå¸Œä¸­æ·»åŠ baidu xtredis.hset(â€˜websiteâ€™,â€™baiduâ€™,â€™baidu.comâ€™) ç»™websiteè¿™ä¸ªå“ˆå¸Œä¸­æ·»åŠ google xtredis.hset(â€˜websiteâ€™,â€™googleâ€™,â€™google.comâ€™) è·å–websiteè¿™ä¸ªå“ˆå¸Œä¸­çš„æ‰€æœ‰å€¼ print xtredis.hgetall(â€˜websiteâ€™) {â€œbaiduâ€:â€baidu.comâ€,â€googleâ€:â€google.comâ€}äº‹åŠ¡(ç®¡é“)æ“ä½œï¼šredisæ”¯æŒäº‹åŠ¡æ“ä½œï¼Œä¹Ÿå³ä¸€äº›æ“ä½œåªæœ‰ç»Ÿä¸€å®Œæˆï¼Œæ‰èƒ½ç®—å®Œæˆã€‚å¦åˆ™éƒ½æ‰§è¡Œå¤±è´¥ï¼Œç”¨pythonæ“ä½œredisä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š å®šä¹‰ä¸€ä¸ªç®¡é“å®ä¾‹ pip = xtredis.pipeline() åšç¬¬ä¸€æ­¥æ“ä½œï¼Œç»™BankAè‡ªå¢é•¿1 pip.incr(â€˜BankAâ€™) åšç¬¬äºŒæ­¥æ“ä½œï¼Œç»™BankBè‡ªå‡å°‘1 pip.desc(â€˜BankBâ€™) æ‰§è¡Œäº‹åŠ¡ pip.execute()ä»¥ä¸Šä¾¿å±•ç¤ºäº†python-redisçš„ä¸€äº›å¸¸ç”¨æ–¹æ³•ï¼Œå¦‚æœæƒ³æ·±å…¥äº†è§£å…¶ä»–çš„æ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒpython-redisçš„æºä»£ç ï¼ˆæŸ¥çœ‹æºä»£ç pycharmå¿«æ·é”®æç¤ºï¼šæŠŠé¼ æ ‡å…‰æ ‡æ”¾åœ¨import Redisçš„Redisä¸Šï¼Œç„¶åæŒ‰ctrl+bå³å¯è¿›å…¥ï¼‰ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"Redis","slug":"Redis","permalink":"http://puguojing.com/tags/Redis/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"memcachedï¼ˆ1ï¼‰- è°ƒè¯•ä½¿ç”¨","slug":"memcachedï¼ˆ1ï¼‰- è°ƒè¯•ä½¿ç”¨","date":"2018-10-12T13:07:03.000Z","updated":"2018-11-06T03:16:38.860Z","comments":true,"path":"2018/10/12/memcachedï¼ˆ1ï¼‰- è°ƒè¯•ä½¿ç”¨/","link":"","permalink":"http://puguojing.com/2018/10/12/memcachedï¼ˆ1ï¼‰- è°ƒè¯•ä½¿ç”¨/","excerpt":"","text":"Mac memcachedçš„è°ƒè¯•1.å®‰è£…ï¼š1brew install memcached 2.å¯åŠ¨ï¼š1memcached -d -p 11211 -u nobody -c 1024 -m 64 1234567-dï¼šè¿™ä¸ªå‚æ•°æ˜¯è®©memcachedåœ¨åå°è¿è¡Œï¼ˆå¯åŠ¨ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼‰ã€‚-mï¼šæŒ‡å®šå ç”¨å¤šå°‘å†…å­˜ã€‚ä»¥Mä¸ºå•ä½ï¼Œé»˜è®¤ä¸º64Mã€‚-uæ˜¯è¿è¡ŒMemcacheçš„ç”¨æˆ·ï¼Œæˆ‘è¿™é‡Œæ˜¯nobody-pï¼šè®¾ç½®Memcacheç›‘å¬çš„ç«¯å£,æœ€å¥½æ˜¯1024ä»¥ä¸Šçš„ç«¯å£ï¼Œé»˜è®¤ç«¯å£æ˜¯11211ã€‚-lï¼šåˆ«çš„æœºå™¨å¯ä»¥é€šè¿‡å“ªä¸ªipåœ°å€è¿æ¥åˆ°æˆ‘è¿™å°æœåŠ¡å™¨ã€‚å¦‚æœæ˜¯é€šè¿‡service memcached startçš„æ–¹å¼ï¼Œé‚£ä¹ˆåªèƒ½é€šè¿‡æœ¬æœºè¿æ¥ã€‚å¦‚æœæƒ³è¦è®©åˆ«çš„æœºå™¨è¿æ¥ï¼Œå°±å¿…é¡»è®¾ç½®-l 0.0.0.0ã€‚-cé€‰é¡¹æ˜¯æœ€å¤§è¿è¡Œçš„å¹¶å‘è¿æ¥æ•°ï¼Œé»˜è®¤æ˜¯1024ï¼ŒæŒ‰ç…§ä½ æœåŠ¡å™¨çš„è´Ÿè½½é‡æ¥è®¾å®š 3.Telnetè¿æ¥1telnet 127.0.0.1 11211 telnetæ“ä½œmemcached:memcachedçš„æ•°æ®æ˜¯ä»¥ key:value æ–¹å¼å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬å¯¹key è¿›è¡Œæ“ä½œï¼Œè€Œvalueä¿å­˜å®é™…çš„å€¼ã€‚ 1.setï¼šæ·»åŠ æˆ–æ›´æ–°æ•°æ®ï¼š123456è¯­æ³•ï¼š set key flas(æ˜¯å¦å‹ç¼©) timeout(å­˜å‚¨çš„æ—¶é—´,0ä»£è¡¨ä¸€ç›´å­˜å‚¨) value_length(valueçš„é•¿åº¦) valueç¤ºä¾‹ï¼š set username 0 60 7 zhiliao æ³¨æ„æŒ‡å®šçš„valueé•¿åº¦å’Œå®é™…è¾“å…¥valueçš„é•¿åº¦å¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™æŒ‰Enteré”®åä¼šå‡ºç°ERROR(å¦‚æœå®é™…çš„valueé•¿åº¦å¤§äºæŒ‡å®šçš„é•¿åº¦)æˆ–è€…ä¸€ç›´ç­‰åˆ°ä½ è¾“å…¥å®ŒæŒ‡å®šçš„å­—ç¬¦æ•°ã€‚ 2.addï¼šæ·»åŠ æ•°æ®123456è¯­æ³•ï¼š add key flas(æ˜¯å¦å‹ç¼©) timeout(å­˜å‚¨çš„æ—¶é—´,0ä»£è¡¨ä¸€ç›´å­˜å‚¨) value_length(valueçš„é•¿åº¦) valueç¤ºä¾‹ï¼š add username 0 60 7 xiaotuo setå’Œaddçš„åŒºåˆ«ï¼šaddæ˜¯åªè´Ÿè´£æ·»åŠ æ•°æ®ï¼Œä¸ä¼šå»ä¿®æ”¹æ•°æ®ã€‚å¦‚æœæ·»åŠ çš„æ•°æ®çš„keyå·²ç»å­˜åœ¨äº†ï¼Œåˆ™æ·»åŠ å¤±è´¥ï¼Œå¦‚æœæ·»åŠ çš„keyä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ æˆåŠŸã€‚è€Œsetä¸åŒï¼Œå¦‚æœmemcachedä¸­ä¸å­˜åœ¨ç›¸åŒçš„keyï¼Œåˆ™è¿›è¡Œæ·»åŠ ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™æ›¿æ¢ã€‚ setã€addæ‰§è¡ŒæˆåŠŸåä¼šæ˜¾ç¤ºï¼šSTOREDï¼Œæœªæ‰§è¡ŒæˆåŠŸä¼šæ˜¾ç¤ºï¼šNOT STORED 3.getï¼šè·å–æ•°æ®1234è¯­æ³•ï¼š get keyç¤ºä¾‹ï¼š get username 4.delete:åˆ é™¤æ•°æ®1234è¯­æ³•ï¼š delete keyç¤ºä¾‹ï¼š delete username 5.flush_allï¼šåˆ é™¤memcachedä¸­çš„æ‰€æœ‰æ•°æ®ã€‚6.incr:ç»™memcachedä¸­æ•°å­—ç±»å‹çš„å€¼è¿›è¡Œç›¸åŠ æ“ä½œï¼Œç›¸åŠ çš„é¡¹å¿…é¡»ä¹Ÿæ˜¯æ•°å­—ç±»å‹ã€‚123456è¯­æ³•ï¼š incr key num(numè¡¨ç¤ºè¦åŠ çš„å€¼ï¼Œå¿…é¡»æ˜¯æ•°å­—)ç¤ºä¾‹ï¼š incr age 2 ç»™keyæ˜¯ageçš„å€¼åŠ ä¸Š2 7.decr:ç»™memcachedä¸­æ•°å­—ç±»å‹çš„å€¼è¿›è¡Œå‡æ“ä½œï¼Œç›¸å‡çš„é¡¹å¿…é¡»ä¹Ÿæ˜¯æ•°å­—ç±»å‹ã€‚12345è¯­æ³•ï¼š decr key num(numè¡¨ç¤ºè¦å‡çš„å€¼ï¼Œå¿…é¡»æ˜¯æ•°å­—)ç¤ºä¾‹ï¼š devr age 2 ç»™keyæ˜¯ageçš„å€¼å‡å»2 8.statsï¼šæŸ¥çœ‹memcachedçš„å½“å‰çŠ¶æ€ï¼Œå¯ä»¥æŸ¥çœ‹è‡ªå·±çš„æ“ä½œè®°å½•å’Œæ­£ç¡®æ‰§è¡Œæ•°æ®ï¼Œä»¥åˆ†æmemcachedçš„å‘½ä¸­ç‡ï¼ˆæ­£ç¡®ç‡ï¼‰12ç¤ºä¾‹ï¼š stats ç»“æœï¼š 123456789101112STAT pid 5286STAT uptime 3741STAT time 1539349048STAT version 1.5.3...STAT cmd_get 9 #è¡¨ç¤ºè¿›è¡Œå®é™…getçš„æ¬¡æ•°STAT cmd_set 16 #è¡¨ç¤ºè¿›è¡Œå®é™…getçš„æ¬¡æ•°STAT cmd_flush 1STAT cmd_touch 0STAT get_hits 7 #è¡¨ç¤ºgetå‘½ä¸­(æœ‰æ•ˆ)çš„æ¬¡æ•°...END å¸¸è§çš„ï¼šSTAT cmd_get 9 è¡¨ç¤ºè¿›è¡Œå®é™…getçš„æ¬¡æ•°STAT cmd_set 16 è¡¨ç¤ºè¿›è¡Œå®é™…setçš„æ¬¡æ•°STAT get_hits 7 è¡¨ç¤ºgetå‘½ä¸­(æœ‰æ•ˆ)çš„æ¬¡æ•°STAT curr_items 4 è¡¨ç¤ºå½“å‰æœ‰å¤šå°‘æ¡æ•°æ® statsä¹‹åä¼šæ˜¾ç¤ºå¾ˆå¤šç»“æœå¸¸ç”¨çš„å°±æ˜¯æŸ¥çœ‹setã€getç­‰æ“ä½œçš„cmd_get/set æ•°é‡å’Œ get_hits æ•°é‡ ç”¨ç±»ä¼¼: get_hits/cmd_get çš„ç»“æœåæ˜ å½“å‰memcachedçš„çŠ¶æ€ï¼Œå¦‚æœå‘½ä¸­ç‡è‰¯å¥½ï¼Œè¯´æ˜memcachedçš„çŠ¶æ€è‰¯å¥½ï¼Œåä¹‹è¯´æ˜memcachedçš„çŠ¶æ€è¾ƒå·®ï¼Œæ¯”å¦‚å¯èƒ½ç¢ç‰‡è¾ƒå¤šã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"memcached","slug":"memcached","permalink":"http://puguojing.com/tags/memcached/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"MySQLä¸­çš„left joinã€right join ä»¥åŠinner joinä¹‹é—´çš„åŒºåˆ«","slug":"Mysqlä¸­çš„å†…è”æ¥ã€å·¦å¤–è”æ¥ã€å³å¤–è”æ¥","date":"2018-10-08T06:29:15.000Z","updated":"2018-11-06T03:17:21.027Z","comments":true,"path":"2018/10/08/Mysqlä¸­çš„å†…è”æ¥ã€å·¦å¤–è”æ¥ã€å³å¤–è”æ¥/","link":"","permalink":"http://puguojing.com/2018/10/08/Mysqlä¸­çš„å†…è”æ¥ã€å·¦å¤–è”æ¥ã€å³å¤–è”æ¥/","excerpt":"","text":"sqlè¯­å¥ä¸­left joinã€right join ä»¥åŠinner joinä¹‹é—´çš„åŒºåˆ«left [outer] join(å·¦è”æ¥)ï¼š è¿”å›åŒ…æ‹¬å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå³è¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è®°å½• ã€‚right [outer] join(å³è”æ¥) ï¼šè¿”å›åŒ…æ‹¬å³è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå·¦è¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è®°å½•ã€‚inner join(ç­‰å€¼è¿æ¥) ï¼šåªè¿”å›ä¸¤ä¸ªè¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è¡Œã€‚ å·¦è”æ¥å’Œå³è”æ¥ç»Ÿç§°ä¸ºå¤–è”æ¥ï¼Œå…¶ä¸­çš„outerå…³é”®å­—å¯ä»¥çœç•¥ã€‚ å·¦è¿æ¥å’Œå³è¿æ¥çš„åŒºåˆ«åœ¨äºä»¥å“ªä¸ªè¡¨ä¸ºä¸»ï¼ˆä¸»è¡¨ä¸­çš„æ•°æ®éƒ½ä¼šå‡ºç°åœ¨è¡¨ä¸­ï¼‰ ä¸¾ä¾‹å¦‚ä¸‹ï¼šè¡¨Aè®°å½•å¦‚ä¸‹ï¼š 123456aID aNum1 a200501112 a200501123 a200501134 a200501145 a20050115 è¡¨Bè®°å½•å¦‚ä¸‹: 123456bID bName1 20060324012 20060324023 20060324034 20060324048 2006032408 - 1.left joinsqlè¯­å¥å¦‚ä¸‹: 123select * from Aleft join B on A.aID = B.bID ç»“æœå¦‚ä¸‹: 123456aID aNum bID bName1 a20050111 1 20060324012 a20050112 2 20060324023 a20050113 3 20060324034 a20050114 4 20060324045 a20050115 NULL NULL ï¼ˆæ‰€å½±å“çš„è¡Œæ•°ä¸º 5 è¡Œï¼‰ç»“æœè¯´æ˜:left joinæ˜¯ä»¥Aè¡¨çš„è®°å½•ä¸ºåŸºç¡€çš„,Aå¯ä»¥çœ‹æˆå·¦è¡¨,Bå¯ä»¥çœ‹æˆå³è¡¨,left joinæ˜¯ä»¥å·¦è¡¨ä¸ºå‡†çš„. æ¢å¥è¯è¯´,å·¦è¡¨(A)çš„è®°å½•å°†ä¼šå…¨éƒ¨è¡¨ç¤ºå‡ºæ¥,è€Œå³è¡¨(B)åªä¼šæ˜¾ç¤ºç¬¦åˆæœç´¢æ¡ä»¶çš„è®°å½•(ä¾‹å­ä¸­ä¸º: A.aID = B.bID).Bè¡¨è®°å½•ä¸è¶³çš„åœ°æ–¹å‡ä¸ºNULL. - 2.right joinsqlè¯­å¥å¦‚ä¸‹: 123select * from Aright join B on A.aID = B.bID ç»“æœå¦‚ä¸‹: 123456aID aNum bID bName1 a20050111 1 20060324012 a20050112 2 20060324023 a20050113 3 20060324034 a20050114 4 2006032404NULL NULL 8 2006032408 ï¼ˆæ‰€å½±å“çš„è¡Œæ•°ä¸º 5 è¡Œï¼‰ç»“æœè¯´æ˜:ä»”ç»†è§‚å¯Ÿä¸€ä¸‹,å°±ä¼šå‘ç°,å’Œleft joinçš„ç»“æœåˆšå¥½ç›¸å,è¿™æ¬¡æ˜¯ä»¥å³è¡¨(B)ä¸ºåŸºç¡€çš„,Aè¡¨ä¸è¶³çš„åœ°æ–¹ç”¨NULLå¡«å……. - 3.inner joinsqlè¯­å¥å¦‚ä¸‹: 123select * from Ainnerjoin B on A.aID = B.bID ç»“æœå¦‚ä¸‹: 12345aID aNum bID bName1 a20050111 1 20060324012 a20050112 2 20060324023 a20050113 3 20060324034 a20050114 4 2006032404 ç»“æœè¯´æ˜:å¾ˆæ˜æ˜¾,è¿™é‡Œåªæ˜¾ç¤ºå‡ºäº† A.aID = B.bIDçš„è®°å½•.è¿™è¯´æ˜inner joinå¹¶ä¸ä»¥è°ä¸ºåŸºç¡€,å®ƒåªæ˜¾ç¤ºç¬¦åˆæ¡ä»¶çš„è®°å½•. - æ³¨:LEFT JOINæ“ä½œç”¨äºåœ¨ä»»ä½•çš„ FROM å­å¥ä¸­ï¼Œç»„åˆæ¥æºè¡¨çš„è®°å½•ã€‚ä½¿ç”¨ LEFT JOIN è¿ç®—æ¥åˆ›å»ºä¸€ä¸ªå·¦è¾¹å¤–éƒ¨è”æ¥ã€‚å·¦è¾¹å¤–éƒ¨è”æ¥å°†åŒ…å«äº†ä»ç¬¬ä¸€ä¸ªï¼ˆå·¦è¾¹ï¼‰å¼€å§‹çš„ä¸¤ä¸ªè¡¨ä¸­çš„å…¨éƒ¨è®°å½•ï¼Œå³ä½¿åœ¨ç¬¬äºŒä¸ªï¼ˆå³è¾¹ï¼‰è¡¨ä¸­å¹¶æ²¡æœ‰ç›¸ç¬¦å€¼çš„è®°å½•ã€‚ è¯­æ³•ï¼šFROM table1 LEFT JOIN table2 ON table1.field1 compopr table2.field2è¯´æ˜ï¼štable1, table2å‚æ•°ç”¨äºæŒ‡å®šè¦å°†è®°å½•ç»„åˆçš„è¡¨çš„åç§°ã€‚ field1, field2å‚æ•°æŒ‡å®šè¢«è”æ¥çš„å­—æ®µçš„åç§°ã€‚ä¸”è¿™äº›å­—æ®µå¿…é¡»æœ‰ç›¸åŒçš„æ•°æ®ç±»å‹åŠåŒ…å«ç›¸åŒç±»å‹çš„æ•°æ®ï¼Œä½†å®ƒä»¬ä¸éœ€è¦æœ‰ç›¸åŒçš„åç§°ã€‚ compoprå‚æ•°æŒ‡å®šå…³ç³»æ¯”è¾ƒè¿ç®—ç¬¦ï¼šâ€=â€ï¼Œ â€œ&lt;â€ï¼Œ â€œ&gt;â€ï¼Œ â€œ&lt;=â€ï¼Œ â€œ&gt;=â€ æˆ– â€œ&lt;&gt;â€ã€‚ å¦‚æœåœ¨INNER JOINæ“ä½œä¸­è¦è”æ¥åŒ…å«Memo æ•°æ®ç±»å‹æˆ– OLE Object æ•°æ®ç±»å‹æ•°æ®çš„å­—æ®µï¼Œå°†ä¼šå‘ç”Ÿé”™è¯¯ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"MySQL","slug":"MySQL","permalink":"http://puguojing.com/tags/MySQL/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"Pycharmè¿æ¥mysqlæ•°æ®åº“","slug":"pycharmè¿æ¥mysqlæ•°æ®åº“","date":"2018-10-07T10:08:57.000Z","updated":"2018-11-06T03:27:52.558Z","comments":true,"path":"2018/10/07/pycharmè¿æ¥mysqlæ•°æ®åº“/","link":"","permalink":"http://puguojing.com/2018/10/07/pycharmè¿æ¥mysqlæ•°æ®åº“/","excerpt":"","text":"1.é¦–å…ˆé€‰æ‹©æ·»åŠ mysqlæ•°æ®åº“ã€‚ 2.å¡«å…¥å¯¹åº”çš„é¢mysqlé…ç½®ä¿¡æ¯ï¼ˆå…¶ä¸­æ•°æ®åº“orm_lookup_demoåº”è¯¥äº‹å…ˆè¢«åˆ›å»ºå¥½ï¼‰ æ­¤æ—¶å¯ä»¥ç‚¹å‡»â€œTest Connectionsâ€æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸï¼Œå¦‚æœè¿æ¥æˆåŠŸä¼šå‡ºç°:â€succesfullyâ€æç¤ºã€‚å¦‚æœâ€œTest Connectionsâ€æŒ‰é’®æ— æ³•ç‚¹å‡»ï¼Œè¯´æ˜æ²¡æœ‰å®‰è£…å¯¹åº”çš„mysql javaé©±åŠ¨ï¼ˆå› ä¸ºpyhcarmä½¿ç”¨javaè¯­è¨€ç¼–å†™ï¼‰ã€‚å¯ä»¥æŒ‰ä¸‹é¢çš„æ­¥éª¤å¿«é€Ÿå®‰è£…ï¼šï¼ˆ1ï¼‰.ç‚¹å‡»â€œTest Connectionsâ€æŒ‰é’®ä¸‹é¢çš„Mysql è·³è½¬åˆ° Driveré…ç½®ç•Œé¢ã€‚ï¼ˆ2ï¼‰.ç‚¹å‡»ä¸‹é¢é€”ä¸­çš„è¿æ¥ä¸‹è½½å®‰è£…ã€‚ï¼ˆ3ï¼‰.é‡æ–°å›åˆ°æ•°æ®åº“è¿æ¥ç•Œé¢å‘ç°å¯ä»¥æ‰§è¡Œâ€œTest Connectionsâ€ã€‚","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://puguojing.com/categories/å·¥å…·/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"MySQL","slug":"MySQL","permalink":"http://puguojing.com/tags/MySQL/"},{"name":"PyCharm","slug":"PyCharm","permalink":"http://puguojing.com/tags/PyCharm/"}],"keywords":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://puguojing.com/categories/å·¥å…·/"}]},{"title":"Mysqlä¸­çš„å¤–é”®","slug":"Mysqlä¸­çš„å¤–é”®","date":"2018-10-06T08:54:06.000Z","updated":"2018-11-06T03:17:33.735Z","comments":true,"path":"2018/10/06/Mysqlä¸­çš„å¤–é”®/","link":"","permalink":"http://puguojing.com/2018/10/06/Mysqlä¸­çš„å¤–é”®/","excerpt":"","text":"mysqlä¸­çš„å¤–é”®foreign keyä¸€ã€å¦‚æœä¸€å¼ è¡¨ä¸­æœ‰ä¸€ä¸ªéä¸»é”®çš„å­—æ®µæŒ‡å‘äº†åˆ«ä¸€å¼ è¡¨ä¸­çš„ä¸»é”®ï¼Œå°±å°†è¯¥å­—æ®µå«åšå¤–é”®ã€‚ ä¸€å¼ è¡¨ä¸­å¯ä»¥æœ‰å¤šä¸ªå¤–é”®ã€‚ å¤–é”®çš„é»˜è®¤ä½œç”¨æœ‰ä¸¤ç‚¹ï¼š 1.å¯¹å­è¡¨(å¤–é”®æ‰€åœ¨çš„è¡¨)çš„ä½œç”¨ï¼šå­è¡¨åœ¨è¿›è¡Œå†™æ“ä½œçš„æ—¶å€™ï¼Œå¦‚æœå¤–é”®å­—æ®µåœ¨çˆ¶è¡¨ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„åŒ¹é…ï¼Œæ“ä½œå°±ä¼šå¤±è´¥ã€‚ 2.å¯¹çˆ¶è¡¨çš„ä½œç”¨ï¼šå¯¹çˆ¶è¡¨çš„ä¸»é”®å­—æ®µè¿›è¡Œåˆ å’Œæ”¹æ—¶ï¼Œå¦‚æœå¯¹åº”çš„ä¸»é”®åœ¨å­è¡¨ä¸­è¢«å¼•ç”¨ï¼Œæ“ä½œå°±ä¼šå¤±è´¥ã€‚ å¤–é”®çš„å®šåˆ¶ä½œç”¨â€”-ä¸‰ç§çº¦æŸæ¨¡å¼ï¼š districtï¼šä¸¥æ ¼æ¨¡å¼(é»˜è®¤), çˆ¶è¡¨ä¸èƒ½åˆ é™¤æˆ–æ›´æ–°ä¸€ä¸ªè¢«å­è¡¨å¼•ç”¨çš„è®°å½•ã€‚ cascadeï¼šçº§è”æ¨¡å¼, çˆ¶è¡¨æ“ä½œåï¼Œå­è¡¨å…³è”çš„æ•°æ®ä¹Ÿè·Ÿç€ä¸€èµ·æ“ä½œã€‚ set nullï¼šç½®ç©ºæ¨¡å¼,å‰æå¤–é”®å­—æ®µå…è®¸ä¸ºNLL, çˆ¶è¡¨æ“ä½œåï¼Œå­è¡¨å¯¹åº”çš„å­—æ®µè¢«ç½®ç©ºã€‚ ä½¿ç”¨å¤–é”®çš„å‰æï¼š 1. è¡¨å‚¨å­˜å¼•æ“å¿…é¡»æ˜¯innodbï¼Œå¦åˆ™åˆ›å»ºçš„å¤–é”®æ— çº¦æŸæ•ˆæœã€‚ 2. å¤–é”®çš„åˆ—ç±»å‹å¿…é¡»ä¸çˆ¶è¡¨çš„ä¸»é”®ç±»å‹å®Œå…¨ä¸€è‡´ã€‚ 3. å¤–é”®çš„åå­—ä¸èƒ½é‡å¤ã€‚ 4. å·²ç»å­˜åœ¨æ•°æ®çš„å­—æ®µè¢«è®¾ä¸ºå¤–é”®æ—¶ï¼Œå¿…é¡»ä¿è¯å­—æ®µä¸­çš„æ•°æ®ä¸çˆ¶è¡¨çš„ä¸»é”®æ•°æ®å¯¹åº”èµ·æ¥ã€‚ äºŒã€æ–°å¢å¤–é”® åœ¨åˆ›å»ºæ—¶å¢åŠ  1234567891011create table my_tab1( id int primary key auto_increment, name varchar(10) not null, class int, foreign key(class) references my_tab2(ä¸»é”®å­—æ®µå); )charset utf8; åœ¨åˆ›å»ºå¥½çš„è¡¨ä¸­å¢åŠ  1alter table my_tab1 add [constraint å¤–é”®å] foreign key(å¤–é”®å­—æ®µå) references mytab2(ä¸»é”®å­—æ®µå); ä¸‰ã€åˆ é™¤å¤–é”®1alter table my_tab drop foreign key å¤–é”®åå­—;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"MySQL","slug":"MySQL","permalink":"http://puguojing.com/tags/MySQL/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"python3 ä¸ Django è¿æ¥æ•°æ®åº“Error loading MySQL db moduleè§£å†³æ–¹æ¡ˆ","slug":"python3 ä¸ Django è¿æ¥æ•°æ®åº“Error loading MySQLdb moduleè§£å†³æ–¹æ¡ˆ","date":"2018-09-30T09:11:41.000Z","updated":"2018-11-06T03:18:35.276Z","comments":true,"path":"2018/09/30/python3 ä¸ Django è¿æ¥æ•°æ®åº“Error loading MySQLdb moduleè§£å†³æ–¹æ¡ˆ/","link":"","permalink":"http://puguojing.com/2018/09/30/python3 ä¸ Django è¿æ¥æ•°æ®åº“Error loading MySQLdb moduleè§£å†³æ–¹æ¡ˆ/","excerpt":"","text":"å­¦ä¹ Djangoæ—¶å€™ï¼Œé‡‡ç”¨MySQLä½œä¸ºåå°æ•°æ®åº“ï¼Œåœ¨æ‰§è¡Œpython3 manage.py startapp appnameåˆ›å»ºappæ—¶é‡åˆ°å¦‚ä¸‹é—®é¢˜: 12django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module.Did you install mysqlclient? å®Œæ•´æŠ¥é”™å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950Traceback (most recent call last): File &quot;/usr/local/lib/python3.6/site-packages/django/db/backends/mysql/base.py&quot;, line 15, in &lt;module&gt; import MySQLdb as DatabaseModuleNotFoundError: No module named &apos;MySQLdb&apos;The above exception was the direct cause of the following exception:Traceback (most recent call last): File &quot;manage.py&quot;, line 15, in &lt;module&gt; execute_from_command_line(sys.argv) File &quot;/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py&quot;, line 381, in execute_from_command_line utility.execute() File &quot;/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py&quot;, line 357, in execute django.setup() File &quot;/usr/local/lib/python3.6/site-packages/django/__init__.py&quot;, line 24, in setup apps.populate(settings.INSTALLED_APPS) File &quot;/usr/local/lib/python3.6/site-packages/django/apps/registry.py&quot;, line 112, in populate app_config.import_models() File &quot;/usr/local/lib/python3.6/site-packages/django/apps/config.py&quot;, line 198, in import_models self.models_module = import_module(models_module_name) File &quot;/usr/local/Cellar/python3/3.6.3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/importlib/__init__.py&quot;, line 126, in import_module return _bootstrap._gcd_import(name[level:], package, level) File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 994, in _gcd_import File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 971, in _find_and_load File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 955, in _find_and_load_unlocked File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 665, in _load_unlocked File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 678, in exec_module File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 219, in _call_with_frames_removed File &quot;/usr/local/lib/python3.6/site-packages/django/contrib/auth/models.py&quot;, line 2, in &lt;module&gt; from django.contrib.auth.base_user import AbstractBaseUser, BaseUserManager File &quot;/usr/local/lib/python3.6/site-packages/django/contrib/auth/base_user.py&quot;, line 47, in &lt;module&gt; class AbstractBaseUser(models.Model): File &quot;/usr/local/lib/python3.6/site-packages/django/db/models/base.py&quot;, line 101, in __new__ new_class.add_to_class(&apos;_meta&apos;, Options(meta, app_label)) File &quot;/usr/local/lib/python3.6/site-packages/django/db/models/base.py&quot;, line 304, in add_to_class value.contribute_to_class(cls, name) File &quot;/usr/local/lib/python3.6/site-packages/django/db/models/options.py&quot;, line 203, in contribute_to_class self.db_table = truncate_name(self.db_table, connection.ops.max_name_length()) File &quot;/usr/local/lib/python3.6/site-packages/django/db/__init__.py&quot;, line 33, in __getattr__ return getattr(connections[DEFAULT_DB_ALIAS], item) File &quot;/usr/local/lib/python3.6/site-packages/django/db/utils.py&quot;, line 202, in __getitem__ backend = load_backend(db[&apos;ENGINE&apos;]) File &quot;/usr/local/lib/python3.6/site-packages/django/db/utils.py&quot;, line 110, in load_backend return import_module(&apos;%s.base&apos; % backend_name) File &quot;/usr/local/Cellar/python3/3.6.3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/importlib/__init__.py&quot;, line 126, in import_module return _bootstrap._gcd_import(name[level:], package, level) File &quot;/usr/local/lib/python3.6/site-packages/django/db/backends/mysql/base.py&quot;, line 20, in &lt;module&gt; ) from errdjango.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module.Did you install mysqlclient? åŸå› åˆ†æï¼šåœ¨ python2 ä¸­ï¼Œä½¿ç”¨ pip install mysql-python è¿›è¡Œå®‰è£…è¿æ¥MySQLçš„åº“ï¼Œä½¿ç”¨æ—¶ import MySQLdb è¿›è¡Œä½¿ç”¨ åœ¨ python3 ä¸­ï¼Œæ”¹å˜äº†è¿æ¥åº“ï¼Œæ”¹ä¸ºäº† pymysql åº“ï¼Œä½†æ˜¯åœ¨ Django ä¸­ï¼Œ è¿æ¥æ•°æ®åº“æ—¶ä½¿ç”¨çš„æ˜¯ MySQLdb åº“ï¼Œè¿™åœ¨ä¸ python3 çš„åˆä½œä¸­å°±ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯äº†ï¼š 1django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: No module named &apos;MySQLdb&apos; ä½¿ç”¨pip install pymysql è¿›è¡Œå®‰è£…ï¼Œç›´æ¥å¯¼å…¥å³å¯ä½¿ç”¨ã€‚ 1. å®‰è£…pymsql1pip install pymysql 2. å®‰è£…å®Œæ¯•ï¼Œæ‰“å¼€é¡¹ç›®çš„init.py,æ·»åŠ ä»£ç 12import pymysql pymysql.install_as_MySQLdb() é‡æ–°æ‰§è¡Œpython3 manage.py startapp appnameåˆ›å»ºappæˆåŠŸã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"MySQL","slug":"MySQL","permalink":"http://puguojing.com/tags/MySQL/"},{"name":"Django","slug":"Django","permalink":"http://puguojing.com/tags/Django/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"è™šæ‹Ÿç¯å¢ƒvirtualenvå’Œvirtualenvwrapperçš„ä½¿ç”¨","slug":"virtualenvå’Œvirtualenvwrapperçš„ä½¿ç”¨","date":"2018-09-29T06:11:44.000Z","updated":"2018-11-06T03:26:19.164Z","comments":true,"path":"2018/09/29/virtualenvå’Œvirtualenvwrapperçš„ä½¿ç”¨/","link":"","permalink":"http://puguojing.com/2018/09/29/virtualenvå’Œvirtualenvwrapperçš„ä½¿ç”¨/","excerpt":"","text":"1.virtualenvè™šæ‹Ÿç¯å¢ƒçš„ä½¿ç”¨1.å®‰è£…è™šæ‹Ÿç¯å¢ƒï¼š1pip install virtualenv 2.åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ1virtualenv [è™šæ‹Ÿç¯å¢ƒçš„åç§°] ä¼šåœ¨å½“å‰è·¯å¾„ä¸­åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹ 3.è¿›å…¥è™šæ‹Ÿç¯å¢ƒ12Windows:cd åˆ°Scriptæ–‡ä»¶å¤¹Linux/Macï¼š source path/è™šæ‹Ÿç¯å¢ƒ/bin/activate 4.é€€å‡ºè™šæ‹Ÿç¯å¢ƒ1deactivate 5.åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„æ—¶å€™æŒ‡å®šPythonè§£é‡Šå™¨ï¼šå½“ç”µè„‘æœ‰å¤šä¸ªPythonç‰ˆæœ¬æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ -p å‚æ•°æ¥æŒ‡å®šPythonè§£é‡Šå™¨ï¼š 1virtualenv -p [Pythonè§£é‡Šå™¨è·¯å¾„] å»ºè®®ä½¿ç”¨ virtualenvwrapperä½¿ç”¨virtualenvæ—¶æ¯ä¸€æ¬¡åˆ›å»ºè™šæ‹Ÿç¯å¢ƒéƒ½ä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹ï¼Œå¦‚æœåˆ›å»ºå¤ªå¤šä¼šå¾ˆæ··ä¹±ï¼Œä½¿ç”¨virtualenvwrapperåªä¼šä¸‹ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªEnvæ–‡ä»¶å¤¹ï¼Œæ‰€æœ‰çš„è™šæ‹Ÿç¯å¢ƒéƒ½æ”¾åœ¨è¿™ä¸ªEnvé‡Œé¢ï¼Œæ‰€ä»¥éå¸¸æ˜“äºç»´æŠ¤ã€‚ 1.å®‰è£…1pip install virtualenvwrapper è¿›è¡Œä¸‹é¢æ­¥éª¤é…ç½®ï¼š1.åˆ›å»ºç›®å½•ç”¨æ¥å­˜æ”¾è™šæ‹Ÿç¯å¢ƒ 1mkdir $HOME/.virtualenvs 2.åœ¨~/.bash_profileä¸­æ·»åŠ è¡Œï¼š 123456#å£°æ˜è™šæ‹Ÿç¯å¢ƒçš„æ–‡ä»¶å¤¹export WORKON_HOME=$HOME/.virtualenvs#å£°æ˜è™šæ‹Ÿç¯å¢ƒä½¿ç”¨çš„pythonç‰ˆæœ¬ï¼ˆå¤špyhtonç‰ˆæœ¬æƒ…å†µï¼Œè¯·å¡«å†™è‡ªå·±çš„pythonç‰ˆæœ¬è§£é‡Šå™¨è·¯å¾„ï¼‰export VIRTUALENVWRAPPER_PYTHON=/usr/bin/local/python3.6 #æ‰§è¡Œè™šæ‹Ÿç¯å¢ƒè„šæœ¬ç”Ÿæ•ˆsource /usr/local/bin/virtualenvwrapper.sh 3.è¿è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ä¿®æ”¹ç”Ÿæ•ˆ: 1source ~/.bash_profile æ‰§è¡Œï¼š 1âœ~ virtualenvwrapper å¦‚æœæç¤ºï¼šnot found commandæˆ–è€…/usr/bin/python: No module named virtualenvwrapperï¼Œè¯´æ˜æœªåœ¨æ­£ç¡®çš„ç‰ˆæœ¬ä¸Šå®‰è£…virtualenvã€‚ 1.åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ1mkvirtualenv [è™šæ‹Ÿç¯å¢ƒåç§°] ä¼šåœ¨å½“å‰ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªEnvæ–‡ä»¶å¤¹ï¼Œç„¶åå°†è™šæ‹Ÿç¯å¢ƒå®‰è£…åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚ 2.åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒ1workon my_env é€€å‡ºå½“å‰è™šæ‹Ÿç¯å¢ƒ1deactivate 3.åˆ é™¤æŸä¸ªè™šæ‹Ÿç¯å¢ƒ1rmvirtualenv my_env 4.åˆ—å‡ºæ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ1lsvirtualenv 5.è¿›å…¥æŸä¸ªè™šæ‹Ÿç¯å¢ƒ1cdvirtualenv my_env","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://puguojing.com/categories/å·¥å…·/"},{"name":"python","slug":"å·¥å…·/python","permalink":"http://puguojing.com/categories/å·¥å…·/python/"}],"tags":[{"name":"virsualenv","slug":"virsualenv","permalink":"http://puguojing.com/tags/virsualenv/"},{"name":"virtualenvwrapper","slug":"virtualenvwrapper","permalink":"http://puguojing.com/tags/virtualenvwrapper/"},{"name":"è™šæ‹Ÿç¯å¢ƒ","slug":"è™šæ‹Ÿç¯å¢ƒ","permalink":"http://puguojing.com/tags/è™šæ‹Ÿç¯å¢ƒ/"}],"keywords":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://puguojing.com/categories/å·¥å…·/"},{"name":"python","slug":"å·¥å…·/python","permalink":"http://puguojing.com/categories/å·¥å…·/python/"}]},{"title":"HTTPåè®®ï¼ˆ1ï¼‰","slug":"HTTPåè®®ï¼ˆ1ï¼‰","date":"2018-09-28T09:30:01.000Z","updated":"2018-11-06T03:14:14.002Z","comments":true,"path":"2018/09/28/HTTPåè®®ï¼ˆ1ï¼‰/","link":"","permalink":"http://puguojing.com/2018/09/28/HTTPåè®®ï¼ˆ1ï¼‰/","excerpt":"","text":"HTTPåŠè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘æµéƒ½å¯ä»¥ä½¿ç”¨HTTPåè®®è¿›è¡Œä¼ è¾“ã€‚ 1.1HTTPåè®®æµç¨‹ è¾“å…¥ç½‘å€å¹¶æŒ‰Enteré”®ï¼Œæ¯”å¦‚è®¿é—®ï¼šhhtp://mysite:8080/app/index.htmlã€‚ æµè§ˆå™¨é€šè¿‡åŸŸåç³»ç»ŸæŸ¥è¯¢mysiteçš„çœŸå®IPï¼Œæ¯”å¦‚ï¼š212.34.98.20ã€‚ å‘æœåŠ¡å™¨çš„8080ç«¯å£å‘èµ·TCPè¯·æ±‚å¹¶å»ºç«‹é“¾æ¥ã€‚ å‘é€HTTPè¯·æ±‚çš„å†…å®¹ï¼ŒåŒ…æ‹¬è®¿é—®çš„åœ°å€/app/index.htmlã€è®¿é—®æ–¹å¼GETã€æµè§ˆå™¨æœ¬èº«çš„äº§å“ç­‰ã€‚ æœåŠ¡å™¨è¿”å›/app/index.htmlä¸­çš„æ•°æ®ï¼Œå¹¶ä½œæ–‡Reponseå‘é€ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœè¯·æ±‚çš„ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ™æœåŠ¡å™¨éœ€è¦æ‰§è¡Œç›¸åº”çš„ä»£ç ï¼ŒåŠ¨æ€ç”Ÿæˆåˆ‡è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ æµè§ˆå™¨æ”¶åˆ°ç»“æœåå…³é—­äºæœåŠ¡å™¨çš„é“¾æ¥ã€‚ æµè§ˆå™¨å°†æ”¶åˆ°çš„ç»“æœå‘ˆç°åœ¨æ˜¾ç¤ºå™¨ä¸Šã€‚ æ³¨æ„:å…¶ä¸­1ã€2ä¸æ˜¯HTTPè§£æçš„ä¸€éƒ¨åˆ†ã€‚ å¦‚ä»Šçš„HTTPè¿˜å…è®¸å®¢æˆ·ç«¯åœ¨ä¸€æ¬¡HTTPè¯·æ±‚ä¹‹åä¸å…³é—­TCPé“¾æ¥ï¼Œä»¥ä¾¿ä¹‹åç¬¬2æ¬¡å‘é€HTTPè¯·æ±‚æ—¶å¤ç”¨è¯¥é“¾æ¥ï¼Œä»¥å‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæ­¤æŠ€æœ¯åœ¨HTTPä¸­å«keep-aliveã€‚ 1.2HTTPæ¶ˆæ¯ç»“æ„1.Requestæ¶ˆæ¯ç»“æ„Requestæ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶çš„è¯·æ±‚ç»“æ„ã€‚ 123456ã€è¯·æ±‚æ–¹æ³•ã€‘ ã€URLã€‘ã€åè®®ç‰ˆæœ¬ã€‘ã€å¤´å­—æ®µ1ã€‘ï¼šå€¼ ...ã€å¤´å­—æ®µNã€‘ï¼šå€¼ã€æ¶ˆæ¯ä½“ã€‘ Requestæ¶ˆæ¯ç»“æ„ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ã€‚æ¶ˆæ¯å¤´å¿…é¡»éµå¾ªä¸Šè¿°æ ¼å¼ï¼Œæ¶ˆæ¯ä½“åˆ™æ²¡æœ‰å›ºå®šæ ¼å¼ã€‚æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ä¹‹é—´ä½¿ç”¨ä¸€è¡Œç©ºæ ¼ã€‚ 123GET /hello.txt HTTP/1.1Host:www.mysite.comAccept-Languange:en ä¸Šé¢å°±æ˜¯ä¸€ä¸ªè¯·æ±‚å¤´ç»“æ„ã€‚ 1.Reponseæ¶ˆæ¯ç»“æ„","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"}],"tags":[{"name":"HTTPåè®®","slug":"HTTPåè®®","permalink":"http://puguojing.com/tags/HTTPåè®®/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"}]},{"title":"pythonç”Ÿæˆå™¨è¯¦è§£","slug":"Pythonç”Ÿæˆå™¨è¯¦è§£","date":"2018-09-15T14:41:56.000Z","updated":"2018-11-06T03:19:48.855Z","comments":true,"path":"2018/09/15/Pythonç”Ÿæˆå™¨è¯¦è§£/","link":"","permalink":"http://puguojing.com/2018/09/15/Pythonç”Ÿæˆå™¨è¯¦è§£/","excerpt":"","text":"å‚è€ƒï¼š å»–é›ªå³°å®˜ç½‘Pythonæ•™ç¨‹-ç”Ÿæˆå™¨ Pythonç”Ÿæˆå™¨generatorä¹‹nextå’Œsendè¿è¡Œæµç¨‹","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://puguojing.com/tags/python/"},{"name":"ç”Ÿæˆå™¨","slug":"ç”Ÿæˆå™¨","permalink":"http://puguojing.com/tags/ç”Ÿæˆå™¨/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}]},{"title":"Pythonå¤šçº¿ç¨‹ï¼ˆ2ï¼‰","slug":"Pythonå¤šçº¿ç¨‹ï¼ˆ2ï¼‰","date":"2018-09-09T15:11:06.000Z","updated":"2018-11-06T03:18:53.931Z","comments":true,"path":"2018/09/09/Pythonå¤šçº¿ç¨‹ï¼ˆ2ï¼‰/","link":"","permalink":"http://puguojing.com/2018/09/09/Pythonå¤šçº¿ç¨‹ï¼ˆ2ï¼‰/","excerpt":"","text":"Lockã€BoundedSemaphoreï¼ˆå’ŒSemaphoreç±»ä¼¼ï¼Œä¸è¿‡ä¸å…è®¸è¶…è¿‡åˆå§‹å€¼ï¼‰çš„ä½¿ç”¨ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263#!/usr/bin/python3# -*- coding:utf-8 -*-from atexit import registerfrom random import randrangefrom threading import BoundedSemaphore,Lock,Threadfrom time import sleep,ctimelock = Lock()MAX = 5candytray = BoundedSemaphore(MAX)def producer(loops): print(&apos;producer loops:&apos;,loops) lock.acquire() for i in range(loops): try: candytray.release()#realseåSemaphoreä¼šå¢å¤šç›¸å½“äºäº§ç”Ÿ except ValueError: print(&apos;release fail all Semaphore &apos;) else: print(&apos;release(produce) ok&apos;) sleep(randrange(3)) lock.release()def consumer(loops): print(&apos;consumer loops:&apos;, loops) lock.acquire() for i in range(loops): if candytray.acquire(False):#acquireå Semaphoreä¼šå‡å°‘ print(&apos;acquire(consumer) ok&apos;) else: print(&apos;acquire fail empty&apos;) sleep(randrange(3)) lock.release()def main(): n=randrange(2,6) Thread(target=consumer,args=(randrange(n,n+MAX+2),)).start() Thread(target=producer, args=(n,)).start()@registerdef _atexit(): print(&apos;DONE :&apos;,ctime())if __name__ == &apos;__main__&apos;: main()","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"çº¿ç¨‹","slug":"çº¿ç¨‹","permalink":"http://puguojing.com/tags/çº¿ç¨‹/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}]},{"title":"Pythonå¤šçº¿ç¨‹ï¼ˆ1ï¼‰","slug":"Pythonå¤šçº¿ç¨‹ï¼ˆ1ï¼‰","date":"2018-09-09T14:11:06.000Z","updated":"2018-11-06T03:18:42.285Z","comments":true,"path":"2018/09/09/Pythonå¤šçº¿ç¨‹ï¼ˆ1ï¼‰/","link":"","permalink":"http://puguojing.com/2018/09/09/Pythonå¤šçº¿ç¨‹ï¼ˆ1ï¼‰/","excerpt":"","text":"&#8195;&#8195; 1.è¿›ç¨‹&#8195;&#8195;è®¡ç®—æœºç¨‹åºçŸ¥è¯†å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„å¯æ‰§è¡ŒäºŒè¿›åˆ¶ï¼ˆæˆ–å…¶ä»–ç±»å‹ï¼‰æ–‡ä»¶ï¼Œåªæœ‰æŠŠä»–ä»¬åŠ è½½åˆ°å†…å­˜ä¸­å¹¶è¢«æ“ä½œç³»ç»Ÿè°ƒç”¨ï¼Œæ‰æ‹¥æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œè¿›ç¨‹æ˜¯ä¸€ä¸ªæ‰§è¡Œä¸­çš„ç¨‹åºï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´ã€å†…å­˜ã€æ•°æ®æ ˆä»¥åŠå…¶ä»–ç”¨äºè·Ÿè¸ªçš„è¾…åŠ©æ•°æ®ã€‚ç”±äºè¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œæ‰€ä»¥åªèƒ½é‡‡ç”¨è¿›ç¨‹é—´é€šä¿¡(IPC)çš„æ–¹å¼å…±äº«ä¿¡æ¯ã€‚ 2.çº¿ç¨‹&#8195;&#8195;çº¿ç¨‹ä¸è¿›ç¨‹ç±»ä¼¼ï¼Œä¸è¿‡ä»–æ˜¯åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸‹æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å…±äº«ä¸Šä¸‹æ–‡ã€‚ 3.å…¨å±€è§£é‡Šé”(GIL)&#8195;&#8195;Pythonä»£ç çš„æ‰§è¡Œæ˜¯ç”±Pythonè§£é‡Šå™¨ï¼ˆè§£é‡Šå™¨ä¸»å¾ªç¯ï¼‰è¿›è¡Œæ§åˆ¶çš„ï¼Œåœ¨ä¸»å¾ªç¯ä¸­åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œï¼Œå°±åƒå•æ ¸CPUçš„å¤šè¿›ç¨‹ä¸€æ ·ã€‚å°½ç®¡Pythonè§£é‡Šå™¨å¯ä»¥è¿è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯åœ¨ä»»æ„ç»™å®šçš„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šè¢«è§£é‡Šå™¨è°ƒç”¨ã€‚Pythonè§£é‡Šå™¨å°†æŒ‰ç…§ä¸‹é¢çš„è¿‡ç¨‹æ‰§è¡Œï¼š1.è®¾ç½®GILã€‚2.åˆ‡æ¢é‡‘ä¸€ä¸ªçº¿ç¨‹å»è¿è¡Œã€‚3.æ‰§è¡Œä¸‹é¢çš„æ“ä½œä¹‹ä¸€ ï¼š &#8195;&#8195;a.æŒ‡å®šæ•°é‡çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚ &#8195;&#8195;b.çº¿ç¨‹ä¸»åŠ¨è®©å‡ºæ§åˆ¶æƒï¼ˆå¯ä»¥è°ƒç”¨time.sleep(0)æ¥å®Œæˆã€‚4.æŠŠçº¿ç¨‹åˆ‡æ¢å›ç¡çœ çŠ¶æ€ï¼ˆåˆ‡æ¢å‡ºçº¿ç¨‹ã€‚5.è§£é”GILã€‚6.é‡å¤ä¸Šè¿°æ­¥éª¤ã€‚ &#8195;&#8195;åœ¨å½“è°ƒç”¨å¤–éƒ¨ä»£ç ï¼ˆå³ä»»æ„C/C++æ‰©å±•Dé¢å†…ç½®å‡½æ•°ï¼‰æ—¶ï¼ŒGILä¼šä¿æŒé”å®šï¼Œç›´è‡³å‡½æ•°æ‰§è¡Œç»“æŸ(å› ä¸ºåœ¨è¿™æœŸé—´æ²¡æœ‰Pythonå­—èŠ‚ç è®¡æ•°ï¼‰ã€‚ç¼–å†™æ‰©å±•å‡½æ•°çš„ç¨‹åºå‘˜æœ‰èƒ½åŠ›è§£é”GILã€‚ç„¶è€Œï¼Œä½œä¸ºPythonå¼€å‘è€…ï¼Œä½ å¹¶ä¸éœ€è¦æ‹…å¿ƒPyhonä»£ç ä¼šåœ¨è¿™äº›æƒ…å†µä¸‹è¢«é”ä½ã€‚ &#8195;&#8195;ä¾‹å¦‚ï¼Œå¯¹äºä»»æ„é¢å‘I/Oçš„Pythonä¾‹ç¨‹(è°ƒç”¨äº†å†…ç½®æ“ä½œç³»ç»Ÿçš„Cä»£ç é‚£ç§)GILä¼šåœ¨I/Oè°ƒç”¨å‰è¢«é‡Šæ”¾ï¼Œä»¥å…è®¸å…¶ä»–çº¿ç¨‹åœ¨I/Oæ‰§è¡Œçš„æ—¶å€™è¿è¡Œã€‚è€Œå¯¹é‚£äº›æ²¡æœ‰å¤ªå¤šI/Oæ“ä½œçš„ä»£ç è€Œè¨€ï¼Œæ›´åŠ å€¾å‘äºåœ¨è¯¥çº¿ç¨‹æ•´ä¸ªæ—¶é—´ç‰‡å†…å§‹ç»ˆå æœ‰å¤„ç†å™¨ã€‚æ¢å¥è¯è¯´å°±æ˜¯ï¼ŒI/Oå¯†é›†å‹çš„Pythonç¨‹åºè¦æ¯”è®¡ç®—å¯†é›†å‹çš„ä»£ç èƒ½å¤Ÿæ›´å¥½çš„åˆ©ç”¨å¤šçº¿ç¨‹ç¯å¢ƒã€‚ &#8195;&#8195;å…³äºè§£é‡Šå™¨ä¸»å¾ªç¯å’ŒGILå¯ä»¥æ‰çœ‹æºç Python/ceval.c 4.åœ¨Pythonä¸­ä½¿ç”¨çº¿ç¨‹&#8195;&#8195;Pythonæä¾›äº†å¤šä¸ªæ¨¡å—æ¥æ”¯æŒå¤šçº¿ç¨‹ç¼–ç¨‹ï¼ŒåŒ…æ‹¬threadã€threadingï¼Œqueueæ¨¡å—ç­‰ã€‚threadæä¾›äº†åŸºæœ¬çš„çº¿ç¨‹å’Œé”å®šæ”¯æŒã€‚threadingæ¨¡å—æä¾›äº†æ›´é«˜çº§åˆ«åŠŸèƒ½ï¼Œæ›´å…¨é¢é¢çš„çº¿ç¨‹ç®¡ç†ã€‚queueæ¨¡å—ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—æ•°æ®ç»“æ„ï¼Œç”¨äºåœ¨å¤šçº¿ç¨‹ä¹‹é—´è¿›è¡Œå…±äº«ã€‚ æ¨èä½¿ç”¨æ›´é«˜çº§åˆ«çš„é”å®šæ¨¡å—threadingï¼Œè€Œä¸æ˜¯ä½¿ç”¨threadæ¨¡å—ã€‚ 1.ä¸€ä¸ªåŸå› æ˜¯ä½çº§åˆ«çš„threadæ¨¡å—å…¥çš„åŒæ­¥åŸè¯­å¾ˆå°‘åªæœ‰Lockï¼Œè€Œthreadingæ¨¡å—æ‹¥æœ‰Lock,Semephoreã€Conditionã€Eventç­‰å¤šç§åŒæ­¥æœºåˆ¶ã€‚2.å¦ä¸€ä¸ªåŸå› æ˜¯threadå¯¹äºè¿›ç¨‹ä½•æ—¶é€€å‡ºæ²¡æœ‰æ§åˆ¶ï¼Œå½“ä¸»çº¿ç¨‹ç»“æŸæ—¶ï¼Œæ‰€æœ‰å…¶ä»–çº¿ç¨‹ä¹Ÿéƒ½å¼ºåˆ¶ç»“æŸï¼Œä¸ä¼šå‘å‡ºè­¦å‘Šæˆ–è€…è¿›è¡Œé€‚å½“çš„æ¸…ç†ï¼Œæ‰€ä»¥ä»–ä¹Ÿä¸æ”¯æŒå®ˆæŠ¤çº¿ç¨‹ã€‚ å®ˆæŠ¤çº¿ç¨‹ &#8195;&#8195;å®ˆæŠ¤çº¿ç¨‹ä¸€èˆ¬æ˜¯ä¸€ä¸ªç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡çš„æœåŠ¡å™¨ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è¯·æ±‚å®ˆæŠ¤çº¿ç¨‹å°±æ˜¯ç©ºé—²çš„.å¦‚æœæŠŠä¸€ä¸ªçº¿ç¨‹ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªçº¿ç¨‹æ˜¯ä¸é‡è¦çš„ã€‚è¿›ç¨‹é€€å‡ºæ—¶ä¸éœ€è¦ç­‰å¾…è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆã€‚ &#8195;&#8195;å¦‚æœä¸»çº¿ç¨‹å‡†å¤‡é€€å‡ºæ—¶ä¸éœ€è¦ç­‰å¾…æŸäº›å­çº¿ç¨‹å®Œæˆï¼Œå°±å¯ä»¥ä¸ºè¿™äº›å­çº¿ç¨‹è®¾ç½®å®ˆæŠ¤çº¿ç¨‹æ ‡è®°ã€‚è¯¥æ ‡è®°å€¼ä¸ºçœŸæ—¶ï¼Œè¡¨ç¤ºçº¿ç¨‹æ˜¯ä¸é‡è¦çš„ï¼Œæˆ–è€…è¯´çº¿ç¨‹åªæ˜¯ç”¨æ¥ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚è€Œä¸åšä»»ä½•å…¶ä»–äº‹æƒ…ã€‚è®¾ç½®ä¸€ä¸ªçº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹éœ€è¦åœ¨å¯åŠ¨çº¿ç¨‹ä¹‹å‰æ‰§è¡Œå¦‚ä¸‹èµ‹å€¼è¯­å¥ï¼šthread.daemon = True 5.threaingæ¨¡å—ä¸‹çš„Threadç±» å±æ€§ æè¿° Threadå¯¹è±¡çš„æ•°æ®å±æ€§ Name çº¿ç¨‹å Ident çº¿ç¨‹æ ‡å¿—ç¬¦ Daemon å®ˆæŠ¤çº¿ç¨‹æ ‡å¿— Threadå¯¹è±¡æ–¹æ³• init(group=NONE,target=None,name=None, args=(),kwargs{},verbose=None,daemon=None) å®ä¾‹åŒ–ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œéœ€è¦æœ‰ä¸€ä¸ªå¯è°ƒç”¨çš„targetï¼Œä»¥åŠå…¶å‚æ•°argsæˆ–kwargsï¼Œè¿˜å¯ä»¥ä¼ é€’nameæˆ–groupå‚æ•°ï¼Œdaemonä¼šè®¾ç½®thread.daemonå±æ€§æ ‡å¿— Start() å¼€å§‹æ‰§è¡Œçº¿ç¨‹ run() å®šä¹‰çº¿ç¨‹åŠŸèƒ½çš„æ–¹æ³•ï¼ˆé€šå¸¸åœ¨å­ç±»ä¸­è¿›è¡Œé‡å†™ï¼‰ jion() ç›´è‡³å¯åŠ¨çš„çº¿ç¨‹ç»ˆæ­¢ä¹‹å‰ä¸€ç›´æŒ‚èµ·ã€‚é™¤éç»™å‡ºäº†timeoutã€‚å¦åˆ™ä¼šä¸€ç›´é˜»å¡ã€‚ ä»£ç æ¡ˆä¾‹ä¸€ï¼Œåˆ›å»ºThreadå®ä¾‹ä¼ ç»™ä»–ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°ï¼š 1234567891011121314151617181920212223242526272829303132#!/usr/bin/python3# -*- coding:utf-8 -*-import threadingfrom time import sleep,ctimeloops_time = [4,2]def loop(nloop,nsec): print(&apos;start loop :&apos;,nloop,&apos;at:&apos;,ctime()) sleep(nsec) print(&apos;end loop :&apos;, nloop, &apos;at:&apos;, ctime())def main(): print(&apos;starting at----------------- :&apos;,ctime()) test_thresds = [] for i in range(len(loops_time)): t = threading.Thread(target=loop,args=(i,loops_time[i])) test_thresds.append(t) for i in range(len(loops_time)): test_thresds[i].start() for i in range(len(loops_time)): test_thresds[i].join() print(&apos;end at :-------------------&apos;, ctime())if __name__ == &apos;__main__&apos;: main() ä»£ç æ¡ˆä¾‹äºŒï¼šåˆ›å»ºThreadå®ä¾‹ä¼ ç»™ä»–ä¸€ä¸ªå¯è°ƒç”¨çš„ç±»å®ä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#!/usr/bin/python3# -*- coding:utf-8 -*-import threadingfrom time import sleep,ctimeloops_time = [4,2]class ThreadFunc(object): def __init__(self,func,args,name=&apos;&apos;): self.name = name self.args = args self.func = func def __call__(self, *args, **kwargs): self.func(*self.args)def loop(nloop,nsec): print(&apos;start loop :&apos;,nloop,&apos;at:&apos;,ctime()) sleep(nsec) print(&apos;end loop :&apos;, nloop, &apos;at:&apos;, ctime())def main(): print(&apos;starting at----------------- :&apos;,ctime()) test_thresds = [] for i in range(len(loops_time)): t = threading.Thread(target=ThreadFunc(loop,args=(i,loops_time[i]),name=loop.__name__)) test_thresds.append(t) for i in range(len(loops_time)): test_thresds[i].start() for i in range(len(loops_time)): test_thresds[i].join() print(&apos;end at :-------------------&apos;, ctime())if __name__ == &apos;__main__&apos;: main() ä»£ç æ¡ˆä¾‹ä¸‰ï¼Œæ´¾ç”ŸThreadå­ç±»ï¼Œå¹¶åˆ›å»ºå­ç±»å®ä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#!/usr/bin/python3# -*- coding:utf-8 -*-import threadingfrom time import sleep,ctimeloops_time = [4,2]class MyThread(threading.Thread): def __init__(self,func,args,name=&apos;&apos;): threading.Thread.__init__(self) self.name = name self.args = args self.func = func def getResult(self): return self.res def run(self): self.res = self.func(*self.args)def loop(nloop,nsec): print(&apos;start loop :&apos;,nloop,&apos;at:&apos;,ctime()) sleep(nsec) print(&apos;end loop :&apos;, nloop, &apos;at:&apos;, ctime())def main(): print(&apos;starting at----------------- :&apos;,ctime()) test_thresds = [] for i in range(len(loops_time)): t = MyThread(func=loop,args=(i,loops_time[i]),name=loop.__name__) test_thresds.append(t) for i in range(len(loops_time)): test_thresds[i].start() print(threading.enumerate()) # å½“å‰æ´»åŠ¨çš„Threadå¯¹è±¡åˆ—è¡¨ for i in range(len(loops_time)): test_thresds[i].join() print(&apos;end at :-------------------&apos;, ctime())if __name__ == &apos;__main__&apos;: main()","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"çº¿ç¨‹","slug":"çº¿ç¨‹","permalink":"http://puguojing.com/tags/çº¿ç¨‹/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}]},{"title":"é¡¹ç›®-learning-logï¼ˆ3ï¼‰","slug":"é¡¹ç›®-learning-logï¼ˆ3ï¼‰","date":"2018-09-09T14:11:06.000Z","updated":"2018-11-06T03:16:26.191Z","comments":true,"path":"2018/09/09/é¡¹ç›®-learning-logï¼ˆ3ï¼‰/","link":"","permalink":"http://puguojing.com/2018/09/09/é¡¹ç›®-learning-logï¼ˆ3ï¼‰/","excerpt":"","text":"1. å‰è¨€â€“åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†ï¼šÂ·ä½¿ç”¨Bootstrapåº“è®¾ç½®æ ·å¼ï¼›Â·æŠŠé¡¹ç›®éƒ¨ç½²åˆ°Herokuä¸Šã€‚ 2. è®¾ç½®é¡¹ç›®â€œå­¦ä¹ ç¬”è®°â€çš„æ ·å¼â€“ ä¹‹å‰å…³æ³¨çš„éƒ½æ˜¯é¡¹ç›®çš„åŠŸèƒ½ï¼Œç°åœ¨æ¥ä¸ºé¡¹ç›®æ·»åŠ æ ·å¼ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨django-bootstrap3æ¥è®¾ç½®æ ·å¼ã€‚é¦–å…ˆè¯·åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…è¿™ä¸ªç¬¬ä¸‰æ–¹åº“ã€‚ 1pip install django-bootstrap3 ç„¶ååƒä¹‹å‰åœ¨é¡¹ç›®settings.pyä¸­æ³¨å†Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„APPä¸€æ ·ï¼Œæ³¨å†Œbootstrap3è¿™ä¸ªåº”ç”¨ç¨‹åºã€‚ è¿˜éœ€è¦åŒ…å«django-bootstrap3åŒ…å«jQueryï¼Œåœ¨settings.pyæœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 1234567...LOGIN_URL = &apos;/users/login/&apos;# django-bootstrap3çš„è®¾ç½®BOOTSTRAP3 = &#123; &quot;include_jquery&quot;: True,&#125; 2.1-2.2å‚çœ‹åŸæ–‡é“¾æ¥ 2.3 è®¾ç½®ç™»å½•é¡µé¢æ ·å¼â€“æ­¤å¤„ä¸æ–‡ä¸­ä¸åŒï¼Œæˆ‘çš„login.htmlä¸­çš„formæ— æ³•é€šè¿‡% bootstrap_form form %}å¼•ç”¨Bootstrapçš„æ ·å¼.å› æ­¤æˆ‘çš„login.htmlå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;ç™»å½•&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&#123;% extends &quot;learning_logs/base.html&quot; %&#125;&#123;% load bootstrap3 %&#125;&#123;% block header %&#125; &lt;h2&gt;ç™»å½•æ‚¨çš„è´¦æˆ·&lt;/h2&gt;&#123;% endblock %&#125;&#123;% block content %&#125; &lt;form action=&quot;&#123;% url &apos;users:login&apos; %&#125;&quot; method=&quot;post&quot; class=&quot;form-signin&quot;&gt; &#123;% csrf_token %&#125; &lt;h2 class=&quot;form-signin-heading&quot;&gt;è¯·ç™»å½•&lt;/h2&gt; &lt;input type=&quot;text&quot; id=&quot;username&quot; name=&quot;username&quot; value=&quot;&#123;&#123; username &#125;&#125;&quot; class=&quot;form-control&quot; placeholder=&quot;ç”¨æˆ·å&quot; required autofocus&gt; &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; value=&quot;&#123;&#123; password &#125;&#125;&quot; class=&quot;form-control&quot; placeholder=&quot;å¯†ç &quot; required&gt; &lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot; value=&quot;remember-me&quot;&gt; Remember me &lt;/label&gt; &lt;/div&gt; &lt;button class=&quot;btn btn-lg btn-primary btn-block&quot; type=&quot;submit&quot;&gt;ç™»å½•&lt;/button&gt; &lt;/form&gt;&#123;% endblock %&#125;&lt;/body&gt;&lt;/html&gt; 2.4-2.6å‚çœ‹åŸæ–‡é“¾æ¥ 3. éƒ¨ç½²â€œå­¦ä¹ ç¬”è®°â€â€“3.1-3.2å‚çœ‹åŸæ–‡é“¾æ¥ 3.3 ä¸ºéƒ¨ç½²åˆ°Herokuè€Œä¿®æ”¹settings.pyâ€“æ­¤å¤„setting.pyä¸­çš„ä¸æ–‡ä¸­ä¸åŒï¼Œæ–‡ä¸­å¦‚ä¸‹: 1234567891011121314151617181920212223-- snip --# ä¹¦ä¸­çš„åˆ¤æ–­è¯­å¥æ˜¯ if os.getcwd() == &apos;/app&apos;: # ç°åœ¨ä¼°è®¡æ˜¯Herokuå‡çº§äº†ï¼Œæ”¹ä¸ºäº†ä¸‹é¢çš„è¯­å¥ï¼Œå¦åˆ™å¾…ä¼šå„¿éƒ¨ç½²çš„æ—¶å€™ä¼šå‡ºé”™if os.environ[&apos;HOME&apos;] == &quot;/app&quot;: import dj_database_url DATABASES = &#123; &quot;default&quot;: dj_database_url.config(default=&quot;postgres://localhost&quot;) &#125; # è®©request.is_secure()æ‰¿è®¤X-Forwarded-Protoå¤´ SECURE_PROXY_HEADER = (&quot;HTTP_X_FORWARDED_PROTO&quot;, &quot;https&quot;) # æ”¯æŒæ‰€æœ‰çš„ä¸»æœºå¤´ï¼ˆhost headerï¼‰ ALLOWED_HOSTS = [&quot;*&quot;] # é™æ€èµ„äº§é…ç½® BASE_DIR = os.path.dirname(os.path.abspath(__file__)) # ä¹¦ä¸­è®¾ç½®æ˜¯è¿™æ ·çš„ï¼š STATIC_ROOT = &quot;staticfiles&quot; STATIC_ROOT = os.path.join(BASE_DIR, &apos;static&apos;) STATICFILES_DIRS = ( os.path.join(BASE_DIR, &quot;static&quot;), ) æŒ‰ç…§æ­¤ç§æ–¹å¼è®¾ç½®æŠ¥é”™ï¼Œæç¤ºSTATICFILES_DIRS çš„STATIC_ROOTä¸æ­£ç¡®ã€‚ 1?: (staticfiles.E002) The STATICFILES_DIRS setting should not contain the STATIC_ROOT setting. ä¿®æ”¹ä¸º: 1234567891011... # é™æ€èµ„äº§é…ç½® BASE_DIR = os.path.dirname(os.path.abspath(__file__)) STATIC_ROOT = &quot;staticfiles&quot;#ä¹¦ä¸­è®¾ç½®æ˜¯è¿™æ ·çš„ï¼š STATIC_URL = &apos;/static/&apos; #STATIC_ROOT = os.path.join(BASE_DIR, &apos;/static/&apos;)#é”™è¯¯ #STATIC_ROOT = os.path.join(BASE_DIR, &quot;static/&quot;) # é”™è¯¯(staticfiles.E002) The STATICFILES_DIRS setting should not contain the STATIC_ROOT setting. STATICFILES_DIRS = ( os.path.join(BASE_DIR, &quot;static&quot;), ) æœ€ç»ˆæ‰§è¡ŒæˆåŠŸã€‚ 3.4 åˆ›å»ºå¯åŠ¨è¿›ç¨‹çš„Procfileâ€“ Procfileå‘Šè¯‰Herokuå¯åŠ¨é‚£äº›è¿›ç¨‹ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ­£ç¡®åœ°æä¾›é¡¹ç›®æ”¯æŒçš„æœåŠ¡ã€‚è¿™ä¸ªæ–‡ä»¶åªåŒ…å«ä¸€è¡Œï¼Œæ–‡ä»¶åä¸ºProcfileï¼Œä¸å¸¦æ‰©å±•åï¼Œä¿å­˜åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚ 1web: gunicorn learning_log.wsgi --log-file - è¿™æ®µä»£ç è®©Herokuå°†gunicornç”¨è¿‡æœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨learning_log/wsgi.pyä¸­çš„è®¾ç½®æ¥å¯åŠ¨åº”ç”¨ç¨‹åºã€‚æ ‡å¿—log-fileå‘Šè¯‰Herokuåº”å°†å“ªäº›ç±»å‹çš„æ—¶é—´å†™å…¥æ—¥å¿—ã€‚æ³¨æ„æœ€åçš„â€œ-â€ä¸èƒ½çœç•¥ 3.14 éƒ¨ç½²æ€»ç»“â€“ä»å‰é¢è¿™äº›ä¾‹å­å¯çœ‹å‡ºï¼Œå¼€å‘ä¸éƒ¨ç½²çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š â‘ ä¿®æ”¹é¡¹ç›®ã€‚å¦‚æœåˆ›å»ºäº†æ–°æ–‡ä»¶ï¼Œä½¿ç”¨å‘½ä»¤ git add .ï¼ˆæœ€åæœ‰ä¸ªå¥ç‚¹ï¼ï¼‰å°†å®ƒä»¬åŠ åˆ°Gitä»“åº“ä¸­ã€‚å¦‚æœè¦è¿ç§»æ•°æ®åº“ï¼Œä¹Ÿéœ€è¦æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå› ä¸ºæ¯ä¸ªè¿ç§»éƒ½ç”Ÿæˆäº†æ–°çš„è¿ç§»æ–‡ä»¶ã€‚ â‘¡æ‰§è¡Œ git commit -am &quot;commit message&quot;ï¼Œå°†ä¿®æ”¹æäº¤åˆ°ä»“åº“ã€‚ â‘¢æ‰§è¡Œ git push heroku master å°†ä¿®æ”¹æ¨é€åˆ°æœåŠ¡å™¨ã€‚ â‘£å¦‚æœæœ¬åœ°è¿ç§»äº†æ•°æ®åº“ï¼Œä¹Ÿéœ€è¦è¿ç§»åœ¨çº¿æ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨ä¸€æ¬¡æ€§å‘½ä»¤ heroku run python manage.py migrateï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ heroku run bashæ‰“å¼€ä¸€ä¸ªè¿œç¨‹ç»ˆç«¯ä¼šè¯ï¼Œå†æ‰§è¡Œè¿ç§»ã€‚ 3.15 è®¾ç½®SECRET_KEYâ€“Djangoæ ¹æ®settings.pyä¸­çš„SECRET_KEYæ¥å®ç°å¤§é‡çš„å®‰å…¨åè®®ã€‚æœ¬é¡¹ç›®ä¸­è®¾ç½®çš„SECRET_KEYå¯¹ä¸€ä¸ªç»ƒä¹ é¡¹ç›®æ¥è¯´å·²ç»è¶³å¤Ÿäº†ï¼Œä½†æ˜¯å¯¹äºç”Ÿäº§ç½‘ç«™ï¼Œè¯·åŠ¡å¿…è®¤çœŸå¯¹å¾…è¿™ä¸ªå€¼ã€‚ 3.16 å°†é¡¹ç›®ä»Herokuåˆ é™¤1(ll_env)learning_log$ heroku apps:destroy --app appname ç°åœ¨å¯ä»¥è®¿é—®è¿™ä¸ªç½‘ç«™ https://pgj-learning-log.herokuapp.com","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é¡¹ç›®","slug":"æŠ€æœ¯/é¡¹ç›®","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é¡¹ç›®/"}],"tags":[{"name":"éƒ¨ç½²","slug":"éƒ¨ç½²","permalink":"http://puguojing.com/tags/éƒ¨ç½²/"},{"name":"Bootstrap","slug":"Bootstrap","permalink":"http://puguojing.com/tags/Bootstrap/"},{"name":"Heroku","slug":"Heroku","permalink":"http://puguojing.com/tags/Heroku/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é¡¹ç›®","slug":"æŠ€æœ¯/é¡¹ç›®","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é¡¹ç›®/"}]},{"title":"pythonçˆ¬è™«Scrapyæ¡†æ¶å­¦ä¹ ï¼ˆ1ï¼‰","slug":"pythonçˆ¬è™«Scrapyæ¡†æ¶å­¦ä¹ ï¼ˆ1ï¼‰","date":"2018-09-07T15:13:09.000Z","updated":"2018-11-06T03:19:13.665Z","comments":true,"path":"2018/09/07/pythonçˆ¬è™«Scrapyæ¡†æ¶å­¦ä¹ ï¼ˆ1ï¼‰/","link":"","permalink":"http://puguojing.com/2018/09/07/pythonçˆ¬è™«Scrapyæ¡†æ¶å­¦ä¹ ï¼ˆ1ï¼‰/","excerpt":"","text":"Scrapyå®‰è£…Macä¸‹æ„å»ºScrapyä¾èµ–åº“éœ€è¦Cç¼–è¯‘å™¨åŠå¼€å‘å¤´æ–‡ä»¶ï¼Œä»–ä¸€èˆ¬ç”±Xcodeæä¾›ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š 1xcode-select --install éšååˆ©ç”¨pipå®‰è£…Scrapy 1pip install Scrapy å®‰è£…å®ŒæˆåéªŒè¯å®‰è£…ï¼Œå‘½ä»¤è¡Œè¾“å…¥ï¼š 1Scrapy è¿è¡Œç»“æœå¦‚ä¸‹å›¾è¯´æ˜å®‰è£…æˆåŠŸï¼š Scrapyæ¡†æ¶ä»‹ç»Scrapyæ˜¯ä¸€ä¸ªåŸºäºTwistedçš„å¼‚æ­¥å¤„ç†æ¡†æ¶ï¼Œæ˜¯çº¯Pythonå®ç°çš„çˆ¬è™«æ¡†æ¶ã€‚å…¶æ¶æ„æ¸…æ™°ï¼Œæ¨¡å—ä¹‹é—´è€¦åˆç¨‹åº¦ä½ï¼Œå¯æ‰©å±•æ€§æå¼ºï¼Œå¯ä»¥çµæ´»å®Œæˆå„ç§éœ€æ±‚ã€‚æˆ‘ä»¬åªéœ€è¦å®šåˆ¶å¼€å‘å‡ ä¸ªæ¨¡ç‰ˆå°±å¯ä»¥è½»æ¾å®ç°ä¸€ä¸ªçˆ¬è™«ã€‚ Scrapyçš„æ¶æ„æ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤º","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"çˆ¬è™«","slug":"æŠ€æœ¯/çˆ¬è™«","permalink":"http://puguojing.com/categories/æŠ€æœ¯/çˆ¬è™«/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://puguojing.com/tags/çˆ¬è™«/"},{"name":"Scrapy","slug":"Scrapy","permalink":"http://puguojing.com/tags/Scrapy/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"çˆ¬è™«","slug":"æŠ€æœ¯/çˆ¬è™«","permalink":"http://puguojing.com/categories/æŠ€æœ¯/çˆ¬è™«/"}]},{"title":"seleniumçš„ä½¿ç”¨ï¼ˆ1ï¼‰å®‰è£…åŠç¯å¢ƒé…ç½®","slug":"seleniumçš„ä½¿ç”¨ï¼ˆ1ï¼‰","date":"2018-08-30T07:49:51.000Z","updated":"2018-11-06T03:20:26.852Z","comments":true,"path":"2018/08/30/seleniumçš„ä½¿ç”¨ï¼ˆ1ï¼‰/","link":"","permalink":"http://puguojing.com/2018/08/30/seleniumçš„ä½¿ç”¨ï¼ˆ1ï¼‰/","excerpt":"","text":"1.å®‰è£…selenium1pip install selenium 2.å®‰è£…ChromeDriver2.1æŸ¥çœ‹chromeç‰ˆæœ¬ï¼š æˆ‘çš„ç‰ˆæœ¬æ˜¯68.0 64 ä½ï¼Œæ‰€ä»¥è¦ä¸‹è½½å¯¹åº”çš„ChromeDriverç‰ˆæœ¬ï¼Œæ‰“å¼€å¦‚ä¸‹ç½‘å€ï¼šhttps://chromedriver.storage.googleapis.com/index.html ä¸‹æ‹‰æ‰¾åˆ°å¯¹åº”è‡ªå·±chromeç‰ˆæœ¬çš„ChromeDriverç‰ˆæœ¬ï¼Œæˆ‘çš„Chromeç‰ˆæœ¬æ˜¯68.0å¯¹åº”çš„ChromeDriverç‰ˆæœ¬æ˜¯2.40ã€‚ ä¸‹é¢çš„æ˜¯ä¸åŒçš„chromeç‰ˆæœ¬å’Œå¯¹åº”çš„ChromeDriverç‰ˆæœ¬å¯¹ç…§è¡¨ï¼šç¬¬ä¸€åˆ—æ˜¯ChromeDriverç‰ˆæœ¬ï¼Œç¬¬äºŒåˆ—æ˜¯chromeç‰ˆæœ¬ã€‚ v2.40 v66-68v2.39 v66-68v2.38 v65-67v2.37 v64-66v2.36 v63-65v2.35 v62-64v2.34 v61-63v2.33 v60-62v2.32 v59-61v2.31 v58-60v2.30 v58-60v2.29 v56-58v2.28 v55-57v2.27 v54-56v2.26 v53-55v2.25 v53-55v2.24 v52-54v2.23 v51-53v2.22 v49-52v2.21 v46-50v2.20 v43-48v2.19 v43-47v2.18 v43-46v2.17 v42-43v2.13 v42-45v2.15 v40-43v2.14 v39-42v2.13 v38-41v2.12 v36-40v2.11 v36-40v2.10 v33-36v2.9 v31-34v2.8 v30-33v2.7 v30-33v2.6 v29-32v2.5 v29-32v2.4 v29-32 ä¸‹è½½å®Œæˆåä¼šæ˜¯ä¸€ä¸ªchromedriver_mac64.zipå‹ç¼©æ–‡ä»¶ï¼Œè§£å‹åchromedriveræ˜¯ä¸€ä¸ªUnixå¯æ‰§è¡Œæ–‡ä»¶ æ¥ä¸‹æ¥å°±éœ€è¦é…ç½®ç¯å¢ƒå˜é‡è®©è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶åœ¨ä»»æ„ç›®å½•ä¸‹å¯æ‰§è¡Œï¼Œä½ å¯ä»¥ç›´æ¥æŠŠå®ƒæ”¾åˆ°/usr/binç­‰å·²ç»å­˜åœ¨ç¯å¢ƒå˜é‡è·¯å¾„çš„ç›®å½•é‡Œï¼Œä¹Ÿå¯ä»¥æ–°æ·»åŠ ä¸€æ¡è‡ªå·±çš„è·¯å¾„ï¼šé¦–å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶ç›®å½•ï¼š 1sudo mkdir -p /usr/local/chromedriver ç„¶åæŠŠâ€˜chromedriverâ€™è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ”¾åˆ°è¿™ä¸ªç›®å½•é‡Œ,åœ¨â€˜chromedriverâ€™è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹æ‰§è¡Œï¼š 1sudo mv chromedriver /usr/local/chromedriver å¯ä»¥æŠŠæ–‡ä»¶æ”¾åˆ°è¯¥ç›®å½•ã€‚ æ¥ç€æ‰“å¼€é…ç½®æ–‡ä»¶æ·»åŠ ç¯å¢ƒå˜é‡è·¯å¾„ï¼š 1vim ./.bash_profile æ·»åŠ ä¸€è¡Œï¼š 1export PATH=&quot;/usr/local/chromedriver:$PATH&quot; ç„¶åæ‰§è¡Œ 1source ./.bash_profile ä½¿ä¿®æ”¹ç”Ÿæ•ˆï¼Œç„¶åè¾“å…¥ï¼šexportæŸ¥çœ‹ä¿®æ”¹ç»“æœï¼š 1234567~export...PATH=&apos;/usr/local/chromedriver:/usr/local/opt/imagemagick@6/bin:/Users/pgj/anaconda3/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/aria2/bin:/usr/local/share/dotnet:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Applications/Wireshark.app/Contents/MacOS:/Applications/Xamarin Workbooks.app/Contents/SharedSupport/path-bin:/usr/local/mysql/bin&apos;PWD=/Users/pgjSHELL=/bin/zsh.... å‘ç°PATHä¸­æœ‰ï¼š/usr/local/chromedriverç›®å½•è·¯å¾„ï¼ˆæ­¤è·¯å¾„ä¸€å®šè¦å’Œchromedriverå¯æ‰§è¡Œæ–‡ä»¶æ‰€æ”¾ç›®å½•ä¸€è‡´ï¼ŒåŠ¡å¿…æ³¨æ„æ‹¼å†™é”™è¯¯ï¼‰ï¼Œè¯´æ˜åŠ å…¥åˆ°ç¯å¢ƒå˜é‡æˆåŠŸã€‚ä¹‹åå…³é—­å‘½ä»¤è¡Œç»ˆç«¯é‡æ–°æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥ï¼šchromedriverå¦‚æœæ§åˆ¶å°æœ‰å¦‚ä¸‹æ˜¾ç¤ºè¾“å‡ºè¯´æ˜é…ç½®å¥½äº†: 123~ chromedriverStarting ChromeDriver 2.40.565386 (45a059dc425e08165f9a10324bd1380cc13ca363) on port 9515Only local connections are allowed. !!!æ³¨æ„è¯¥ä¸Šè¿°ä¿®æ”¹ä¹‹åå¯èƒ½åœ¨è¿è¡Œä»£ç æ˜¯ä»ç„¶ä¼šæŠ¥ï¼šNOT FOUND chromedriver é”™è¯¯ï¼Œæ‰€ä»¥æœ€å¥½çš„åŠæ³•å°±æ˜¯ç›´æ¥æŠŠchromedriverå¯æ‰§è¡Œæ–‡ä»¶æ”¾å…¥usr/bin/ä¸­ã€‚å…¶ä»–æµè§ˆå™¨ä¹Ÿæ˜¯åŒæ ·ç±»ä¼¼çš„åªéœ€è¦ä¸‹è½½å¯¹åº”çš„é©±åŠ¨æ–‡ä»¶æ”¾å…¥usr/bin/ä¸­å³å¯ï¼Œæ¯”å¦‚Firefoxæµè§ˆå™¨å°±éœ€è¦ä¸‹è½½GeckoDriverï¼Œåœ°å€å¦‚ä¸‹ï¼šhttps://github.com/mozilla/geckodriver/releases ç”±äºæˆ‘çš„MACç‰ˆæœ¬æ˜¯ï¼š10.13,ç³»ç»Ÿå¼€å¯äº†Rootlesså†…æ ¸ä¿æŠ¤æœºåˆ¶ï¼Œæ‰€ä»¥éœ€è¦å…³é—­ã€‚ï¼ˆmac ä»10.11åŠä¹‹ååŠ å…¥äº†Rootlesså†…æ ¸ä¿æŠ¤æœºåˆ¶ï¼‰å…³é—­æ–¹æ³•å‚è€ƒå¦‚ä¸‹é“¾æ¥ï¼šhttp://www.pc6.com/edu/86809.html1.é‡å¯ç”µè„‘å¼€åæŒ‰ä½ Command-R è¿›å…¥æ¢å¤åˆ†åŒº. ç„¶ååœ¨ å®ç”¨å·¥å…· æ æ‰¾åˆ° ç»ˆç«¯å¯åŠ¨è¿è¡Œ.è¾“å…¥:csrutil disable; reboot2.ä½ ä¼šçœ‹åˆ°ç³»ç»Ÿä¿æŠ¤è¢«å…³é—­çš„å­—æ ·å¹¶ä¸”ç³»ç»Ÿè‡ªåŠ¨é‡å¯. è¿™æ ·ä½ å°±å¯ä»¥ä¿®æ”¹ç³»ç»Ÿçº§åˆ«çš„æ–‡ä»¶äº†. 3.é€šè¿‡csrutil statusæ¥æŸ¥è¯¢ Rootless ä¿æŠ¤çš„çŠ¶æ€. 12~ csrutil statusSystem Integrity Protection status: disabled. 4.æœ€åå°±æ˜¯é‡æ–°æ¿€æ´» Rootlessçš„æ–¹æ³•äº†. ç»ˆç«¯å†…è¾“å…¥ï¼šcsrutil enable","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"çˆ¬è™«","slug":"æŠ€æœ¯/çˆ¬è™«","permalink":"http://puguojing.com/categories/æŠ€æœ¯/çˆ¬è™«/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"selenium","slug":"selenium","permalink":"http://puguojing.com/tags/selenium/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"çˆ¬è™«","slug":"æŠ€æœ¯/çˆ¬è™«","permalink":"http://puguojing.com/categories/æŠ€æœ¯/çˆ¬è™«/"}]},{"title":"Pythonçˆ¬è™«-seleniumçš„ä½¿ç”¨ï¼ˆ2ï¼‰","slug":"seleniumçš„ä½¿ç”¨ï¼ˆ2ï¼‰","date":"2018-08-30T07:49:51.000Z","updated":"2018-11-06T03:20:39.254Z","comments":true,"path":"2018/08/30/seleniumçš„ä½¿ç”¨ï¼ˆ2ï¼‰/","link":"","permalink":"http://puguojing.com/2018/08/30/seleniumçš„ä½¿ç”¨ï¼ˆ2ï¼‰/","excerpt":"","text":"ä½¿ç”¨seleniumæ‰“å¼€chromeæµè§ˆå™¨ç™¾åº¦è¿›è¡Œæœç´¢12345678910111213141516171819202122232425from selenium import webdriverfrom selenium.webdriver.common.by import Byfrom selenium.webdriver.common.keys import Keysfrom selenium.webdriver.support import expected_conditions as ECfrom selenium.webdriver.support.wait import WebDriverWaitimport timebrower = webdriver.Chrome()try: brower.get(&apos;https://www.baidu.com/&apos;) input = brower.find_element_by_id(&apos;kw&apos;)#é€šè¿‡idå¯»æ‰¾å…ƒç´  input.send_keys(&apos;Python&apos;)#åœ¨æ‰¾åˆ°çš„inputè¾“å…¥æ¡†å†…è¾“å…¥Python input.send_keys(Keys.ENTER)#è¾“å…¥é”®ç›˜çš„Enter wait = WebDriverWait(brower,10)#è®¾ç½®waitçš„è¶…æ—¶æ—¶é—´ wait.until(EC.presence_of_element_located((By.ID,&apos;content_left&apos;)))#ç­‰å¾…ç›´åˆ°å‡ºç°idæ˜¯conten_leftçš„å…ƒç´ åŠ è½½å‡ºæ¥çš„æ—¶å€™ï¼Œæœ€å¤§ç­‰å¾…æ—¶é—´ä¸è¶…è¿‡10ç§’ print(brower.current_url)#æ‰“å°url print(brower.get_cookies())#æ‰“å°ç°åœ¨çš„cookies print(brower.page_source)#æ‰“å°ç½‘é¡µæºä»£ç  time.sleep(5)except Exception as e: print(e)finally: brower.close() è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æµè§ˆå™¨ï¼Œæ¯”å¦‚ï¼šFirefoxã€Edgeã€ä»¥åŠä¸€äº›æ‰‹æœºæµè§ˆå™¨ç­‰ 12345678from selenium import webdriverbrower = webdriver.Chrome()brower = webdriver.Firefox()brower = webdriver.Edge()brower = webdriver.PhantomJS()brower = webdriver.Safari() æ³¨æ„æ¯ä¸ªæµè§ˆå™¨éƒ½æœ‰è‡ªå·±å¯¹åº”çš„ç±»ä¼¼chromeæµè§ˆå™¨çš„chromedriveré©±åŠ¨å¯æ‰§è¡Œæ–‡ä»¶ã€‚ 2ä½¿ç”¨seleniumæ‰“å¼€æ·˜è´§æœç´¢123456789101112131415161718brower = webdriver.Chrome()try: brower.get(&apos;https://www.taobao.com/&apos;) search_input = brower.find_element_by_id(&apos;q&apos;) search_input.send_keys(&apos;iPhone&apos;) time.sleep(2) search_input.clear() time.sleep(1) search_input.send_keys(&apos;iPad&apos;) time.sleep(1) search_button = brower.find_element_by_class_name(&apos;btn-search&apos;) time.sleep(1) search_button.click() time.sleep(10)except Exception as e: print(e)finally: brower.close() æ‰“å¼€æ·˜å®ï¼Œæœç´¢â€˜iPhoneâ€™ç„¶ååˆ é™¤ï¼Œæ¥ç€æœç´¢â€˜iPadâ€™ 3.åŠ¨ä½œé“¾ï¼Œå®ç°æ‹–æ‹½1234567891011121314151617from selenium.webdriver import ActionChainsbrower = webdriver.Chrome()try: url = &apos;http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&apos; brower.get(url) brower.switch_to.frame(&apos;#iframeResult&apos;)#åˆ‡æ¢åˆ°å­é¡µé¢ä¸­&apos;iframeResult&apos;æ˜¯å­é¡µé¢çš„idåï¼Œä¹Ÿå¯ä»¥æ ¹æ®name inex ç”šè‡³webElementå¯¹è±¡å®šä½ source = brower.find_element_by_css_selector(&apos;#draggable&apos;) target = brower.find_element_by_css_selector(&apos;#droppable&apos;) actions = ActionChains(brower)#æ„å»ºaction actions.drag_and_drop(source,target)# actions.perform()#è°ƒç”¨perform()å°±æ˜¯æ‰§è¡Œä¸Šé¢çš„åŠ¨ä½œé“¾except Exception as e: print(e)finally: brower.close() ActionChainsæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé¡¾åæ€ä¹‰ï¼Œæ˜¯ä¸€ä¸ªåŠ¨ä½œé“¾ï¼Œå¦‚æœåœ¨ä¸€ä¸ªç”¨ä¾‹ä¸­åªæœ‰ä¸€ä¸¤ä¸ªåŠ¨ä½œï¼Œé‚£ä¹ˆç”¨ä¹‹å‰è®²è¿‡çš„ç®€å•ç‰ˆçš„å°±å¯ä»¥äº†ï¼Œå¦‚æœåŠ¨ä½œå¾ˆå¤æ‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨è¿™ä¸ªäº†ã€‚ 1.ActionChainsæ˜¯è‡ªåŠ¨æ‰§è¡Œä½çº§äº¤äº’çš„ä¸€ç§æ–¹å¼ï¼Œä¾‹å¦‚ï¼šé¼ æ ‡ç§»åŠ¨ï¼Œé¼ æ ‡ç‚¹æŒ‰ï¼Œé”®ç›˜æ“ä½œï¼Œæ–‡æœ¬æ“ä½œç­‰ã€‚2.å½“æˆ‘ä»¬è°ƒç”¨è¿™é‡Œçš„æ–¹æ³•æ—¶ï¼Œè¿™äº›æ“ä½œä¼šè¢«å…ˆå‚¨å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå½“æˆ‘ä»¬è°ƒç”¨perform()æ–¹æ³•æ—¶ï¼Œé˜Ÿåˆ—ä¸­çš„æ“ä½œä¼šè¢«æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ‰§è¡Œåé˜Ÿåˆ—è¢«æ¸…ç©ºã€‚ iframeçš„åˆ‡æ¢å‚çœ‹ç½‘å€:https://blog.csdn.net/huilan_same/article/details/52200586frameæ ‡ç­¾æœ‰framesetã€frameã€iframeä¸‰ç§ï¼Œframesetè·Ÿå…¶ä»–æ™®é€šæ ‡ç­¾æ²¡æœ‰åŒºåˆ«ï¼Œä¸ä¼šå½±å“åˆ°æ­£å¸¸çš„å®šä½ï¼Œè€Œframeä¸iframeå¯¹seleniumå®šä½è€Œè¨€æ˜¯ä¸€æ ·çš„ï¼Œseleniumæœ‰ä¸€ç»„æ–¹æ³•å¯¹frameè¿›è¡Œæ“ä½œã€‚ 1.æ€ä¹ˆåˆ‡åˆ°frameä¸­(switch_to.frame())seleniumæä¾›äº†switch_to.frame()æ–¹æ³•æ¥åˆ‡æ¢frame 1switch_to.frame(reference) ä¸å¾—ä¸æåˆ°switch_to_frame()ï¼Œå¾ˆå¤šäººåœ¨è¿™æ ·å†™çš„æ—¶å€™ä¼šå‘ç°ï¼Œè¿™å¥è¯è¢«åˆ’ä¸Šäº†åˆ é™¤çº¿ï¼ŒåŸå› æ˜¯è¿™ä¸ªæ–¹æ³•å·²ç»outäº†ï¼Œä¹‹åå¾ˆæœ‰å¯èƒ½ä¼šä¸æ”¯æŒï¼Œå»ºè®®çš„å†™æ³•æ˜¯switch_to.frame() referenceæ˜¯ä¼ å…¥çš„å‚æ•°ï¼Œç”¨æ¥å®šä½frameï¼Œå¯ä»¥ä¼ å…¥idã€nameã€indexä»¥åŠseleniumçš„WebElementå¯¹è±¡ï¼Œå‡è®¾æœ‰å¦‚ä¸‹HTMLä»£ç  index.htmlï¼š 12345678&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;title&gt;FrameTest&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;iframe src=&quot;a.html&quot; id=&quot;frame1&quot; name=&quot;myframe&quot;&gt;&lt;/iframe&gt;&lt;/body&gt;&lt;/html&gt; æƒ³è¦å®šä½å…¶ä¸­çš„iframeå¹¶åˆ‡è¿›å»ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç ï¼š 123456from selenium import webdriverdriver = webdriver.Firefox()driver.switch_to.frame(0) # 1.ç”¨frameçš„indexæ¥å®šä½ï¼Œç¬¬ä¸€ä¸ªæ˜¯0# driver.switch_to.frame(&quot;frame1&quot;) # 2.ç”¨idæ¥å®šä½# driver.switch_to.frame(&quot;myframe&quot;) # 3.ç”¨nameæ¥å®šä½# driver.switch_to.frame(driver.find_element_by_tag_name(&quot;iframe&quot;)) # 4.ç”¨WebElementå¯¹è±¡æ¥å®šä½ é€šå¸¸é‡‡ç”¨idå’Œnameå°±èƒ½å¤Ÿè§£å†³ç»å¤§å¤šæ•°é—®é¢˜ã€‚ä½†æœ‰æ—¶å€™frameå¹¶æ— è¿™ä¸¤é¡¹å±æ€§ï¼Œåˆ™å¯ä»¥ç”¨indexå’ŒWebElementæ¥å®šä½ï¼š1.indexä»0å¼€å§‹ï¼Œä¼ å…¥æ•´å‹å‚æ•°å³åˆ¤å®šä¸ºç”¨indexå®šä½ï¼Œä¼ å…¥strå‚æ•°åˆ™åˆ¤å®šä¸ºç”¨id/nameå®šä½2.WebElementå¯¹è±¡ï¼Œå³ç”¨find_elementç³»åˆ—æ–¹æ³•æ‰€å–å¾—çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨tag_nameã€xpathç­‰æ¥å®šä½frameå¯¹è±¡ æ¯”å¦‚ï¼š 1&lt;iframe src=&quot;myframetest.html&quot; /&gt; ç”¨xpathå®šä½ï¼Œä¼ å…¥WebElementå¯¹è±¡ï¼š 1driver.switch_to.frame(driver.find_element_by_xpath(&quot;//iframe[contains(@src,&apos;myframe&apos;)]&quot;)) 2.ä»frameä¸­åˆ‡å›ä¸»æ–‡æ¡£(switch_to.default_content())åˆ‡åˆ°frameä¸­ä¹‹åï¼Œæˆ‘ä»¬ä¾¿ä¸èƒ½ç»§ç»­æ“ä½œä¸»æ–‡æ¡£çš„å…ƒç´ ï¼Œè¿™æ—¶å¦‚æœæƒ³æ“ä½œä¸»æ–‡æ¡£å†…å®¹ï¼Œåˆ™éœ€åˆ‡å›ä¸»æ–‡æ¡£ã€‚ 1driver.switch_to.default_content() 3.åµŒå¥—frameçš„æ“ä½œ(switch_to.parent_frame())æœ‰æ—¶å€™æˆ‘ä»¬ä¼šé‡åˆ°åµŒå¥—çš„frameï¼Œå¦‚ä¸‹ï¼š 12345&lt;html&gt; &lt;iframe id=&quot;frame1&quot;&gt; &lt;iframe id=&quot;frame2&quot; / &gt; &lt;/iframe&gt;&lt;/html&gt; 1.ä»ä¸»æ–‡æ¡£åˆ‡åˆ°frame2ï¼Œä¸€å±‚å±‚åˆ‡è¿›å» 12driver.switch_to.frame(&quot;frame1&quot;)driver.switch_to.frame(&quot;frame2&quot;) 2.ä»frame2å†åˆ‡å›frame1ï¼Œè¿™é‡Œseleniumç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿä»å­frameåˆ‡å›åˆ°çˆ¶frameï¼Œè€Œä¸ç”¨æˆ‘ä»¬åˆ‡å›ä¸»æ–‡æ¡£å†åˆ‡è¿›æ¥ã€‚ 1driver.switch_to.parent_frame() # å¦‚æœå½“å‰å·²æ˜¯ä¸»æ–‡æ¡£ï¼Œåˆ™æ— æ•ˆæœ æœ‰äº†parent_frame()è¿™ä¸ªç›¸å½“äºåé€€çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥éšæ„åˆ‡æ¢ä¸åŒçš„frameï¼Œéšæ„çš„è·³æ¥è·³å»äº†ã€‚ æ‰€ä»¥åªè¦å–„ç”¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼Œé‡åˆ°frameåˆ†åˆ†é’Ÿæå®šï¼š 123driver.switch_to.frame(reference)driver.switch_to.parent_frame()driver.switch_to.default_content() å¦å¤–è¡¥å……ä¸€ä¸‹ï¼Œä¹‹å‰æ›¾çœ‹åˆ°è¿‡ç”¨ç‚¹åˆ†æ³•æ¥åˆ‡å…¥åµŒå¥—frameçš„æ–¹æ³•ï¼Œä½†æˆ‘è¯•éªŒä¹‹åå‘ç°å¹¶ä¸èƒ½å®šä½åˆ°frameï¼š 1driver.switch_to.frame(&apos;frame1.0.frame3&apos;) æ®è¯´ä»¥ä¸Šä»£ç å¯ä»¥åˆ‡åˆ° â€œframe1â€ ä¸‹çš„ â€œç¬¬ä¸€ä¸ªframeâ€ ä¸‹çš„ â€œframe3â€ ä¸­ã€‚ Seleniumå®˜æ–¹æ–‡æ¡£ç‚¹å‡»æŸ¥çœ‹Seleniumå®˜æ–¹æ–‡æ¡£","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"çˆ¬è™«","slug":"æŠ€æœ¯/çˆ¬è™«","permalink":"http://puguojing.com/categories/æŠ€æœ¯/çˆ¬è™«/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://puguojing.com/tags/çˆ¬è™«/"},{"name":"selenium","slug":"selenium","permalink":"http://puguojing.com/tags/selenium/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"çˆ¬è™«","slug":"æŠ€æœ¯/çˆ¬è™«","permalink":"http://puguojing.com/categories/æŠ€æœ¯/çˆ¬è™«/"}]},{"title":"MongoDBï¼ˆ1ï¼‰- å®‰è£…ã€pythonæ“ä½œ","slug":"MongoDBï¼ˆ1ï¼‰- pythonæ“ä½œ","date":"2018-08-29T09:22:49.000Z","updated":"2018-11-09T15:11:59.545Z","comments":true,"path":"2018/08/29/MongoDBï¼ˆ1ï¼‰- pythonæ“ä½œ/","link":"","permalink":"http://puguojing.com/2018/08/29/MongoDBï¼ˆ1ï¼‰- pythonæ“ä½œ/","excerpt":"","text":"ä»‹ç»MongoDB C++è¯­è¨€ç¼–å†™ï¼ŒåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿå¼€æºæ•°æ®åº“ï¼Œå…¶å†…å®¹å­˜å‚¨å½¢å¼ç±»ä¼¼JSONå¯¹è±¡ï¼Œä»–çš„å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ã€æ•°ç»„å·²ç»æ–‡æ¡£æ•°ç»„ï¼Œéå¸¸çµæ´»ã€‚ä¸­æ–‡å®˜ç½‘å®˜æ–¹æ–‡æ¡£ å®‰è£…Windowsä¸å»ºè®®ï¼Œä¸ä½¿ç”¨,å®‰è£…éå¸¸éº»çƒ¦ï¼ Ubuntuå®˜æ–¹å®‰è£…æ•™ç¨‹ï¼šhttps://docs.mongodb.com/manual/installation/ Macå®‰è£…ï¼š 1brew install mongodb åˆ›å»ºå­˜æ”¾æ•°æ®åº“çš„æ–‡ä»¶å¤¹ï¼š 1mkdir /data/db å¯åŠ¨ï¼š 12brew services start mongodbsudo mongod åœæ­¢å’Œé‡å¯ï¼š 12brew services stop mongodbbrew services restart mongodb å‚è€ƒå…¶ä»–: 123456#brew install mongodb#æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹/data/db ç”¨äºå­˜æ”¾MangoDBæ•°æ®#å¯åŠ¨MongoDBæœåŠ¡ï¼šbrew services start mongodb#sudo mongodb#åœæ­¢MongoDBæœåŠ¡ï¼šbrew services stop mongodb#é‡å¯MongoDBæœåŠ¡ï¼šbrew services restart mongodb Macæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯ä¸ç®¡ä»€ä¹ˆè½¯ä»¶å®‰è£…èµ·æ¥éƒ½æ˜¯å¦‚æ­¤ç®€å•ï¼ï¼ï¼ï¼ python ä¸‹ä½¿ç”¨å®‰è£…pymongondb åŒ…1pip3 install pymongo ä½¿ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254#!/usr/bin/python3# -*- coding:utf-8 -*-import pymongoimport pymongo#åˆ›å»ºMongoDBè¿æ¥å¯¹è±¡client = pymongo.MongoClient(host=&apos;localhost&apos;,port=27017)#client = pymongo.MongoClient(&apos;mongondb://localhost:27017/&apos;)#æŒ‡å®šæˆ–åˆ›å»ºæ•°æ®åº“db = client.testmongodb#db = client[&apos;testmongodb&apos;]#æŒ‡å®šæˆ–åˆ›å»ºé›†åˆ(ç±»ä¼¼äºtable)collection = db.studens#collection = db[&apos;studens&apos;]#æ’å…¥æ•°æ®ï¼Œæ•°æ®ä»¥å­—å…¸çš„å½¢åŠ¿è¡¨ç¤ºdata = &#123; &apos;id&apos;:&apos;20180001&apos;, &apos;name&apos;:&apos;Lio&apos;, &apos;age&apos;:20&#125;#ç¬¬ä¸€ç§æ–¹å¼ï¼Œæ’å…¥ä¸€æ¡æ•°æ®#result = collection.insert(data)#print(result)#5b866486623b564260fca3f7data_1 = &#123; &apos;id&apos;:&apos;20180002&apos;, &apos;name&apos;:&apos;mark&apos;, &apos;age&apos;:21&#125;data_2 = &#123; &apos;id&apos;:&apos;20180003&apos;, &apos;name&apos;:&apos;kang&apos;, &apos;age&apos;:24&#125;#ç¬¬ä¸€ç§æ–¹å¼ï¼Œæ’å…¥å¤šæ¡æ•°æ®#result = collection.insert([data_1,data_2])#print(result)#[ObjectId(&apos;5b866b6c623b5643595070b2&apos;), ObjectId(&apos;5b866b6c623b5643595070b3&apos;)]data_3 = &#123; &apos;id&apos;:&apos;20180004&apos;, &apos;name&apos;:&apos;lin&apos;, &apos;age&apos;:25, &apos;gender&apos;:&apos;male&apos;&#125;#ç¬¬äºŒç§æ–¹å¼ï¼Œæ’å…¥ä¸€æ¡æ•°æ®#result = collection.insert_one(data_3)#print(result)#&lt;pymongo.results.InsertOneResult object at 0x10c1d3d88&gt;#print(type(result))#&lt;class &apos;pymongo.results.InsertOneResult&apos;&gt;#print(result.inserted_id)#5b866c5d623b5643904db0afdata_4 = &#123; &apos;id&apos;:&apos;20180005&apos;, &apos;name&apos;:&apos;heler&apos;, &apos;age&apos;:30, &apos;gender&apos;:&apos;male&apos;&#125;data_5 = &#123; &apos;id&apos;:&apos;20180006&apos;, &apos;name&apos;:&apos;jay&apos;, &apos;age&apos;:22, &apos;gender&apos;:&apos;female&apos;&#125;#ç¬¬äºŒç§æ–¹å¼æ’å…¥å¤šæ¡æ•°æ®#result = collection.insert_many([data_4,data_5])#print(result)#&lt;pymongo.results.InsertManyResult object at 0x109435ec8&gt;#print(type(result))#&lt;class &apos;pymongo.results.InsertManyResult&apos;&gt;#print(result.inserted_ids)#[ObjectId(&apos;5b866d0f623b5643c6acf070&apos;), ObjectId(&apos;5b866d0f623b5643c6acf071&apos;)]##### æ¨èä½¿ç”¨insert_one()å’Œinsert_many()#æŸ¥è¯¢#å¯ä»¥ä½¿ç”¨find_one()å’Œfindï¼ˆï¼‰æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢ï¼Œå…¶ä¸­find_one()æŸ¥è¯¢å¾—åˆ°çš„æ˜¯å•æ¡ç»“æœï¼Œfindï¼ˆï¼‰åˆ™æ˜¯è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡#result = collection.find_one(&#123;&apos;name&apos;:&apos;Lio&apos;&#125;)#print(type(result))#&lt;class &apos;dict&apos;&gt;#print(result)#&#123;&apos;_id&apos;: ObjectId(&apos;5b866486623b564260fca3f7&apos;), &apos;id&apos;: &apos;20180001&apos;, &apos;name&apos;: &apos;Lio&apos;, &apos;age&apos;: 20&#125;#è¿”å›çš„æ˜¯å­—å…¸ç±»å‹ï¼Œå…¶ä¸­æ•°æ®å¤šäº†ä¸€ä¸ª_idå±æ€§ä»–æ˜¯MongoDBæ’å…¥æ•°æ®æ—¶è‡ªåŠ¨æ·»åŠ çš„#æ­¤å¤–æˆ‘ä»¬å¯ä»¥æ ¹æ®ObjectIdæ¥æŸ¥è¯¢ï¼Œæ­¤æ—¶éœ€è¦bsonåº“ä¸­çš„objectid:#from bson.objectid import ObjectId#result = collection.find_one(&#123;&apos;_id&apos;:ObjectId(&apos;5b866486623b564260fca3f7&apos;)&#125;)#print(type(result))#&lt;class &apos;dict&apos;&gt;#print(result)#&#123;&apos;_id&apos;: ObjectId(&apos;5b866486623b564260fca3f7&apos;), &apos;id&apos;: &apos;20180001&apos;, &apos;name&apos;: &apos;Lio&apos;, &apos;age&apos;: 20&#125;#å¯¹äºå¤šæ¡æ•°æ®æŸ¥è¯¢å¯ä»¥ä½¿ç”¨find#results = collection.find(&#123;&apos;age&apos;:30&#125;)#print(type(results))#&lt;class &apos;pymongo.cursor.Cursor&apos;&gt;#print(results)#&lt;pymongo.cursor.Cursor object at 0x10cd07160&gt;#for result in results:#&#123;&apos;_id&apos;: ObjectId(&apos;5b866d0f623b5643c6acf070&apos;), &apos;id&apos;: &apos;20180005&apos;, &apos;name&apos;: &apos;heler&apos;, &apos;age&apos;: 30, &apos;gender&apos;: &apos;male&apos;&#125;# print(result)#è¿”å›çš„ç»“æœæ˜¯cursorç±»å‹ï¼Œç›¸å½“äºä¸€ä¸ªç”Ÿæˆå™¨#æ¡ä»¶æŸ¥è¯¢#æŸ¥è¯¢å¹´é¾„å¤§äº20çš„æ•°æ®#results = collection.find(&#123;&apos;age&apos;:&#123;&apos;$gt&apos;:20&#125;&#125;)#print(type(results))#&lt;class &apos;pymongo.cursor.Cursor&apos;&gt;#print(results)#&lt;pymongo.cursor.Cursor object at 0x10cf561d0&gt;#for result in results:## print(result)#æŸ¥è¯¢ç»“æœï¼š#&#123;&apos;_id&apos;: ObjectId(&apos;5b866b6c623b5643595070b2&apos;), &apos;id&apos;: &apos;20180002&apos;, &apos;name&apos;: &apos;mark&apos;, &apos;age&apos;: 21&#125;#&#123;&apos;_id&apos;: ObjectId(&apos;5b866b6c623b5643595070b3&apos;), &apos;id&apos;: &apos;20180003&apos;, &apos;name&apos;: &apos;kang&apos;, &apos;age&apos;: 24&#125;#&#123;&apos;_id&apos;: ObjectId(&apos;5b866c5d623b5643904db0af&apos;), &apos;id&apos;: &apos;20180004&apos;, &apos;name&apos;: &apos;lin&apos;, &apos;age&apos;: 25, &apos;gender&apos;: &apos;male&apos;&#125;#&#123;&apos;_id&apos;: ObjectId(&apos;5b866d0f623b5643c6acf070&apos;), &apos;id&apos;: &apos;20180005&apos;, &apos;name&apos;: &apos;heler&apos;, &apos;age&apos;: 30, &apos;gender&apos;: &apos;male&apos;&#125;#&#123;&apos;_id&apos;: ObjectId(&apos;5b866d0f623b5643c6acf071&apos;), &apos;id&apos;: &apos;20180006&apos;, &apos;name&apos;: &apos;jay&apos;, &apos;age&apos;: 22, &apos;gender&apos;: &apos;female&apos;&#125;#è¿™é‡Œçš„æŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªå­—å…¸å½¢å¼ï¼šæ„æ€æ˜¯æŸ¥è¯¢ageå¤§äº20çš„ä¿¡æ¯,$gtæ˜¯å¤§äºï¼Œå…¶ä»–å¸¸è§å…¥å¦‚ä¸‹ï¼š#$lt å°äº &#123;&apos;age&apos;:&#123;&apos;$lt&apos;:20&#125;&#125;#$gt å¤§äº &#123;&apos;age&apos;:&#123;&apos;$gt&apos;:20&#125;&#125;#$lte å°äºç­‰äº &#123;&apos;age&apos;:&#123;&apos;$lte&apos;:20&#125;&#125;#$gte å¤§äºç­‰äº &#123;&apos;age&apos;:&#123;&apos;$gte&apos;:20&#125;&#125;#$ne ä¸ç­‰äº &#123;&apos;age&apos;:&#123;&apos;$ne&apos;:20&#125;&#125;#$in åœ¨èŒƒå›´å†… &#123;&apos;age&apos;:&#123;&apos;$in&apos;:[20,23]&#125;&#125;#$nin ä¸åœ¨èŒƒå›´å†… &#123;&apos;age&apos;:&#123;&apos;$nin&apos;:[20,23]&#125;&#125;#$lt å°äº &#123;&apos;age&apos;:&#123;&apos;$t&apos;:20&#125;&#125;#è¿˜å¯ä»¥æ­£åˆ™åŒ¹é…#results = collection.find(&#123;&apos;name&apos;:&#123;&apos;$regex&apos;:&apos;^M.*&apos;&#125;&#125;)#&apos;$regex&apos;è¡¨ç¤ºä½¿ç”¨æ­£åˆ™åŒ¹é…ï¼Œ&apos;^M.*&apos;è¡¨ç¤ºä»¥Må¼€å¤´#å…¶ä»–ï¼š#$exists å±æ€§æ˜¯å¦å­˜åœ¨ &#123;&apos;name&apos;:&#123;&apos;$exists&apos;:True&#125;&#125; nameçš„å±æ€§å­˜åœ¨#$type ç±»å‹åˆ¤æ–­ &#123;&apos;age&apos;:&#123;&apos;$type&apos;:&apos;int&apos;&#125;&#125; ageçš„ç±»å‹ä¸ºint#$mod æ•°å­—æ¨¡æ“ä½œ &#123;&apos;age&apos;:&#123;&apos;$mod&apos;:&apos;[5,0]&apos;&#125;&#125; å¹´é¾„çš„æ¨¡5ä½™0#$text æ–‡æœ¬æŸ¥è¯¢ &#123;&apos;$text&apos;:&#123;&apos;$search&apos;:&apos;Mike&apos;&#125;&#125; textç±»å‹çš„å±æ€§ä¸­åŒ…å«Mikeå­—ç¬¦ä¸²#$where é«˜çº§æ¡ä»¶æŸ¥è¯¢ &#123;&apos;where&apos;:&apos;obj.fans_count == obj.follows_count&apos;&#125; è‡ªèº«ç²‰ä¸æ•°ç­‰äºå…³æ³¨æ•°#è®¡æ•°#å¯ä½¿ç”¨countå‡½æ•°ç»Ÿè®¡æŸ¥è¯¢çš„æ•°æ®æ¡æ•°#count = collection.find(&#123;&apos;name&apos;:&#123;&apos;$regex&apos;:&apos;^.*&apos;&#125;&#125;).count()#print(count)#æ’åº#pymongo.ASCENDINå‡åº,pymongo.DESCENDINGé™åº#results = collection.find().sort(&apos;name&apos;,pymongo.DESCENDING)#for result in results:# print(result)#åç§»#ä½¿ç”¨skip(2)ï¼Œè¡¨ç¤ºåç§»å‡ ä¸ªä½ç½®ï¼ŒåŠå¿½ç•¥æŸ¥è¯¢åˆ°çš„å‰é¢2æ¡æ•°æ®#ä½¿ç”¨limit(2)è¡¨ç¤ºæœ€å¤šè·å–å¤šå°‘ç»“æœï¼Œé™åˆ¶è·å–çš„æ¡æ•°#ï¼ï¼ï¼æ³¨æ„åœ¨åºå¤§æ•°æ®çš„æ—¶å€™ï¼ˆåƒä¸‡ã€äº¿çº§åˆ«ï¼‰ä¸è¦ä½¿ç”¨å¤§åç§»é‡æ¥æŸ¥è¯¢æ•°æ®ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡º#å¯ä»¥ä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹æ“ä½œ:#from bson.objectid import ObjectId#collection.find(&#123;&apos;_id&apos;:&#123;&apos;$gt&apos;:&apos;5b866b6c623b5643595070b2&apos;&#125;&#125;)#è¿™æ—¶åªéœ€è¦è®°å½•ä¸Šæ¬¡æŸ¥è¯¢çš„id#æ›´æ–°#ä½¿ç”¨update()æ–¹æ³•æ›´æ–°#condition = &#123;&apos;name&apos;:&apos;Lio&apos;&#125;#result_1 = collection.find_one(condition)#print(result_1)#result_1[&apos;age&apos;] = 20#result_2 = collection.update(condition,result_1)#print(result_2)#è¿™é‡Œæˆ‘ä»¬éœ€è¦å…ˆæŸ¥è¯¢åˆ°è¦ä¿®æ”¹çš„æ•°æ®ï¼Œä¿®æ”¹å®Œä¹‹åä½¿ç”¨udate()æ–¹æ³•å°†ä¿®æ”¹åçš„æ•°æ®ä¼ å…¥#æ‰§è¡Œç»“æœ#&#123;&apos;_id&apos;: ObjectId(&apos;5b866486623b564260fca3f7&apos;), &apos;id&apos;: &apos;20180001&apos;, &apos;name&apos;: &apos;Lio&apos;, &apos;age&apos;: 20&#125;#&#123;&apos;n&apos;: 1, &apos;nModified&apos;: 0, &apos;ok&apos;: 1.0, &apos;updatedExisting&apos;: True&#125;#è¿˜å¯ä»¥ä½¿ç”¨ $set è¿›è¡Œæ›´æ–°,æ³¨æ„ä½¿ç”¨$setåªä¼šæ›´æ–°result_1å­—å…¸é‡Œå­˜åœ¨çš„å­—æ®µï¼Œå¦‚æœåŸå…ˆè¿˜æœ‰å…¶ä»–å­—æ®µæ€ä¸ä¼šæ›´æ–°ä¹Ÿä¸ä¼šåˆ é™¤#è€Œå¦‚æœä¸ç”¨$setï¼Œä¼šæŠŠä¹‹å‰çš„æ•°æ®å…¨éƒ¨ç”¨result_1æ›¿æ¢ï¼Œè‹¥åŸæ•°æ®å­˜åœ¨å…¶ä»–å­—æ®µåˆ™ä¼šè¢«åˆ é™¤#condition = &#123;&apos;name&apos;:&apos;Lio&apos;&#125;#result_1 = collection.find_one(condition)#print(result_1)#result_1[&apos;age&apos;] = 20#result_2 = collection.update(condition,&#123;&apos;$set&apos;:result_1&#125;)#print(result_2)#å»ºè®®ä½¿ç”¨update_one()å’Œupdate_many()ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸èƒ½ç›´æ¥ä½¿ç”¨å­—å…¸è¦ä½¿ç”¨$ç±»å‹æ“ä½œç¬¦#ä½¿ç”¨matched_count(åŒ¹é…çš„æ•°æ®æ¡æ•°)å’Œmodified_count(å½±å“çš„æ•°æ®æ¡æ•°)æŸ¥çœ‹ç»“æœ#condition = &#123;&apos;name&apos;:&apos;Lio&apos;&#125;#result_1 = collection.find_one(condition)#result_1[&apos;age&apos;] = 22#result_2 = collection.update_one(condition,&#123;&apos;$set&apos;:result_1&#125;)#print(result_2)#print(result_2.matched_count,result_2.modified_count)#æ‰§è¡Œç»“æœ#&#123;&apos;_id&apos;: ObjectId(&apos;5b866486623b564260fca3f7&apos;), &apos;id&apos;: &apos;20180001&apos;, &apos;name&apos;: &apos;Lio&apos;, &apos;age&apos;: 20&#125;#&#123;&apos;n&apos;: 1, &apos;nModified&apos;: 1, &apos;ok&apos;: 1.0, &apos;updatedExisting&apos;: True&#125;#&lt;pymongo.results.UpdateResult object at 0x110dd2fc8&gt;#1 1#ä½¿ç”¨æ¡ä»¶#è¡¨ç¤ºæŸ¥è¯¢å¹´é¾„æ¡ä»¶å¤§äº20çš„äººï¼Œç„¶åæ›´æ–°æ¡ä»¶ä¸º&#123;&apos;$inc&apos;:&#123;&apos;age&apos;:1&#125;ï¼Œè¡¨ç¤ºageåŠ 1ï¼Œæ‰§è¡Œåå°†ä¼šåœ¨çˆ±æ»¡è¶³æ¡ä»¶çš„æ•°æ®ageå­—æ®µåŠ 1#condition = &#123;&apos;age&apos;:&#123;&apos;$gt&apos;:20&#125;&#125;#result_2 = collection.update_one(condition,&#123;&apos;$inc&apos;:&#123;&apos;age&apos;:1&#125;&#125;)#print(result_2)#print(result_2.matched_count,result_2.modified_count)#æ‰§è¡Œç»“æœï¼šç”±äºä½¿ç”¨äº†update_oneæ‰€ä»¥åªå½±å“äº†1æ¡æ•°æ®#&lt;pymongo.results.UpdateResult object at 0x10627bf48&gt;#1 1#ä½¿ç”¨update_many(),æ›´æ–°æ‰€æœ‰#condition = &#123;&apos;age&apos;:&#123;&apos;$gt&apos;:10&#125;&#125;#result_2s = collection.update_many(condition,&#123;&apos;$inc&apos;:&#123;&apos;age&apos;:1&#125;&#125;)#print(type(result_2s))#print(result_2s)#print(result_2s.matched_count,result_2s.modified_count)#æ‰§è¡Œç»“æœ#&lt;class &apos;pymongo.results.UpdateResult&apos;&gt;#&lt;pymongo.results.UpdateResult object at 0x10f76bfc8&gt;#6 6#åˆ é™¤#result = collection.remove(&#123;&apos;name&apos;:&apos;heler&apos;&#125;)#print(result) #&#123;&apos;n&apos;: 1, &apos;ok&apos;: 1.0&#125;#æ¨èä½¿ç”¨delete_one()å’Œdelete_many()#result = collection.delete_one(&#123;&apos;name&apos;:&apos;lin&apos;&#125;)#print(result) #&lt;pymongo.results.DeleteResult object at 0x10e8fadc8&gt;#print(result.deleted_count)result = collection.delete_many(&#123;&apos;age&apos;:&#123;&apos;$lt&apos;:26&#125;&#125;)print(result) #&lt;pymongo.results.DeleteResult object at 0x10e40bdc8&gt;print(result.deleted_count) #4#å…¶ä»–æ“ä½œ#find_one_and_delete()#find_one_and_replace()#find_one_and_update()#è¯¦è§å®˜æ–¹æ–‡æ¡£","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"MongoDB","slug":"MongoDB","permalink":"http://puguojing.com/tags/MongoDB/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"macä¸‹MySQLå¿˜è®°å¯†ç å¦‚ä½•é‡ç½®ï¼Ÿ","slug":"Mysqlå¿˜è®°å¯†ç è§£å†³åŠæ³•","date":"2018-08-28T15:20:31.000Z","updated":"2018-11-06T04:31:11.576Z","comments":true,"path":"2018/08/28/Mysqlå¿˜è®°å¯†ç è§£å†³åŠæ³•/","link":"","permalink":"http://puguojing.com/2018/08/28/Mysqlå¿˜è®°å¯†ç è§£å†³åŠæ³•/","excerpt":"","text":"å¿˜è®°Mysqlå¯†ç å¦‚ä½•é‡ç½®ï¼Ÿstep1ï¼š è‹¹æœ-&gt;ç³»ç»Ÿåå¥½è®¾ç½®-&gt;æœ€ä¸‹è¾¹ç‚¹mysql åœ¨å¼¹å‡ºé¡µé¢ä¸­ å…³é—­mysqlæœåŠ¡ï¼ˆç‚¹å‡»stop mysql serverï¼‰ step2ï¼š è¿›å…¥ç»ˆç«¯è¾“å…¥ï¼šcd /usr/local/mysql/bin/ å›è½¦å ç™»å½•ç®¡ç†å‘˜æƒé™ sudo su å›è½¦åè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥ç¦æ­¢mysqléªŒè¯åŠŸèƒ½ ./mysqld_safe â€“skip-grant-tables &amp; å›è½¦åmysqlä¼šè‡ªåŠ¨é‡å¯ï¼ˆåå¥½è®¾ç½®ä¸­mysqlçš„çŠ¶æ€ä¼šå˜æˆrunningï¼‰ step3. è¾“å…¥å‘½ä»¤ ./mysql å›è½¦åï¼Œè¾“å…¥å‘½ä»¤ FLUSH PRIVILEGES; å›è½¦åï¼Œè¾“å…¥å‘½ä»¤ ALTER USER â€˜rootâ€˜@â€™localhostâ€™ IDENTIFIED BY â€˜passwordâ€™;ï¼ˆä¼šæŠŠå¯†ç é‡ç½®ä¸ºpasswordï¼Œå¦‚æœæƒ³æ”¹å…¶ä»–çš„æŠŠpasswordæ›¿æ¢å³å¯ï¼‰ å®Œæ•´æ­¥éª¤å¦‚ä¸‹å›¾:","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"MySQL","slug":"MySQL","permalink":"http://puguojing.com/tags/MySQL/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"Mysqlå¸¸ç”¨pyhonæ¥å£çš„å®ç°ï¼šå¢ã€åˆ ã€æ”¹ã€æŸ¥","slug":"Mysqlå¸¸ç”¨pyhonæ¥å£çš„ä»£ç å®ç°","date":"2018-08-28T15:20:31.000Z","updated":"2018-11-06T03:16:56.776Z","comments":true,"path":"2018/08/28/Mysqlå¸¸ç”¨pyhonæ¥å£çš„ä»£ç å®ç°/","link":"","permalink":"http://puguojing.com/2018/08/28/Mysqlå¸¸ç”¨pyhonæ¥å£çš„ä»£ç å®ç°/","excerpt":"","text":"ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210#!/usr/bin/python3# -*- coding:utf-8 -*-import pymysql&quot;&quot;&quot;å‡½æ•°ï¼šCreateDatabase(Database_name)åŠŸèƒ½ï¼šåˆ›å»ºæ•°æ®åº“å‚æ•°ï¼šDatabase_nameï¼šè¦åˆ›å»ºçš„æ•°æ®åº“å&quot;&quot;&quot;def CreateDatabase(Database_name): db = pymysql.connect(host=&apos;localhost&apos;,user=&apos;root&apos;,password=&apos;password&apos;,port=3306) cursor = db.cursor() cursor.execute(&apos;SELECT VERSION()&apos;) data = cursor.fetchone() print(&apos;DataBase Version:&apos;,data) sql = &apos;CREATE DATABASE &#123;&#125; DEFAULT CHARACTER SET utf8&apos;.format(Database_name) try: cursor.execute(sql) except Exception as e: print(&apos;Create %s errorï¼š&apos;%(Database_name), e) db.close()&quot;&quot;&quot;å‡½æ•°ï¼šCreateTables(DataBase,table)åŠŸèƒ½ï¼šåœ¨æŒ‡å®šæ•°æ®åº“é‡Œé¢åˆ›å»ºæŒ‡å®šçš„è¡¨å‚æ•°ï¼š1.DataBaseï¼šå·²ç»åˆ›å»ºçš„æ•°æ®åº“å 2.tableï¼šè¦åˆ›å»ºçš„è¡¨å&quot;&quot;&quot;def CreateTables(DataBase,table): db = pymysql.connect(host=&apos;localhost&apos;, user=&apos;root&apos;, password=&apos;password&apos;, port=3306,db=DataBase) cursor = db.cursor() sql = &apos;CREATE TABLE IF NOT EXISTS &#123;&#125; (id VARCHAR(255) NOT NULL,user_name VARCHAR(255) NOT NULL, age INT NOT NULL, PRIMARY KEY (id))&apos;.format(table) try: cursor.execute(sql) except Exception as e: print(&apos;%s Create %s errorï¼š&apos;%(DataBase,table),e) db.close()&quot;&quot;&quot;å‡½æ•°ï¼šInsert(DataBase,table,data)åŠŸèƒ½ï¼šåœ¨æŸä¸€æ•°æ®åº“çš„æŒ‡å®šè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®,å¦‚æœè¯¥æ•°æ®çš„keyå·²ç»å­˜åœ¨åˆ™ä¼šæ’å…¥å¤±è´¥å‚æ•°ï¼š1.DataBaseï¼šå·²ç»åˆ›å»ºçš„æ•°æ®åº“å 2.tableï¼šè¦åˆ›å»ºçš„è¡¨å 3.dataï¼šè¦æ’å…¥çš„æ•°æ®ï¼Œå­—å…¸ç±»å‹æ¯”å¦‚ï¼š data = &#123; &apos;id&apos;:&apos;20180001&apos;, &apos;user_name&apos;:&apos;Bob&apos;, &apos;age&apos;:20 &#125;&quot;&quot;&quot;def Insert(DataBase,table,data): db = pymysql.connect(host=&apos;localhost&apos;, user=&apos;root&apos;, password=&apos;password&apos;, port=3306, db=DataBase) cursor = db.cursor() keys = &apos;,&apos;.join(data.keys())#-&gt;id,user_name,age values = &apos;,&apos;.join([&apos;%s&apos;] * len(data))#[&apos;a&apos;]*4 -&gt; [a,a,a,a] &apos;,&apos;.join([a,a,a,a])-&gt;&apos;a,a,a,a&apos; sql = &apos;INSERT INTO &#123;t&#125; (&#123;k&#125;) VALUES(&#123;v&#125;)&apos;.format(t=table,k=keys,v=values)#ä½¿ç”¨formæ ¼å¼åŒ–ç»“æœï¼šINSERT INTO students (id,user_name,age) VALUES(%s,%s,%s) print(sql) try: cursor.execute(sql, tuple(data.values())) db.commit() except Exception as e: print(&quot;insert error&quot;, e) db.rollback() db.close()&quot;&quot;&quot;å‡½æ•°ï¼šUpdate(Database,table,data)åŠŸèƒ½ï¼šæ ¹æ®keyæ›´æ–°æŸä¸€æ•°æ®åº“çš„æŒ‡å®šè¡¨ä¸­çš„æŸä¸€æ¡æ•°æ®ï¼Œå¦‚æœkeyå­˜åœ¨åœ¨æ›´æ–°æ•°æ®ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥æ•°æ®å‚æ•°ï¼š1.DataBaseï¼šå·²ç»åˆ›å»ºçš„æ•°æ®åº“å 2.tableï¼šè¦åˆ›å»ºçš„è¡¨å 3.dataï¼šè¦æ›´æ–°æˆ–æ’å…¥çš„æ•°æ®ï¼Œå­—å…¸ç±»å‹æ¯”å¦‚ï¼š data = &#123; &apos;id&apos;:&apos;20180002&apos;, &apos;user_name&apos;:&apos;lio&apos;, &apos;age&apos;:22 &#125;&quot;&quot;&quot;def Update(Database,table,data): &quot;&quot;&quot; data = &#123; &apos;id&apos;:&apos;20180001&apos;, &apos;user_name&apos;:&apos;Bob&apos;, &apos;age&apos;:20 &#125; &quot;&quot;&quot; # table = &apos;students&apos; db = pymysql.connect(host=&apos;localhost&apos;, user=&apos;root&apos;, password=&apos;password&apos;, port=3306, db=Database) cursor = db.cursor() keys = &apos;,&apos;.join(data.keys()) # -&gt;id,user_name,age values = &apos;,&apos;.join([&apos;%s&apos;] * len(data)) # [&apos;a&apos;]*4 -&gt; [a,a,a,a] &apos;,&apos;.join([a,a,a,a])-&gt;&apos;a,a,a,a&apos; sql = &apos;INSERT INTO &#123;t&#125; (&#123;k&#125;) VALUES(&#123;v&#125;) ON DUPLICATE KEY UPDATE&apos;.format(t=table, k=keys, v=values) # ä½¿ç”¨formatæ ¼å¼åŒ–INSERT INTO students (id,user_name,age) VALUES(%s,%s,%s) ON DUPLICATE KEY UPDATE update = &apos;,&apos;.join(&apos; &#123;key&#125; = %s&apos;.format(key=key) for key in data) #æ³¨æ„å‰é¢æœ‰ç©ºæ ¼ï¼Œç»“æœï¼š&apos; id = %s,user_name = %s,age = %s&apos; #ON DUPLICATE KEY UPDATE è¡¨ç¤ºå¦‚æœä¸»é”®å­˜åœ¨å°±æ‰§è¡ŒUPDATE è€Œä¸æ˜¯æ’å…¥ sql += update #ç»“æœï¼šINSERT INTO students (id,user_name,age) VALUES(%s,%s,%s) ON DUPLICATE KEY UPDATE id = %s, user_name = %s, age = %s try: cursor.execute(sql, tuple(data.values())*2)#ä½¿ç”¨äº†2æ¬¡å€¼ï¼Œå…±6ä¸ª%s db.commit() except Exception as e: print(&quot;insert error&quot;, e) db.rollback() db.close()&quot;&quot;&quot;å‡½æ•°ï¼šDelete(Database,table,condition):åŠŸèƒ½ï¼šæ ¹æ®æŒ‡å®šæ¡ä»¶åˆ é™¤æ•°æ®åº“æŸè¡¨ä¸­çš„æ»¡è¶³æ¡ä»¶çš„æ•°æ®å‚æ•°ï¼š1.DataBaseï¼šå·²ç»åˆ›å»ºçš„æ•°æ®åº“å 2.tableï¼šè¦åˆ›å»ºçš„è¡¨å 3.conditionï¼šæŒ‡å®šçš„SQLè¯­å¥æ¡ä»¶ï¼Œæ¯”å¦‚ï¼š&apos;age &gt; 20&apos;,è¡¨ç¤ºåˆ é™¤æ‰€æœ‰ ageå­—æ®µçš„å€¼å¤§äº20çš„æ•°æ®&quot;&quot;&quot;def Delete(Database,table,condition): db = pymysql.connect(host=&apos;localhost&apos;, user=&apos;root&apos;, password=&apos;password&apos;, port=3306, db=Database) cursor = db.cursor() sql = &apos;DELETE FROM &#123;tables&#125; WHERE &#123;conditions&#125;&apos;.format(tables=table,conditions=condition) try: cursor.execute(sql) db.commit() except Exception as e: print(&quot;insert error&quot;, e) db.rollback() db.close()&quot;&quot;&quot;å‡½æ•°ï¼šSelect(Database,table,condition)åŠŸèƒ½ï¼šä»æ•°æ®åº“æŸè¡¨ä¸­æ ¹æ®æŒ‡å®šæ¡ä»¶æŸ¥è¯¢çš„æ»¡è¶³æ¡ä»¶çš„æ•°æ®å‚æ•°ï¼š1.DataBaseï¼šå·²ç»åˆ›å»ºçš„æ•°æ®åº“å 2.tableï¼šè¦åˆ›å»ºçš„è¡¨å 3.conditionï¼šæŒ‡å®šçš„SQLè¯­å¥æ¡ä»¶ï¼Œæ¯”å¦‚ï¼š&apos;age &gt; 20&apos;,è¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰ageå­—æ®µçš„å€¼å¤§äº20çš„æ•°æ®è¿”å›å€¼ï¼šåˆ—è¡¨ï¼Œå­˜å‚¨æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„ä¿¡æ¯ï¼Œåˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ æ˜¯ä¸€æ¡ä¿¡æ¯ï¼Œç”¨å…ƒç»„å°è£…ã€‚&quot;&quot;&quot;def Select(Database,table,condition): db = pymysql.connect(host=&apos;localhost&apos;, user=&apos;root&apos;, password=&apos;password&apos;, port=3306, db=Database) cursor = db.cursor() sql = &apos;SELECT * FROM &#123;tablses&#125; WHERE &#123;conditions&#125;&apos;.format(tablses=table,conditions=condition) result = [] try: cursor.execute(sql) row = cursor.fetchone()#rowæ˜¯ä»¥å…ƒç»„è¿”å›ï¼Œrowï¼š (&apos;20180001&apos;, &apos;Bob&apos;, 20) while row: result.append(row) row=cursor.fetchone() except Exception as e: print(&quot;SELECT error&quot;, e) db.close() return resultdef main(): CreateDatabase(&apos;test_db&apos;) CreateTables(&apos;test_db&apos;,&apos;test_db_table_1&apos;) data = &#123; &apos;id&apos;:&apos;20180004&apos;, &apos;user_name&apos;:&apos;jack&apos;, &apos;age&apos;:22 &#125; Insert(&apos;test_db&apos;,&apos;test_db_table_1&apos;,data) data = &#123; &apos;id&apos;:&apos;20180004&apos;, &apos;user_name&apos;:&apos;jack&apos;, &apos;age&apos;:25 &#125; Update(&apos;test_db&apos;,&apos;test_db_table_1&apos;,data) #Delete(&apos;test_db&apos;,&apos;test_db_table_1&apos;,&apos;age &gt; 21&apos;) result= Select(&apos;test_db&apos;,&apos;test_db_table_1&apos;,&apos;age &gt; 19&apos;) print(result)if __name__ == &apos;__main__&apos;: main()","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"MySQL","slug":"MySQL","permalink":"http://puguojing.com/tags/MySQL/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"Mysql  InnoDBå­˜å‚¨å¼•æ“ï¼ˆ1ï¼‰","slug":"Mysql  InnoDBå­˜å‚¨å¼•æ“ï¼ˆ1ï¼‰","date":"2018-08-28T15:20:31.000Z","updated":"2018-12-11T11:21:05.274Z","comments":true,"path":"2018/08/28/Mysql  InnoDBå­˜å‚¨å¼•æ“ï¼ˆ1ï¼‰/","link":"","permalink":"http://puguojing.com/2018/08/28/Mysql  InnoDBå­˜å‚¨å¼•æ“ï¼ˆ1ï¼‰/","excerpt":"","text":"Mysql æ¦‚è¿°(ä¸€)mysqlå¸¸è§çš„å­˜å‚¨å¼•æ“ï¼š1.InnoDBå­˜å‚¨å¼•æ“è¡Œé”ã€å¤–é”®ã€äº‹åŠ¡ã€æ”¯æŒéé”å®šè¯»æ“ä½œï¼Œå³é»˜è®¤åº¦æ“ä½œä¸ä¼šäº§ç”Ÿé”ã€‚ 2.MyISAMå­˜å‚¨å¼•æ“ä¸æ”¯æŒäº‹åŠ¡ã€ä¸æ”¯æŒè¡¨é”è®¾è®¡ã€æ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚ 3.NDBå­˜å‚¨å¼•æ“æ˜¯é›†ç¾¤å­˜å‚¨å¼•æ“ï¼Œæœ‰å¤šä¸ªNDBæ•°æ®å­˜å‚¨èŠ‚ç‚¹ï¼Œå¾ˆå¤šé›†ç¾¤ä¼šé‡‡ç”¨ã€‚ä½†é€‚åˆå­˜å‚¨å…ƒæ•°æ®ï¼Œä»¥åŠé’ˆå¯¹ä¸»é”®çš„æŸ¥è¯¢ï¼Œä¸é€‚åˆåšæœ‰å¤æ‚joinçš„æ•°æ®ï¼Œå› ä¸ºåœ¨å¤æ‚å…³è”æ“ä½œçš„æ—¶å€™ä¼šäº§ç”Ÿå¤§é‡çš„ç½‘ç»œIOå»¶è¿Ÿï¼ˆå› ä¸ºå…¶joinæ“ä½œæ˜¯åœ¨æ•°æ®åº“å±‚é¢å®Œæˆçš„è€Œä¸æ˜¯åœ¨å¼•æ“å±‚ï¼‰ï¼Œæ‰€ä»¥éœ€è¦å…³è”çš„æ•°æ®å°½é‡æ”¾åœ¨åŒä¸€ä¸ªæ•°æ®èŠ‚ç‚¹ã€‚ 4.Memoryå­˜å‚¨å¼•æ“æ•°æ®æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ–­ç”µæ¶ˆå¤±ï¼Œåˆæ¥æ”¾ä¸´æ—¶ç¼“å­˜ï¼Œé€Ÿåº¦æå¿«ï¼Œåªæ”¯æŒè¡¨é”ã€‚ 5.Archiveå­˜å‚¨å¼•æ“ä¸€èˆ¬ç”¨æ¥å­˜å‚¨å½’æ¡£æ•°æ®å’Œæ—¥å¿—ï¼Œå¼•ç”¨zlibç®—æ³•å°†æ•°æ®è¡Œè¿›è¡Œå‹ç¼©å­˜å‚¨ï¼Œå‹ç¼©æ¯”10ï¼š1ï¼Œåªæ”¯æŒinsertå’Œselect. 6.Federatedå­˜å‚¨å¼•æ“è¡¨ä¸å­˜æ”¾æ•°æ®ï¼ŒæŒ‡å‘è¿œç¨‹çš„MysqlæœåŠ¡å™¨ã€‚ 7.Mariaå­˜å‚¨å¼•æ“ä¸»è¦ç”¨æ¥å–ä»£MyISAMï¼Œæ”¯æŒç¼“å­˜æ•°æ®ï¼Œå’Œç´¢å¼•ï¼Œåº”ç”¨äº†è¡Œé”è®¾è®¡ï¼Œæ”¯æŒäº‹åŠ¡éäº‹åŠ¡ï¼Œæ”¯æŒæ›´å¥½çš„Blobï¼ˆäºŒè¿›åˆ¶ï¼‰ç±»å‹å¤„ç†æ€§èƒ½ã€‚ 8.å…¶ä»–å­˜å‚¨å¼•æ“Mergeã€CSVã€Sphinxå’ŒInfobrightç­‰ã€‚ æŸ¥çœ‹å¼•æ“å¯ä»¥ä½¿ç”¨ 1show engines; æŸ¥çœ‹mysqlæ•°æ®åº“å¼•æ“","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://puguojing.com/tags/æ•°æ®åº“/"},{"name":"InnoDB","slug":"InnoDB","permalink":"http://puguojing.com/tags/InnoDB/"},{"name":"MySQL","slug":"MySQL","permalink":"http://puguojing.com/tags/MySQL/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"æ•°æ®åº“","slug":"æŠ€æœ¯/æ•°æ®åº“","permalink":"http://puguojing.com/categories/æŠ€æœ¯/æ•°æ®åº“/"}]},{"title":"pythonçˆ¬è™«-çˆ¬å–è±†ç“£ä¹¦ç±ï¼ˆ1ï¼‰","slug":"pythonçˆ¬è™«-çˆ¬å–è±†ç“£ä¹¦ç±ï¼ˆ1ï¼‰","date":"2018-08-26T06:10:20.000Z","updated":"2018-11-06T03:19:03.116Z","comments":true,"path":"2018/08/26/pythonçˆ¬è™«-çˆ¬å–è±†ç“£ä¹¦ç±ï¼ˆ1ï¼‰/","link":"","permalink":"http://puguojing.com/2018/08/26/pythonçˆ¬è™«-çˆ¬å–è±†ç“£ä¹¦ç±ï¼ˆ1ï¼‰/","excerpt":"","text":"æœ¬ç¯‡è®°å½•ä½¿ç”¨Requests + Xpathçˆ¬å–è±†ç“£ä¹¦ç± 1.RequestsRequestsæ˜¯pythonçš„ä¸€ä¸ªHTTPåº“ï¼Œé‡Œé¢åŒ…å«äº†å¸¸è§çš„ä¸€äº›HTTPæ“ä½œï¼Œä¸‹é¢æ˜¯Requestså¸¸ç”¨çš„ä¸ƒç§æ–¹æ³•ï¼š æ–¹æ³• è¯´æ˜ requests.request() æ„é€ ä¸€ä¸ªè¯·æ±‚ï¼Œæ”¯æ’‘ä»¥ä¸‹æ–¹æ³•çš„åŸºç¡€æ–¹æ³• requests.get() è·å–HTMLç½‘é¡µçš„ä¸»è¦æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„GET requests.head() è·å–HTMLç½‘é¡µçš„ä¿¡æ¯å¤´çš„æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„HEAD requests.post() å‘HTMLç½‘é¡µæäº¤POSTè¯·æ±‚çš„æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„POST requests.put() å‘HTMLç½‘é¡µæäº¤PUTè¯·æ±‚çš„æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„PUT requests.patch() å‘HTMLç½‘é¡µæäº¤å±€éƒ¨ä¿®æ”¹è¯·æ±‚çš„æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„PATCH requests.delete() å‘HTMLç½‘é¡µæäº¤è¯·åˆ é™¤æ±‚çš„æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„DELETE æˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±æ˜¯request.get()æ–¹æ³•ã€‚ Requests.get()çš„ç”¨æ³•12import requests#å¯¼å…¥Requestsåº“r = requests.get(url)#ä½¿ç”¨getæ–¹æ³•å‘é€è¯·æ±‚ï¼Œè¿”å›åŒ…å«ç½‘é¡µæ•°æ®çš„Responseå¹¶å­˜å‚¨åˆ°å¯¹è±¡rä¸­ Responseå¯¹è±¡çš„å±æ€§r.statues.code: httpè¯·æ±‚çš„è¿”å›çŠ¶æ€ï¼Œ200è¡¨ç¤ºè¿æ¥æˆåŠŸï¼Œ404è¡¨ç¤ºè¿æ¥å¤±è´¥ r.textï¼šhttpå“åº”å†…å®¹çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œurlå¯¹åº”çš„é¡µé¢å†…å®¹ r.encodingï¼šä»HTTP headerä¸­çŒœæµ‹çš„å“åº”å†…å®¹ç¼–ç æ–¹å¼ r.apparent_encodingï¼šä»å†…å®¹åˆ†æå‡ºçš„å“åº”å†…å®¹çš„ç¼–ç æ–¹å¼ï¼ˆå¤‡é€‰ç¼–ç æ–¹å¼ï¼‰ r.content:HTTPå“åº”å†…å®¹çš„äºŒè¿›åˆ¶å½¢å¼ r.headersï¼šhttpå“åº”å†…å®¹çš„å¤´éƒ¨å†…å®¹ 123456789resp.textè¿”å›çš„æ˜¯Unicodeå‹çš„æ•°æ®ã€‚resp.contentè¿”å›çš„æ˜¯byteså‹ä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ æƒ³å–æ–‡æœ¬ï¼Œå¯ä»¥é€šè¿‡r.textã€‚å¦‚æœæƒ³å–å›¾ç‰‡ï¼Œæ–‡ä»¶ï¼Œåˆ™å¯ä»¥é€šè¿‡r.contentã€‚ï¼ˆresp.json()è¿”å›çš„æ˜¯jsonæ ¼å¼æ•°æ®ï¼‰ æŸ¥çœ‹Requesteså¼€å‘æ–‡æ¡£ Xpathxpathå³ä¸ºXMLè·¯å¾„è¯­è¨€ï¼ˆXML Path Languageï¼‰ï¼Œä»–æ˜¯ä¸€ç§ç”¨æ¥ç¡®å®šXMLæ–‡æ¡£ä¸­æŸéƒ¨åˆ†ä½ç½®çš„è¯­è¨€ã€‚XpathåŸºäºXMLçš„æ ‘çŠ¶ç»“æ„ï¼Œæä¾›åœ¨æ•°æ®ç»“æ„æ ‘ä¸­æ‰¾å¯»èŠ‚ç‚¹çš„èƒ½åŠ›ã€‚èµ·åˆXpathçš„æå‡ºåˆè¡·æ˜¯å°†å…¶åšä¸ºä¸€ä¸ªé€šç”¨çš„ã€ä»‹äºXpointerä¸XSLé—´çš„è¯­æ³•æ¨¡å‹ï¼Œä½†æ˜¯å¾ˆå¿«Xpathè¢«å¼€å‘è€…é‡‡ç”¨æ¥å½“ä½œå°å‹çš„æŸ¥è¯¢è¯­è¨€ã€‚ Xpathè§£æç½‘é¡µçš„æµç¨‹1.é¦–å…ˆé€šè¿‡Requestsåº“è·å–ç½‘é¡µæ•°æ®ã€‚2.é€šè¿‡ç½‘é¡µè§£æå¾—åˆ°æƒ³è¦çš„æ•°æ®æˆ–è€…æ–°çš„é“¾æ¥ã€‚3.ç½‘é¡µè§£æå¯ä»¥é€šè¿‡Xpathæˆ–è€…å…¶ä»–çš„è§£æå·¥å…·è¿›è¡Œã€‚Xpathï¼Œæ˜¯ä¸€ä¸ªéå¸¸å‹å¥½çš„ç½‘é¡µè§£æå·¥å…·ã€‚ lxmlåº“lxmlåº“ç»“åˆlibxml2å¿«é€Ÿå¼ºå¤§çš„ç‰¹æ€§ï¼Œä½¿ç”¨xpathè¯­æ³•æ¥è¿›è¡Œæ–‡ä»¶æ ¼å¼è§£æï¼Œä¸Beautifulç›¸æ¯”ï¼Œæ•ˆç‡æ›´é«˜ã€‚ å®‰è£…1pip install lxml ä½¿ç”¨123from lxml import etree #å¯¼å…¥åº“data = requests.get(url).text#è·å–ç½‘é¡µå†…å®¹s = etree.HTML(data)#è§£æç½‘é¡µèŠ‚ç‚¹ ä»£ç ï¼š 1234567891011121314151617181920def craw_douban_book_top250(): msg_num = 0 #æ•°é‡ç»Ÿè®¡ for page in range(10): #æ ¹æ®å¯¹ç½‘ç«™åˆ†æï¼Œæ¯é¡µæœ‰25æ¡ä¿¡æ¯ï¼Œæ‰€æœ‰çˆ¬å–10é¡µå…±250æ¡ url = &apos;https://book.douban.com/top250?start=&#123;&#125;&apos;.format(page*25)#æ¯é¡µçš„urlåœ°å€æœ€ååˆšå¥½å·®25 data = requests.get(url).text #è·å–ç½‘é¡µçš„å†…å®¹ s = etree.HTML(data) #è§£æHTMLèŠ‚ç‚¹è½¬æ¢æˆå¯¹è±¡ divs = s.xpath(&apos;//*[@id=&quot;content&quot;]/div/div[1]/div/table&apos;) #æ¯ä¸€æœ¬ä¹¦ç±æœ€å¤–éƒ¨çš„èŠ‚ç‚¹ for div in divs: msg_num += 1 title = div.xpath(&apos;./tr/td[2]/div[1]/a/@title&apos;)[0]#ä»æœ€å¤–éƒ¨èŠ‚ç‚¹æ‰¾åˆ°ä¹¦ç±åï¼Œåé¢åŠ [0]æ˜¯å¼•ç”¨åˆ—è¡¨å…ƒç´ ã€‚ href = div.xpath(&apos;./tr/td[2]/div[1]/a/@href&apos;)[0]#ä»æœ€å¤–éƒ¨èŠ‚ç‚¹æ‰¾åˆ°ä¹¦ç±è¯¦ç»†é“¾æ¥ score = div.xpath(&apos;./tr/td[2]/div[2]/span[2]/text()&apos;)[0]#ä»æœ€å¤–éƒ¨èŠ‚ç‚¹æ‰¾åˆ°ä¹¦ç±è¯„åˆ† score_people_num = div.xpath(&apos;./tr/td[2]/div[2]/span[3]/text()&apos;)[0]\\ .strip(&quot;(&quot;).strip().strip(&quot;)&quot;)#ä»æœ€å¤–éƒ¨èŠ‚ç‚¹æ‰¾åˆ°ä¹¦ç±è¯„ä»·äººæ•°ï¼Œå¹¶å»é™¤å·¦å³ä¸¤è¾¹çš„æ‹¬å·å’Œä¸­é—´çš„ç©ºæ ¼ print(&quot;&#123;&#125;: &#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125;&quot;.format(msg_num, title, href, score, score_people_num)) time.sleep(1)#é˜²æ­¢æŠ“å–ä¿¡æ¯è¿‡äºé¢‘ç¹å¯¼è‡´IPè¢«å°åŠå°½é‡ä¸å½±å“åˆ«äººçš„ç½‘ç«™ é€šè¿‡å¯¹è±†ç“£TOP250ä¹¦ç±çš„urlåˆ†æå¯¹æ¯”å¦‚ä¸‹ï¼š 12345&lt;a href=&quot;https://book.douban.com/top250?start=25&quot;&gt;2&lt;/a&gt;&lt;a href=&quot;https://book.douban.com/top250?start=50&quot;&gt;3&lt;/a&gt;&lt;a href=&quot;https://book.douban.com/top250?start=75&quot;&gt;4&lt;/a&gt;&lt;a href=&quot;https://book.douban.com/top250?start=100&quot;&gt;5&lt;/a&gt;.... æˆ‘ä»¬å‘ç°åŒºåˆ«å°±åœ¨äºæœ€åâ€start=â€çš„æ•°å€¼æ¯æ¬¡ç›¸å·®25ï¼Œæ‰€ä»¥ å¯ä»¥ä½¿ç”¨ï¼š 12for page in range(10): 10é¡µå…±250æ¡ url = &apos;https://book.douban.com/top250?start=&#123;&#125;&apos;.format(page*25) æ¥è·å–ç½‘é¡µåœ°å€ã€‚ æˆ‘ä»¬åœ¨è·å–æ¯ä¸€æœ¬ä¹¦çš„Xpathçš„æ—¶å€™ä¹Ÿå‘ç°ç›¸åº”çš„è§„å¾‹ï¼Œæ¯”å¦‚ç¬¬ä¸€æœ¬ä¹¦ï¼š 1234ä¹¦ç±çš„Xpathï¼šâ€˜//*[@id=&quot;content&quot;]/div/div[1]/div/table[1]/tbody/tr/td[2]â€™ä¹¦åçš„Xpath: &apos;//*[@id=&quot;content&quot;]/div/div[1]/div/table[1]/tbody/tr/td[2]/div[1]/a&apos;è¯„åˆ†çš„Xpathï¼šâ€˜//*[@id=&quot;content&quot;]/div/div[1]/div/table[1]/tbody/tr/td[2]/div[2]/span[2]â€™äººæ•°çš„Xpathï¼šâ€˜//*[@id=&quot;content&quot;]/div/div[1]/div/table[1]/tbody/tr/td[2]/div[2]/span[3]â€™ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„æ˜¯ä¹¦åã€è¯„åˆ†ã€äººæ•°çš„Xpathéƒ½æ˜¯åœ¨æ•´æœ¬ä¹¦çš„Xpath=â€˜//*[@id=&quot;content&quot;]/div/div[1]/div/table[1]/tbody/tr/td[2]â€™çš„åŸºç¡€ä¸Šåœ¨å¤šåŠ ä¸€ç‚¹å†…å®¹ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š 123456789divs = s.xpath(&apos;//*[@id=&quot;content&quot;]/div/div[1]/div/table&apos;) #æ¯ä¸€æœ¬ä¹¦ç±æœ€å¤–éƒ¨çš„èŠ‚ç‚¹ for div in divs: msg_num += 1 title = div.xpath(&apos;./tr/td[2]/div[1]/a/@title&apos;)[0]#ä»æœ€å¤–éƒ¨èŠ‚ç‚¹æ‰¾åˆ°ä¹¦ç±å href = div.xpath(&apos;./tr/td[2]/div[1]/a/@href&apos;)[0]#ä»æœ€å¤–éƒ¨èŠ‚ç‚¹æ‰¾åˆ°ä¹¦ç±è¯¦ç»†é“¾æ¥ score = div.xpath(&apos;./tr/td[2]/div[2]/span[2]/text()&apos;)[0]#ä»æœ€å¤–éƒ¨èŠ‚ç‚¹æ‰¾åˆ°ä¹¦ç±è¯„åˆ† score_people_num = div.xpath(&apos;./tr/td[2]/div[2]/span[3]/text()&apos;)[0]\\ .strip(&quot;(&quot;).strip().strip(&quot;)&quot;)#ä»æœ€å¤–éƒ¨èŠ‚ç‚¹æ‰¾åˆ°ä¹¦ç±è¯„ä»·äººæ•°ï¼Œå¹¶å»é™¤å·¦å³ä¸¤è¾¹çš„æ‹¬å·å’Œä¸­é—´çš„ç©ºæ ¼ æ¯ä¸€ä¸ªä¿¡æ¯éƒ½æ˜¯åœ¨æœ€å¤–éƒ¨çš„èŠ‚ç‚¹è·¯å¾„ä¸ŠåŠ ä¸Šæ›´è¯¦ç»†çš„è·¯å¾„ã€‚ æ³¨æ„ï¼š 1.å½“æˆ‘ä»¬å¤åˆ¶Xpathæ˜¯é‡Œé¢ä¼šæœ‰ä¸€ä¸ªâ€tbody/â€œå†…å®¹ï¼Œæˆ‘ä»¬åœ¨ä¸‹è½½æ—¶éœ€è¦æŠŠè¿™ä¸ªå†…å®¹åˆ é™¤æ‰ï¼Œä¸ç„¶æ— æ³•è·å–å¯¹åº”çš„ä¿¡æ¯ã€‚2.å…³äºåœ¨Xpathå†…å®¹ååŠ ä¸Šâ€text()â€œ,â€@titleâ€ã€â€@hrefâ€œç­‰å†…å®¹æ˜¯Xpathè¯­æ³•è¯¦è§XPathæ€»ç»“çš„å†…å®¹ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªçˆ¬å–å°çŒªçŸ­ç§Ÿå—äº¬åœ¨æŒ‡å®šæ—¶é—´å†…çš„ä¿¡æ¯ 123456789101112131415161718def Craw(): msg_num = 0 for p in range(1,6): url = &apos;http://nj.xiaozhu.com/search-duanzufang-p&#123;&#125;-0/?startDate=2018-08-27&amp;endDate=2018-09-30&apos;.format(p) data = requests.get(url).text s = etree.HTML(data) #print(data) divs = s.xpath(&apos;//*[@id=&quot;page_list&quot;]/ul/li&apos;) for div in divs: msg_num += 1 titles = div.xpath(&apos;./div[2]/div/a/span/text()&apos;)[0] details = div.xpath(&apos;./div[2]/div/em/text()&apos;)[0].strip() prices = div.xpath(&apos;./div[2]/span[1]/i/text()&apos;)[0] href = div.xpath(&apos;./a/@href&apos;)[0] time.sleep(1) print(&quot;&#123;&#125;: &#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125;&quot;.format(msg_num,titles,details,prices,href)) åŠ å…¥å­˜å‚¨æ•°æ®åˆ°æ–‡ä»¶çš„å†…å®¹ï¼š 12345678910111213141516171819202122def Craw(): msg_num = 0 with open(r&apos;/Users/pgj/Desktop/data.csv&apos;, &apos;w&apos;, encoding=&apos;utf-8&apos;) as f: for p in range(1,3): url = &apos;http://nj.xiaozhu.com/search-duanzufang-p&#123;&#125;-0/?startDate=2018-08-27&amp;endDate=2018-09-30&apos;.format(p) data = requests.get(url).text s = etree.HTML(data) #print(data) divs = s.xpath(&apos;//*[@id=&quot;page_list&quot;]/ul/li&apos;) for div in divs: msg_num += 1 titles = div.xpath(&apos;./div[2]/div/a/span/text()&apos;)[0] details = div.xpath(&apos;./div[2]/div/em/text()&apos;)[0].strip() prices = div.xpath(&apos;./div[2]/span[1]/i/text()&apos;)[0] href = div.xpath(&apos;./a/@href&apos;)[0] time.sleep(1) f.write(&quot;&#123;&#125;,&#123;&#125;,&#123;&#125;,&#123;&#125;,&#123;&#125;\\n&quot;.format(msg_num,titles,details,prices,href)) print(&quot;&#123;&#125;: &#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125;&quot;.format(msg_num,titles,details,prices,href))Craw()","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"çˆ¬è™«","slug":"æŠ€æœ¯/çˆ¬è™«","permalink":"http://puguojing.com/categories/æŠ€æœ¯/çˆ¬è™«/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://puguojing.com/tags/çˆ¬è™«/"},{"name":"Requests","slug":"Requests","permalink":"http://puguojing.com/tags/Requests/"},{"name":"Xpath","slug":"Xpath","permalink":"http://puguojing.com/tags/Xpath/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"çˆ¬è™«","slug":"æŠ€æœ¯/çˆ¬è™«","permalink":"http://puguojing.com/categories/æŠ€æœ¯/çˆ¬è™«/"}]},{"title":"é¡¹ç›®-learning-logï¼ˆ2ï¼‰","slug":"é¡¹ç›®-learning-logï¼ˆ2ï¼‰","date":"2018-08-23T08:47:12.000Z","updated":"2018-11-06T03:16:18.859Z","comments":true,"path":"2018/08/23/é¡¹ç›®-learning-logï¼ˆ2ï¼‰/","link":"","permalink":"http://puguojing.com/2018/08/23/é¡¹ç›®-learning-logï¼ˆ2ï¼‰/","excerpt":"","text":"&#8195;&#8195; ç”¨æˆ·è´¦æˆ· æ­¤å¤„åªè®°å½•åœ¨é¡¹ç›®ä¸­å®ç°ç™»å½•åŠŸèƒ½æ—¶é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•ã€‚ 3. åˆ›å»ºç”¨æˆ·è´¦æˆ· 3.2 ç™»é™†é¡µé¢ æ­¤å¤„ä¸ä¹¦ä¸­ä¸åŒï¼Œä¹¦ä¸­ä½¿ç”¨Djangoæä¾›çš„é»˜è®¤ç™»é™†è§†å›¾ï¼Œè€Œæ­¤å¤„åˆ™æ˜¯è‡ªå·±å®ç°loginç™»å½•è§†å›¾ã€‚åœ¨usersä¸­çš„urls.pyä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345678urlpatterns = [ # ç™»é™†é¡µé¢ #path(&quot;login/&quot;, login, &#123;&quot;template_name&quot;: &quot;users/login.html&quot;&#125;, name=&quot;login&quot;), path(&apos;login/&apos;, views.login_view,name=&quot;login&quot;), path(&quot;logout/&quot;, views.logout_view, name=&quot;logout&quot;), path(&quot;register/&quot;, views.register, name=&quot;register&quot;),] åŸæ–‡ä¸­ä½¿ç”¨viewsä¸­è‡ªå¸¦çš„loginï¼Œä½†æ˜¯æˆ‘çš„Djangoç‰ˆæœ¬æ˜¯2.1ã€‚viewsä¸­æ²¡æœ‰loginï¼Œäºæ˜¯è‡ªå·±åœ¨viewä¸­å®ç°loginã€‚views.PYä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122from django.shortcuts import render, redirect, reversefrom django.contrib.auth import authenticate,login,logoutfrom django.http import HttpResponseRedirectfrom django.contrib.auth.forms import UserCreationFormdef login_view(request): if request.method == &apos;GET&apos;: return render(request, &apos;users/login.html&apos;) username = request.POST.get(&apos;username&apos;, &apos;&apos;) password = request.POST.get(&apos;password&apos;, &apos;&apos;) user = authenticate(request, username=username, password=password) if user is not None: login(request, user) return redirect(reverse(&apos;learning_logs:index&apos;)) else: return render(request, &apos;users/login.html&apos;, &#123; &apos;username&apos;: username, &apos;password&apos;: password, &#125;) login.htmlå¦‚ä¸‹ï¼š 12345678910111213141516&#123;% extends &quot;learning_logs/base.html&quot; %&#125;&#123;% block content %&#125; &lt;form action=&quot;&#123;% url &apos;users:login&apos; %&#125;&quot; method=&quot;post&quot;&gt; &#123;% csrf_token %&#125; &#123;&#123; form.as_p &#125;&#125; &lt;input type=&quot;text&quot; id=&quot;username&quot; name=&quot;username&quot; value=&quot;&#123;&#123; username &#125;&#125;&quot; class=&quot;form-control&quot; placeholder=&quot;ç”¨æˆ·å&quot; required autofocus&gt; &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; value=&quot;&#123;&#123; password &#125;&#125;&quot; class=&quot;form-control&quot; placeholder=&quot;å¯†ç &quot; required&gt; &lt;button type=&quot;submit&quot;&gt;ç™»å½•&lt;/button&gt; &lt;/form&gt;&#123;% endblock %&#125; æ­¤å¤„ç™»å½•ç•Œé¢å®Œæˆã€‚ å…¶å®ƒå†…å®¹è¯·å‚è€ƒ:åŸæ–‡é“¾æ¥","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é¡¹ç›®","slug":"æŠ€æœ¯/é¡¹ç›®","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é¡¹ç›®/"}],"tags":[{"name":"Django","slug":"Django","permalink":"http://puguojing.com/tags/Django/"},{"name":"Webæ¡†æ¶","slug":"Webæ¡†æ¶","permalink":"http://puguojing.com/tags/Webæ¡†æ¶/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é¡¹ç›®","slug":"æŠ€æœ¯/é¡¹ç›®","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é¡¹ç›®/"}]},{"title":"é¡¹ç›®-learning-logï¼ˆ1ï¼‰","slug":"é¡¹ç›®-learning-logï¼ˆ1ï¼‰","date":"2018-08-23T05:51:18.000Z","updated":"2018-11-06T03:16:10.216Z","comments":true,"path":"2018/08/23/é¡¹ç›®-learning-logï¼ˆ1ï¼‰/","link":"","permalink":"http://puguojing.com/2018/08/23/é¡¹ç›®-learning-logï¼ˆ1ï¼‰/","excerpt":"","text":"&#8195;&#8195; ã€ŠPythonç¼–ç¨‹ï¼šä»å…¥é—¨åˆ°å®è·µã€‹ç¬”è®°ã€‚è®°ä¸€æ¬¡å®Œæˆä¸€ä¸ªâ€œå­¦ä¹ ç¬”è®°â€çš„å°ç½‘ç«™ã€‚ 1. å‰è¨€ åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†ï¼š ç”¨Djangoæ¥å¼€å‘ä¸€ä¸ªåä¸ºâ€œå­¦ä¹ ç¬”è®°â€(Learning Log)çš„é¡¹ç›®ï¼› ä¸ºè¿™ä¸ªé¡¹ç›®åˆ¶å®šè§„èŒƒï¼Œç„¶åä¸ºåº”ç”¨ç¨‹åºä½¿ç”¨çš„æ•°æ®å®šä¹‰æ¨¡å‹ï¼› ä½¿ç”¨Djangoçš„ç®¡ç†ç³»ç»Ÿæ¥è¾“å…¥ä¸€äº›åˆè¯•æ•°æ®ï¼Œå†å­¦ä¹ ç¼–å†™è§†å›¾å’Œæ¨¡æ¿ï¼Œè®©Djangoèƒ½å¤Ÿä¸ºæˆ‘ä»¬çš„ç½‘ç«™åˆ›å»ºç½‘é¡µã€‚ &#8195;&#8195;ä¸è¿‡åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·å…ˆæ–°å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…Djangoã€‚å¦‚æœæ²¡æœ‰è™šæ‹Ÿç¯å¢ƒï¼Œé€šè¿‡pipå®‰è£…çš„æ‰€æœ‰åº“éƒ½ä¼šä¿å­˜åˆ°pythonçš„site-packagesç›®å½•ä¸‹ã€‚å¼€å‘å¤šä¸ªé¡¹ç›®æ—¶ï¼Œéƒ½ä¼šç”¨åŒä¸€ä¸ªpythonï¼Œè€ŒæŸäº›é¡¹ç›®å¹¶ä¸éœ€è¦å…¶ä¸­çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“ï¼Œä½†å¦‚æœå°†è¿™äº›ä¸éœ€è¦åº“çš„åˆ é™¤ï¼Œåˆä¼šå½±å“åˆ°å…¶ä»–é¡¹ç›®ã€‚è€Œä¸”ï¼Œå¦‚æœAé¡¹ç›®éœ€è¦Django2.0.4ï¼ŒBé¡¹ç›®éœ€è¦Django2.0.0ï¼Œè¿™è¯¥æ€ä¹ˆåŠï¼Ÿæ­¤æ—¶å°±éœ€è¦è™šæ‹Ÿç¯å¢ƒã€‚å®ƒå…¶å®å°±ç›¸å½“äºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œå°†æ–°é¡¹ç›®ä¸å…¶ä»–é¡¹ç›®éš”ç¦»ï¼Œæœ¬é¡¹ç›®çš„åº“ä¸ä¸å…¶ä»–é¡¹ç›®çš„åº“ç›¸å…³è”ï¼Œç±»ä¼¼äºæ“ä½œç³»ç»Ÿçš„å¤šç”¨æˆ·æ¦‚å¿µã€‚ å¦‚æœä½¿ç”¨çš„æ˜¯Python 3ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š python -m venv ll_env å¦‚æœè¯¥å‘½ä»¤ä¸æˆåŠŸï¼Œå¯èƒ½æ˜¯æ²¡æœ‰å®‰è£…virtualenvæ¨¡å—ï¼špip install virtualenv ç„¶ååˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š 12345678910#åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œll_envä»£è¡¨ç€è™šæ‹Ÿç¯å¢ƒåç§°virtualenv ll_env# linux:source ll_env/bin/activate# windows:ll_env\\Scripts\\activate# åœç”¨ï¼šdeactivate ç®¡ç†è™šæ‹Ÿç¯å¢ƒçš„åº“è¿˜æœ‰å¾ˆå¤šï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥åˆ°ç½‘ä¸Šæœä¸€æœã€‚ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ–°ç‰ˆçš„PyCharmï¼Œé‚£ä¹ˆå®ƒåœ¨æ–°å»ºé¡¹ç›®çš„æ—¶å€™é»˜è®¤å°±ä¼šåˆ›å»ºæ–°çš„è™šæ‹Ÿç¯å¢ƒã€‚ æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåå°±å¯ä»¥å®‰è£…Djangoäº†ï¼š pip install django 2. å»ºç«‹é¡¹ç›® 2.1 åœ¨Djangoä¸­åˆ›å»ºé¡¹ç›® 2.1.1 ç”Ÿæˆé¡¹ç›®åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 123# ä¸»è¦æœ€åæœ‰ä¸ªå®å¿ƒå¥å·ï¼# è¿™ä¸ªå¥ç‚¹è®©æ–°é¡¹ç›®ä½¿ç”¨åˆé€‚çš„ç›®å½•ç»“æ„ï¼Œè¿™æ ·å¼€å‘å®Œæˆåå¯ä»¥è½»æ¾åœ°å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°æœåŠ¡å™¨django-admin startproject learning_log . æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œå°†å¤šå‡ºä¸€ä¸ªmanage.pyæ–‡ä»¶å’Œä¸€ä¸ªlearning_logæ–‡ä»¶å¤¹ï¼Œå½“ç„¶è¿˜æœ‰æœ¬èº«çš„ä¸€ä¸ªll_envæ–‡ä»¶å¤¹ã€‚ è€Œåœ¨learning_logæ–‡ä»¶å¤¹ä¸­ï¼Œåˆæœ‰å››ä¸ªæ–‡ä»¶ï¼šinit.pyï¼Œsettings.pyï¼Œurls.pyï¼Œwsgi.pyã€‚ manage.pyæ˜¯ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼Œå®ƒæ¥æ”¶å‘½ä»¤å¹¶å°†å…¶äº¤ç»™Djangoçš„ç›¸å…³éƒ¨åˆ†å»è¿è¡Œï¼›settings.pyæŒ‡å®šDjangoå¦‚ä½•ä¸ä½ çš„ç³»ç»Ÿäº¤äº’ä»¥åŠå¦‚ä½•ç®¡ç†é¡¹ç›®ï¼Œå…¶å®å°±æ˜¯é…ç½®æ–‡ä»¶ï¼›urls.pyå‘Šè¯‰Djangoåº”åˆ›å»ºå“ªäº›ç½‘é¡µæ¥å“åº”æµè§ˆå™¨è¯·æ±‚ï¼›wsgi.pyæ˜¯web server gateway interface(WebæœåŠ¡å™¨ç½‘å…³æ¥å£)çš„ç¼©å†™ï¼Œå¸®åŠ©Djangoæä¾›å®ƒåˆ›å»ºçš„æ–‡ä»¶ã€‚è‡³äºinit.pyï¼Œå®ƒæ˜¯ä¸ªç©ºæ–‡ä»¶ï¼ŒPythonçš„æ¯ä¸ªæ¨¡å—ä¸‹å¿…é¡»è¦æœ‰è¿™ä¸ªæ–‡ä»¶ã€‚##### 2.1.2 åˆ›å»ºæ•°æ®åº“Djangoå°†å¤§éƒ¨åˆ†ä¸é¡¹ç›®ç›¸å…³çš„ä¿¡æ¯éƒ½å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ‰€æœ‰è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªä¾›Djangoä½¿ç”¨çš„æ•°æ®åº“ã€‚ä¾ç„¶æ˜¯åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼špython manage.py migrate&#8195;&#8195;åœ¨PyCharmä¸­çš„è¯ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»å·¥å…·æ Toolsä¸­çš„Run manage.py Taskï¼ˆCtrl+Alt+Rï¼‰ï¼Œåœ¨å¼¹å‡ºçš„å‘½ä»¤è¡Œä¸­ç›´æ¥è¾“å…¥åŸå‘½ä»¤ä¸­manage.pyåé¢çš„éƒ¨åˆ†ï¼Œåé¢çš„å‘½ä»¤ä¹Ÿå¯ä»¥è¿™æ ·æ‰§è¡Œï¼ˆ[appname]æ˜¯è‡ªåŠ¨æç¤ºï¼‰ã€‚&#8195;&#8195;â€migrateâ€è¿™ä¸ªå•è¯å…¶å®æ˜¯è¿ç§»çš„æ„æ€ï¼Œå¹¶ä¸æ˜¯â€œåˆ›å»º(create)â€ã€‚ä¹‹æ‰€ä»¥ä½¿ç”¨è¿™ä¸ªè¯ï¼Œæ˜¯å› ä¸ºä¸€èˆ¬å°†ä¿®æ”¹æ•°æ®åº“çš„è¿‡ç¨‹ç§°ä¸ºè¿ç§»æ•°æ®åº“ï¼ˆç¬”è€…æ•°æ®åº“å­¦å¾—æ¸£ï¼Œè¿™æ®µè§£é‡Šç›´æ¥ä»ä¹¦é‡Œç…§æ¬çš„ï¼Œå¸Œæœ›å“ªä½å¤§ç¥åœ¨ç•™è¨€åŒºè§£é‡Šä¸€æ³¢ï¼‰ã€‚å¦‚æœæ˜¯åˆšåˆ›å»ºçš„é¡¹ç›®ï¼Œå¹¶ä¸”ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œå°†ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š123456Operations to perform: Apply all migrations: admin, auth, contenttypes, sessionsRunning migrations: Applying contenttypes.0001_initial... OK -- snip -- Applying sessions.0001_initial... OKä»ç¬¬2è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼ŒDjangoå°†åˆ›å»ºå’Œä¿®æ”¹æ•°æ®åº“çœ‹åšæ˜¯å¯¹æ•°æ®åº“çš„è¿ç§»ï¼ŒApply all migrationsç¡®ä¿æ•°æ®åº“ç»“æ„ä¸å½“å‰ä»£ç åŒ¹é…ï¼ˆæ¯”å¦‚ä½ ä¿®æ”¹äº†ç±»çš„ç»“æ„ï¼Œæ·»åŠ äº†å±æ€§ï¼Œè¿™å°±ç›¸å½“äºä¿®æ”¹äº†æ•°æ®è¡¨ï¼‰ã€‚æ‰§è¡Œå‘½ä»¤åï¼Œé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªåä¸ºdb.sqlite3çš„æ•°æ®åº“æ–‡ä»¶ã€‚SQLiteæ˜¯ä¸€ç§ä½¿ç”¨å•ä¸ªæ–‡ä»¶çš„è½»é‡çº§æ•°æ®åº“ï¼Œå¸¸ç”¨äºå¼€å‘ç®€å•åº”ç”¨ç¨‹åºï¼Œå®ƒè®©ä½ ä¸ç”¨å¤ªå…³æ³¨æ•°æ®åº“ç®¡ç†çš„é—®é¢˜ã€‚##### 2.1.3 è¿è¡Œé¡¹ç›®ä¾ç„¶åœ¨é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š1python manage.py runserverå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š1234567Performing system checks...System check identified no issues (0 silenced).April 21, 2018 - 20:46:48Django version 2.0.4, using settings &apos;learning_log.settings&apos;Starting development server at http://127.0.0.1:8000/Quit the server with CTRL-BREAK.ç°åœ¨åœ¨æµè§ˆå™¨ä¸­åœ°å€æ è¾“å…¥localhost:8000 (æˆ–è€…127.0.0.1:8000)ï¼Œå°†å¾—åˆ°å¦‚ä¸‹é¡µé¢ï¼šè¿™æ˜¯æœ€æ–°ç‰ˆçš„Djangoçš„é»˜è®¤å¯åŠ¨ç•Œé¢ã€‚##### 3.1 æ˜ å°„URLï¼ˆæ­¤å¤„ä¸åŸæ–‡ç•¥æœ‰ä¸åŒï¼‰â€”â€”-Djangoåˆ›å»ºç½‘é¡µçš„è¿‡ç¨‹é€šå¸¸åˆ†ä¸‰ä¸ªé˜¶æ®µï¼šå®šä¹‰URLã€ç¼–å†™è§†å›¾å’Œç¼–å†™æ¨¡æ¿ã€‚URLæ¨¡å¼æè¿°äº†URLæ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Œè®©DjangoçŸ¥é“å¦‚ä½•å°†æµè§ˆå™¨è¯·æ±‚ä¸ç½‘ç«™URLåŒ¹é…ï¼Œä»¥ç¡®å®šè¿”å›å“ªä¸ªç½‘é¡µã€‚æ¯ä¸ªURLéƒ½è¢«æ˜ å°„åˆ°ç‰¹å®šçš„è§†å›¾â€”â€”è§†å›¾å‡½æ•°è·å–å¹¶å¤„ç†ç½‘é¡µæ‰€éœ€çš„æ•°æ®ã€‚è§†å›¾å‡½æ•°é€šå¸¸è°ƒç”¨ä¸€ä¸ªæ¨¡æ¿ï¼Œåè€…ç”Ÿæˆæµè§ˆå™¨èƒ½å¤Ÿç†è§£çš„ç½‘é¡µã€‚ç›®å‰ï¼ŒåŸºç¡€URL(http://localhost:8000/ )è¿”å›é»˜è®¤çš„Djangoé¡µé¢ï¼Œç°åœ¨ä¿®æ”¹è¿™ä¸ªæ˜ å°„ï¼Œå°†å…¶æ˜ å°„åˆ°æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä¸»é¡µã€‚æ‰“å¼€learning_logæ–‡ä»¶å¤¹ä¸­çš„urls.pyï¼Œå°†çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š123456789101112131415161718from django.contrib import adminfrom django.urls import pathurlpatterns = [ path(&apos;admin/&apos;, admin.site.urls),]# ä¹¦ä¸­çš„å†…å®¹å’Œå®é™…çš„å†…å®¹æœ‰äº›å‡ºå…¥ï¼Œä»¥ä¸‹æ˜¯ä¹¦ä¸­å†…å®¹ï¼š# æ–°ç‰ˆDjangoç®€åŒ–äº†URLè·¯ç”±å†™æ³•# from django.conf.urls import include, url# from django.contrib import admin# # from django.conf.urls import include, url# from django.contrib import admin## urlpatterns = [# url(r&apos;^admin/&apos;, include(admin.site.urls)),# ]å˜é‡urlpatternsåŒ…å«é¡¹ç›®ä¸­çš„APPçš„URLï¼Œadmin.site.urlsæ¨¡å—å®šä¹‰äº†å¯åœ¨ç®¡ç†ç½‘ç«™ä¸­è¯·æ±‚çš„æ‰€æœ‰URLã€‚ç°åœ¨æ·»åŠ ä»£ç ï¼š123456789from django.contrib import adminfrom django.urls import path, includeurlpatterns = [ path(&apos;admin/&apos;, admin.site.urls), path(&quot;&quot;, include(&quot;learning_logs.urls&quot;)), # ä¹¦ä¸­ä»£ç ï¼š # url(r&quot;&quot;, include(&quot;learning_logs.urls&quot;, namespace=&quot;learning_logs&quot;)),]æ³¨æ„ï¼šä¹¦ä¸­åœ¨æ­¤å¤„çš„include()å‡½æ•°ä¸­ä¼ å…¥äº†å…³é”®å­—å‚æ•°namespace=â€learning_logsâ€ï¼Œä½†åœ¨æ–°ç‰ˆä¸­ï¼Œå‘½åç©ºé—´(namespace)æ˜¯åœ¨APPçš„urls.pyä¸­è®¾ç½®çš„ï¼šåœ¨urlpatternså˜é‡å‰æ–°å»ºä¸€ä¸ªå€¼ä¸ºâ€learning_logsâ€çš„app_nameå˜é‡ã€‚æ­¤å¤„ä¸æˆ‘é…ç½®ä¸åŒï¼Œæˆ‘å·²ç»åœ¨urlpatternså˜é‡å‰æ–°å»ºä¸€ä¸ªå€¼ä¸ºâ€learning_logsâ€çš„app_nameå˜é‡ã€‚ä½†æ˜¯ä»ç„¶ä¼šæŠ¥é”™ï¼šæ— æ³•æ‰¾åˆ°namespace,äºæ˜¯æŠŠurlpatternsä¿®æ”¹ä¸ºï¼š 1234urlpatterns = [ path(&apos;admin/&apos;, admin.site.urls), path(&quot;&quot;, include(&quot;learning_logs.urls&quot;,namespace = &apos;learning_logs&apos;)),#https://blog.csdn.net/mukvintt/article/details/80320027 è¿˜æ˜¯æ·»åŠ äº†namesapce å‚æ•°ï¼Œè€Œlearning_log/urls.pyä¸ºï¼š 123456789#learning_logsçš„URLfrom django.urls import pathfrom . import views#æ·»åŠ å‘½åç©ºé—´app_name = &apos;learing_logs&apos; #https://blog.csdn.net/qq_38504396/article/details/79687269urlpatterns = [ #ä¸»é¡µ path(&quot;&quot;,views.index,name = &apos;index&apos;), æˆ‘çš„Djangoç‰ˆæœ¬æ˜¯2.1 â€¦â€¦â€¦â€¦â€¦â€¦ åŸæ–‡é“¾æ¥","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é¡¹ç›®","slug":"æŠ€æœ¯/é¡¹ç›®","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é¡¹ç›®/"}],"tags":[{"name":"Django","slug":"Django","permalink":"http://puguojing.com/tags/Django/"},{"name":"Webæ¡†æ¶","slug":"Webæ¡†æ¶","permalink":"http://puguojing.com/tags/Webæ¡†æ¶/"},{"name":"é¡¹ç›®","slug":"é¡¹ç›®","permalink":"http://puguojing.com/tags/é¡¹ç›®/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"é¡¹ç›®","slug":"æŠ€æœ¯/é¡¹ç›®","permalink":"http://puguojing.com/categories/æŠ€æœ¯/é¡¹ç›®/"}]},{"title":"pythonå­¦ä¹ -é—­åŒ…å‡½æ•°ã€è£…é¥°å™¨","slug":"pythonå­¦ä¹ -é—­åŒ…å‡½æ•°ã€è£…é¥°å™¨","date":"2018-08-20T06:02:50.000Z","updated":"2018-11-06T03:19:57.171Z","comments":true,"path":"2018/08/20/pythonå­¦ä¹ -é—­åŒ…å‡½æ•°ã€è£…é¥°å™¨/","link":"","permalink":"http://puguojing.com/2018/08/20/pythonå­¦ä¹ -é—­åŒ…å‡½æ•°ã€è£…é¥°å™¨/","excerpt":"","text":"&#8195;&#8195; 1.ä¸å®šé•¿å˜é‡ä¸å®šé•¿å˜é‡ä¸€èˆ¬ä½¿ç”¨åœ¨å‚æ•°ä¸å›ºå®šçš„æƒ…å†µä¸‹ï¼Œå¸¸ä½¿ç”¨*kargsè¡¨ç¤ºä¸€ç³»åˆ—å•ä¸€å€¼ï¼ˆæ¯”å¦‚å…ƒç»„ã€åˆ—è¡¨ï¼‰ï¼Œä½¿ç”¨**kwargsè¡¨ç¤ºä¸€ç³»åˆ—é”®å€¼å¯¹ï¼ˆæ¯”å¦‚å­—å…¸ï¼‰ 123def fun_1(*kargs,**kwargs): print(kargs) print(kwargs) å¯ä»¥ä½¿ç”¨ï¼š 1fun_1(1,2,3,row = 1,colume = 2) 123è¾“å‡ºç»“æœï¼š(1, 2, 3)&#123;&apos;row&apos;: 1, &apos;colum&apos;: 2&#125; æˆ–è€…åƒè¿™æ ·ï¼ˆå…¶å®æ›´å¤šçš„æƒ…å†µä¸‹æˆ‘ä»¬ä¼šè¿™æ ·ç”¨ï¼‰ï¼š 1234my_list = [1,2,3]my_dict = &#123;&apos;row&apos;:1,&apos;colume&apos;:2&#125;fun_1(my_list,my_dict) *kargså’Œ**kwargsä¼šè‡ªåŠ¨æŠŠåˆ—è¡¨å’Œå­—å…¸è¿›è¡Œæ‹†åˆ†å¼€æ¥,è¿›è¡Œä¼ å…¥å‚æ•°ã€‚ 2.é—­åŒ…å‡½æ•°&#8195;&#8195;å‡½æ•°é—­åŒ…æ˜¯å¼•ç”¨äº†è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚è¿™ä¸ªè¢«å¼•ç”¨çš„è‡ªç”±å˜é‡å°†å’Œè¿™ä¸ªå‡½æ•°ä¸€åŒå­˜åœ¨ï¼Œå³ä½¿å·²ç»ç¦»å¼€äº†åˆ›é€ å®ƒçš„ç¯å¢ƒä¹Ÿä¸ä¾‹å¤–ã€‚ï¼ˆç»´åŸºç™¾ç§‘ï¼‰1234def fun(x,y): def close_fun(a): return x+y+a #å¯ä»¥ä½¿ç”¨x,y return close_fun #è¿”å›å‡½æ•°å¯¹è±¡ 12var= fun(1,2)#fun(1,2)è¿”å›çš„æ˜¯ä¸€ä¸ªclose_funå‡½æ•°å¯¹è±¡var(3) #ç»“æœï¼š6ï¼Œç›¸å½“äºä½¿ç”¨close_fun(3ï¼‰ 3.è£…é¥°å™¨å‡½æ•°&#8195;&#8195;è£…é¥°å™¨å‡½æ•°å°±æ˜¯æŠŠè¢«è£…é¥°çš„å‡½æ•°å½“åšå‚æ•°ä¼ å…¥ä¸€ä¸ªé—­åŒ…å‡½æ•°ä¸­ï¼Œä½¿é—­åŒ…å‡½æ•°ä¸­çš„å†…å®¹å…ˆæ‰§è¡Œï¼Œç„¶ååœ¨æ‰§è¡Œè¢«è£…é¥°å‡½æ•°ä¸­çš„å†…å®¹ã€‚ (1)è¢«è£…é¥°çš„å‡½æ•°å¸¦å‚æ•°1234567#è£…é¥°å™¨å‡½æ•°def my_decorator(fun):#funä»£è¡¨è¢«è£…é¥°çš„å‡½æ•° def close_fun(a,b):#å†…éƒ¨å‡½æ•°çš„å‚æ•°è¦å’Œè¢«è£…é¥°çš„å‡½æ•°funçš„å‚æ•°å¯¹åº” a += 1 #åœ¨æ‰§è¡Œè¢«è£…é¥°çš„å‡½æ•°ä¹‹å‰ï¼Œå…ˆå¯¹å‚æ•°åšå¤„ç† b += 1 return fun(a,b) #è¿”å›è¢«è£…é¥°çš„å‡½æ•°çš„ &apos;è°ƒç”¨&apos; return close_fun #è¿”å›é—­åŒ…å‡½æ•° &apos;å¯¹è±¡&apos; 123@my_decoratordef fun_add(x,y):#è¢«è£…é¥°çš„å‡½æ•°fun_addæ˜¯å¸¦å‚æ•°çš„ return x+y 12#è°ƒç”¨fun_add(1,2)#ç»“æœæ˜¯5 123456#è°ƒç”¨è¿‡ç¨‹#1.æŠŠfun_addå½“åšå‚æ•°ä¼ å…¥è£…é¥°å™¨ res_fun = my_decoratorï¼ˆfun_addï¼‰#2.ç”±äºmy_decoratoræ˜¯ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªcolse_fun å‡½æ•°å¯¹è±¡ï¼Œæ‰€ä»¥res_fun &lt;-ç­‰ä»·ä¸-&gt;close_fun#3.è°ƒç”¨close_fun(a,b),å¯¹åº”çš„å®å‚å°±æ˜¯close_fun(1,2)#4.close_funå†…éƒ¨å¯¹å‚æ•°è¿›è¡Œ &apos;+= 1&apos;çš„å¤„ç† æ‰€ä»¥ä¼ å…¥çš„å®å‚ 1ï¼Œ2 å˜æˆäº† 2ï¼Œ3#5.close_funå†…éƒ¨æœ€åè¿”å›çš„æ˜¯è¢«è£…é¥°çš„å‡½æ•°fun_addè°ƒç”¨ï¼Œè€Œæ­¤æ—¶å‚æ•°å·²ç»å˜æˆäº†2ï¼Œ3ï¼Œæ‰€ä»¥æ˜¯fun_add(2,3),æœ€ç»ˆç»“æœ return 2+3 ä¸º 5 (2)è£…é¥°å™¨å‡½æ•°åŒæ—¶ä¹Ÿå¸¦å‚æ•°1234567891011121314151617#è£…é¥°å™¨å‡½æ•°åŒæ—¶ä¹Ÿå¸¦å‚æ•°,åªéœ€è¦åœ¨å¤–é¢å†åŠ ä¸€å±‚åµŒå¥—å³å¯def my_decorator_arg(arg_1,arg_2): def my_decorator(fun):#funä»£è¡¨è¢«è£…é¥°çš„å‡½æ•° def close_fun(a,b):#å†…éƒ¨å‡½æ•°çš„å‚æ•°è¦å’Œè¢«è£…é¥°çš„å‡½æ•°funçš„å‚æ•°å¯¹åº” # åœ¨æ‰§è¡Œè¢«è£…é¥°çš„å‡½æ•°ä¹‹å‰ï¼Œå…ˆå¯¹å‚æ•°åšå¤„ç†,æ ¹æ®è£…é¥°å™¨è£…é¥°å™¨å‡½æ•°ä¸åŒçš„å‚æ•°ï¼Œå¯¹è¢«è£…é¥°çš„å‡½æ•°åšä¸åŒçš„å¤„ç† if arg_1==&apos;yes&apos;:#å¦‚æœè£…é¥°å™¨å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯yes,å°±å¯¹è¢«è£…é¥°çš„å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œ +1å¤„ç† a += 1 elif arg_1==&apos;no&apos;:#å¦‚æœè£…é¥°å™¨å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯no,å°±å¯¹è¢«è£…é¥°çš„å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œ -1å¤„ç† a -= 1 if arg_2 == 0:#å¦‚æœè£…é¥°å™¨å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯0,å°±å¯¹è¢«è£…é¥°çš„å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°è¿›è¡Œ +1å¤„ç† b += 1 elif arg_2 == 1:#å¦‚æœè£…é¥°å™¨å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯1,å°±å¯¹è¢«è£…é¥°çš„å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°è¿›è¡Œ -1å¤„ç† b -= 1 return fun(a,b) #è¿”å›è¢«è£…é¥°çš„å‡½æ•°çš„ &apos;è°ƒç”¨&apos; return close_fun #è¿”å›é—­åŒ…å‡½æ•° &apos;å¯¹è±¡&apos; return my_decorator #è¿”å›è£…é¥°å™¨å‡½æ•° &apos;å¯¹è±¡&apos; 12345@my_decorator_arg(&apos;yes&apos;,0)def fun_add(x,y):#è¢«è£…é¥°çš„å‡½æ•°fun_addæ˜¯å¸¦å‚æ•°çš„ return x+yr = fun_add(1,2)#ç»“æœæ˜¯5 12345@my_decorator_arg(&apos;no&apos;,0)def fun_add(x,y):#è¢«è£…é¥°çš„å‡½æ•°fun_addæ˜¯å¸¦å‚æ•°çš„ return x+yr = fun_add(1,2)#ç»“æœæ˜¯3 (3)è¢«è£…é¥°å‡½æ•°ä»»æ„å‚æ•°1234567891011121314def my_decorator(fun):#funä»£è¡¨è¢«è£…é¥°çš„å‡½æ•° def close_fun(*args,**kwargs):#å†…éƒ¨å‡½æ•°çš„å‚æ•°ä¸å®šå‚ a += 1 #åœ¨æ‰§è¡Œè¢«è£…é¥°çš„å‡½æ•°ä¹‹å‰ï¼Œå…ˆå¯¹å‚æ•°åšå¤„ç† res = fun(*args,**kwargs)#&apos;è°ƒç”¨&apos;è¢«è£…é¥°çš„å‡½æ•° return res * res #å¯¹ç»“æœå†åšå¤„ç† return close_fun #è¿”å›é—­åŒ…å‡½æ•° &apos;å¯¹è±¡&apos;@my_decorator_argdef fun_add(x):#è¢«è£…é¥°çš„å‡½æ•°fun_addå‚æ•°ä¸å®š return x@my_decorator_argdef fun_add(x,y,k):#è¢«è£…é¥°çš„å‡½æ•°fun_addå‚æ•°ä¸å®š return x+y+k (4)å¤šä¸ªè£…é¥°å‡½æ•°12345678910111213141516def my_decorator_1(fun):#ç¬¬ä¸€ä¸ªè£…é¥°å™¨å‡½æ•°ï¼Œæ±‚å’Œ def close_fun(*args,**kwargs): print(&quot;my_decorator_1 args:&quot;,args) print(&quot;my_decorator_1 kwargs:&quot;,kwargs) res = fun(*args,**kwargs)#è°ƒç”¨è¢«è£…é¥°çš„å‡½æ•° return res + res return close_fundef my_decorator_2(fun):##ç¬¬äºŒä¸ªè£…é¥°å™¨å‡½æ•°ï¼Œæ±‚å¹³æ–¹ def close_fun(*args,**kwargs): print(&quot;my_decorator_2 args:&quot;, args) print(&quot;my_decorator_2 kwargs:&quot;, kwargs) res = fun(*args,**kwargs) return res * res return close_fun 12345678910111213141516@my_decorator_1@my_decorator_2def fun_add(x,y):#è¢«è£…é¥°çš„å‡½æ•°fun_addæ˜¯å¸¦å‚æ•°çš„ print(&apos;fun_add:&apos;,x,y) return x+yr = fun_add(1,2)print(r)#è¾“å‡ºç»“æœï¼š#my_decorator_1 args: (1, 2)#my_decorator_1 kwargs: &#123;&#125;#my_decorator_2 args: (1, 2)#my_decorator_2 kwargs: &#123;&#125;#fun_add: 1 2#18 1234é¡ºåº:å…ˆæ‰§è¡Œmy_decorator_2ï¼Œåæ‰§è¡Œé¡ºåº1ä¸­å…ˆæ‰§è¡Œmy_decorator_1ã€‚ç”¨åµŒå¥—è¡¨ç¤ºï¼šmy_decorator_1(my_decorator_2(fun_add))å…·ä½“åˆ†æï¼š1.my_decorator_1è°ƒç”¨fun(1,2)å¾—åˆ°resä¸º3ï¼Œç„¶åreturn 3*3 = 92.ç„¶åè°ƒç”¨my_decorator_2 æ¥è‡ªmy_decorator_1 ä¸­ç»“æœ æ˜¯ 9 ç„¶åreturn 9+9 å¾—å‡º18 12345678910111213141516@my_decorator_2@my_decorator_1def fun_add(x,y):#è¢«è£…é¥°çš„å‡½æ•°fun_addæ˜¯å¸¦å‚æ•°çš„ print(&apos;fun_add:&apos;,x,y) return x+yr = fun_add(1,2)print(r)#è¾“å‡ºç»“æœï¼š#mmy_decorator_2 args: (1, 2)#my_decorator_2 kwargs: &#123;&#125;#my_decorator_1 args: (1, 2)#my_decorator_1 kwargs: &#123;&#125;#fun_add: 1 2#36 1234é¡ºåº:å…ˆæ‰§è¡Œmy_decorator_1ï¼Œåæ‰§è¡Œé¡ºåº1ä¸­å…ˆæ‰§è¡Œmy_decorator_2ã€‚ç”¨åµŒå¥—è¡¨ç¤ºï¼šmy_decorator_2(my_decorator_1(fun_add))å…·ä½“åˆ†æï¼š1.my_decorator_2è°ƒç”¨fun(1,2)å¾—åˆ°resä¸º3ï¼Œç„¶åreturn 3+3 = 62.ç„¶åè°ƒç”¨my_decorator_1 æ¥è‡ªmy_decorator_1 ä¸­ç»“æœ æ˜¯ 6 ç„¶åreturn 6*6 å¾—å‡º36 å¤šä¸ªè£…é¥°å™¨è£…é¥°ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè£…é¥°å™¨çš„é¡ºåºä¹Ÿå¾ˆé‡è¦ã€‚æ‰§è¡Œæ—¶æ€»æ˜¯å…ˆæ‰§è¡Œç¦»è¢«è£…é¥°å‡½æ•°æœ€è¿‘çš„è£…é¥°å‡½æ•°ï¼Œç”±è¿‘åŠè¿œã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"http://puguojing.com/tags/é—­åŒ…/"},{"name":"è£…é¥°å™¨","slug":"è£…é¥°å™¨","permalink":"http://puguojing.com/tags/è£…é¥°å™¨/"},{"name":"ä¸å®šå‚æ•°","slug":"ä¸å®šå‚æ•°","permalink":"http://puguojing.com/tags/ä¸å®šå‚æ•°/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}]},{"title":"Pythonå­¦ä¹ ç¬”è®°-é¢å‘å¯¹è±¡","slug":"pythonå­¦ä¹ -é¢å‘å¯¹è±¡","date":"2018-07-22T06:35:42.000Z","updated":"2018-11-27T11:07:56.206Z","comments":true,"path":"2018/07/22/pythonå­¦ä¹ -é¢å‘å¯¹è±¡/","link":"","permalink":"http://puguojing.com/2018/07/22/pythonå­¦ä¹ -é¢å‘å¯¹è±¡/","excerpt":"","text":"&#8195;&#8195; é¢å‘å¯¹è±¡ç±»ï¼šæ˜¯æˆ‘ä»¬æŠ½è±¡å‡ºæ¥çš„å±æ€§çš„é›†åˆï¼Œæ˜¯æè¿°ã€‚å®ä¾‹ï¼šä¹Ÿå«åšå¯¹è±¡ï¼Œæ˜¯æˆ‘ä»¬ç”¨ç±»è¿™ä¸ªå±æ€§é›†åˆå…·ä½“ç”Ÿæˆçš„å®ä¾‹ã€‚å±æ€§ï¼šå®šä¹‰åœ¨ç±»ä¸­çš„æ–¹æ³•æˆ–å˜é‡ã€‚å®ä¾‹å±æ€§ï¼šå®šä¹‰åœ¨å…·ä½“æ–¹æ³•ä¸­çš„å±æ€§ï¼ˆå±æ€§å¯ä»¥æ˜¯æ–¹æ³•ä¹Ÿå¯ä»¥æ˜¯å˜é‡ï¼‰ï¼Œåªç”¨ä½œå½“å‰çš„å®ä¾‹ã€‚ç±»å±æ€§ï¼šç±»å±æ€§å®šä¹‰åœ¨ç±»ä¸­ä¸”åœ¨å‡½æ•°ä½“å¤–ï¼Œç±»å±æ€§è¢«æ‰€æœ‰å®ä¾‹åŒ–çš„å¯¹è±¡å…±æœ‰ï¼Œç±»å±æ€§é€šå¸¸ä¸ä½œä¸ºå®ä¾‹å±æ€§ä½¿ç”¨ã€‚ ç±»çš„å˜é‡å±æ€§æ¯”å¦‚å®šä¹‰ç±»å˜é‡: 12Class A(): var_1 = 1 #ç±»çš„å˜é‡å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ç±»åå’Œå®ä¾‹åè°ƒç”¨ å…¶ä¸­var_1è¿™ä¸ªå˜é‡æŒ‡çš„å°±æ˜¯Aè¿™ä¸ªç±»çš„å˜é‡ï¼Œä»–å¯ä»¥é€šè¿‡ç±»åè°ƒç”¨ï¼ˆæ¯”å¦‚ï¼šA.var_1ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹åè°ƒç”¨ï¼ˆæ¯”å¦‚ï¼ša = A() a.Var_1ï¼‰æ¯”å¦‚æˆ‘ä»¬åˆ›å»º2ä¸ªAç±»çš„å®ä¾‹ï¼š 12a1 = A()a2 = A() æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ä¾‹åè°ƒç”¨å˜é‡ï¼š 12a1.var_1 #å€¼ä¸º1a2.var_1 #å€¼ä¸º1 ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»åè°ƒç”¨å˜é‡ï¼š 1A.var_1 #å€¼ä¸º1 å¦‚æœå•ç‹¬ä¿®æ”¹a1.var_1æˆ–a2.var_1çš„å€¼ï¼Œåˆ™ä¸ä¼šå½±å“å…¶ä»–å®ä¾‹çš„var_1å’Œç±»æœ¬èº«çš„var_1çš„å€¼ï¼Œä½†æ˜¯å¦‚æœä¿®æ”¹A.var_1ï¼ˆç±»å˜é‡ï¼‰çš„å€¼ï¼Œåˆ™æ‰€æœ‰çš„å®ä¾‹å˜é‡éƒ½ä¼šè¢«æ”¹å˜ã€‚æ¯”å¦‚,å¦‚æœæŠŠa.var_1çš„å€¼ä¿®æ”¹ä¸º2ï¼Œåˆ™b.var_1å’ŒA.var_1çš„å€¼å‡ä¸ä¼šæ”¹å˜ï¼Œä»ä¸º1ã€‚ä½†æ˜¯å¦‚æœæŠŠA.var_1çš„å€¼ä¿®æ”¹ä¸º2åˆ™a.var_1å’Œb.var_1çš„å€¼éƒ½ä¼šå˜æˆ2ã€‚ å®ä¾‹çš„å˜é‡å±æ€§123Class A(): def __init__(self) self.var_1 = 1 #å®ä¾‹çš„å˜é‡å±æ€§ï¼Œåªå¯ä»¥ä½¿ç”¨å®ä¾‹åè°ƒç”¨ åˆ›å»º2ä¸ªå®ä¾‹ï¼š 12a1 = A()a2 = A() ä½¿ç”¨å®ä¾‹åè°ƒç”¨å˜é‡ï¼š 12a1.var_1 å€¼ä¸º1a2.var_1 å€¼ä¸º1 ä½¿ç”¨ç±»åè°ƒç”¨å˜é‡ï¼š 1A.var_1 #ä¸å¯ä»¥ä½¿ç”¨ ç±»å±æ€§å’Œå®ä¾‹å±æ€§åä¸èƒ½è®¾ç½®æˆä¸€æ ·1234567891011121314151617&gt;&gt;&gt; class Student(object):... name = &apos;Student&apos;...&gt;&gt;&gt; s = Student() # åˆ›å»ºå®ä¾‹s&gt;&gt;&gt; print(s.name) # æ‰“å°nameå±æ€§ï¼Œå› ä¸ºå®ä¾‹å¹¶æ²¡æœ‰nameå±æ€§ï¼Œæ‰€ä»¥ä¼šç»§ç»­æŸ¥æ‰¾classçš„nameå±æ€§Student&gt;&gt;&gt; print(Student.name) # æ‰“å°ç±»çš„nameå±æ€§Student&gt;&gt;&gt; s.name = &apos;Michael&apos; # ç»™å®ä¾‹ç»‘å®šnameå±æ€§&gt;&gt;&gt; print(s.name) # ç”±äºå®ä¾‹å±æ€§ä¼˜å…ˆçº§æ¯”ç±»å±æ€§é«˜ï¼Œå› æ­¤ï¼Œå®ƒä¼šå±è”½æ‰ç±»çš„nameå±æ€§Michael&gt;&gt;&gt; print(Student.name) # ä½†æ˜¯ç±»å±æ€§å¹¶æœªæ¶ˆå¤±ï¼Œç”¨Student.nameä»ç„¶å¯ä»¥è®¿é—®Student&gt;&gt;&gt; del s.name # å¦‚æœåˆ é™¤å®ä¾‹çš„nameå±æ€§&gt;&gt;&gt; print(s.name) # å†æ¬¡è°ƒç”¨s.nameï¼Œç”±äºå®ä¾‹çš„nameå±æ€§æ²¡æœ‰æ‰¾åˆ°ï¼Œç±»çš„nameå±æ€§å°±æ˜¾ç¤ºå‡ºæ¥äº†Student ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œåœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™ï¼Œåƒä¸‡ä¸è¦å¯¹å®ä¾‹å±æ€§å’Œç±»å±æ€§ä½¿ç”¨ç›¸åŒçš„åå­—ï¼Œå› ä¸ºç›¸åŒåç§°çš„å®ä¾‹å±æ€§å°†å±è”½æ‰ç±»å±æ€§ï¼Œä½†æ˜¯å½“ä½ åˆ é™¤å®ä¾‹å±æ€§åï¼Œå†ä½¿ç”¨ç›¸åŒçš„åç§°ï¼Œè®¿é—®åˆ°çš„å°†æ˜¯ç±»å±æ€§ã€‚ å®ä¾‹çš„å‡½æ•°å±æ€§å®ä¾‹çš„å‡½æ•°å±æ€§ä¸€èˆ¬å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯self,Pyhonä¼šé»˜è®¤æŠŠå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å½“åšæŒ‡å‘ç±»å®ä¾‹çš„å‚æ•°ï¼Œä¸€èˆ¬ä½¿ç”¨selfï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ¢æˆå…¶ä»–çš„åå­—ï¼Œæ¯•ç«Ÿè¿™ä¸ªåœ°æ–¹åªæ˜¯å½¢å‚ï¼Œä½†æ˜¯ä¸€èˆ¬ä»ç¨‹åºçš„å¯è¯»æ€§ä¸Šè€Œè¨€æˆ‘ä»¬ä¸ä¼šé‚£ä¹ˆåšã€‚ 123Class A(): def func(self,a,b): print(a+b) å¦‚æœæˆ‘ä»¬æƒ³è¦è°ƒç”¨func,åˆ™éœ€è¦å…ˆå®ä¾‹åŒ–Aè¿™ä¸ªç±»ï¼Œç„¶åä½¿ç”¨å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡è°ƒç”¨ï¼š 12a = A()a.fun(2,3) ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬å¯ä¸å¯ä»¥ä½¿ç”¨ç±»åè°ƒç”¨è¿™ä¸ªfuncå‡½æ•°å‘¢ï¼Œæ¯”å¦‚ä½¿ç”¨A.func(2,3)è¡Œä¸è¡Œå‘¢,è¿™å½“ç„¶æ˜¯ä¸è¡Œçš„ã€‚ â€œselfï¼Œè¿™é‡Œçš„selfå¯ä»¥ç†è§£ä¸ºC++ä¸­çš„thisæŒ‡é’ˆã€‚éµå¾ªçš„åŸåˆ™å°±æ˜¯ï¼šå“ªä¸ªå®ä¾‹è°ƒç”¨æˆ‘è¿™ä¸ªå«æœ‰selfçš„å‡½æ•°æˆ–å˜é‡ï¼Œæˆ‘è¿™ä¸ªå‡½æ•°æˆ–å˜é‡çš„selfå°±ä»£è¡¨å“ªä¸ªå®ä¾‹ï¼ˆæŒ‡å‘å“ªä¸ªå®ä¾‹ï¼‰ã€‚æ€»ç»“ä¸€å¥è¯ï¼šâ€œè°è°ƒç”¨å°±æŒ‡å‘è°â€ ç±»æ–¹æ³•ç±»æ–¹æ³•é¡¾åæ€ä¹‰å°±æ˜¯æŒ‡ç±»çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„æ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹2ä¸ªä¾‹å­ï¼š 123Class A(): def func(a,b): print(a+b) æˆ‘ä»¬æ³¨æ„åˆ°è¿™é‡Œçš„funcæ²¡æœ‰ä½¿ç”¨selfè¿™ä¸ªå‚æ•°ï¼Œé‚£å¦‚æœæˆ‘ä»¬ä½¿ç”¨a.fun(2,3)è¿™ç§è°ƒç”¨ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¼šæŠ¥å‚æ•°å‡ºé”™ï¼Œå› ä¸ºåœ¨ä½¿ç”¨å®ä¾‹è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«é»˜è®¤æ˜¯selfï¼Œç„¶è€Œæˆ‘ä»¬è¿™é‡Œå¹¶æ²¡æœ‰å®šä¹‰è¿™ä¸ªå‚æ•°ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»åæ¥è°ƒç”¨è¿™ä¸ªå‚æ•°A.func(2,3),è¿™æ ·ä¼šæˆåŠŸã€‚è¿™é‡Œæˆ‘ä»¬å¥½åƒå°±æ˜¯è¦ä½¿ç”¨ç±»åè°ƒç”¨å‡½æ•°äº†ï¼Œçœ‹èµ·æ¥åƒæ˜¯ç±»çš„æ–¹æ³•ï¼Œä½†æ˜¯é€šå¸¸æˆ‘ä»¬ä¸ä¼šè¿™æ ·åšï¼Œè€Œæ˜¯é‡‡ç”¨@clasmethodè£…é¥°å™¨çš„æ–¹æ³•æ¥å®šä¹‰ç±»æ–¹æ³•ï¼š 1234Class A(): @classmethod def func(cls,a,b): print(a+b) é¦–å…ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ä¾‹å¯¹è±¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼š 12a = A()a.func(2,3) ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»åæ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼š 1A.func(2,3) è¿™é‡Œçš„æ–¹æ³•é»˜è®¤ä¼šæœ‰ä¸€ä¸ªclsçš„å‚æ•°ï¼Œç”¨æ¥è¡¨ç¤ºå½“å‰çš„ç±»ï¼ˆæ³¨æ„ä¸æ˜¯å®ä¾‹ï¼‰ã€‚ å¦‚æœæƒ³åœ¨ç±»çš„æ–¹æ³•é‡Œé¢è°ƒç”¨ç±»çš„å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨cls: 1234567class A(): num = 1 @classmethod def func(cls): cls.num += 1#ä½¿ç”¨cls.numï¼Œè€Œä¸èƒ½ç›´æ¥ä½¿ç”¨num print(&apos;cls.num:&apos;,cls.num) æ³¨æ„ä¸ç®¡æ˜¯ä½¿ç”¨ç±»åè°ƒç”¨ç±»æ–¹æ³•è¿˜æ˜¯ä½¿ç”¨å®ä¾‹è°ƒç”¨ç±»æ–¹æ³•æ‰€äº§ç”Ÿçš„ç»“æœéƒ½ä¼šç›¸åº”å½±å“ï¼š 12345678a = A()print(&apos;A.num:&apos;,A.num)a.func()print(&apos;A.num:&apos;,A.num)A.func()print(&apos;A.num:&apos;,A.num) è¾“å‡ºçš„ç»“æœï¼š 12345A.num: 1cls.num: 2A.num: 2cls.num: 3A.num: 3 è€Œä¸”ç±»æ–¹æ³•ä¸­ä¸èƒ½è°ƒç”¨å®ä¾‹å˜é‡å±æ€§ï¼Œæ¯”å¦‚ï¼š 123456789class A(): def __init__(self): self.var = 0 @classmethod def func(cls): cls.var += 1 print(cls.var) ä¼šæŠ¥é”™:AttributeError: type object &#39;A&#39; has no attribute &#39;var&#39; é™æ€æ–¹æ³•å®šä¹‰é™æ€æ–¹æ³•ä½¿ç”¨@staticmethodï¼Œå¯ä»¥ä½¿ç”¨ç±»åè°ƒç”¨ã€‚é™æ€æ–¹æ³•ä¸éœ€è¦é»˜è®¤çš„ä»»ä½•å‚æ•°,è·Ÿä¸€èˆ¬çš„æ™®é€šå‡½æ•°ç±»ä¼¼.é€šè¿‡è¿™æ ·çš„å®šä¹‰æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤šä¸ªå®ä¾‹ä¹‹é—´å…±äº«è¿™ä¸ªå‡½æ•°ä¸­çš„æ•°æ®å’Œå†…å®¹ã€‚é™æ€æ–¹æ³•æ— æ³•è®¿é—®å®ä¾‹å˜é‡ã€‚ ç±»æ–¹æ³•äºé™æ€æ–¹æ³•ï¼š 1.ç±»æ–¹æ³•éœ€è¦ä¼ é€’clså‚æ•°ï¼Œé™æ€æ–¹æ³•ä¸éœ€è¦ï¼›2.é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•éƒ½ä¸å¯ä»¥è®¿é—®å®ä¾‹å˜é‡ï¼›3.ç±»æ–¹æ³•å¯ä»¥é€šè¿‡csè®¿é—®ç±»å˜é‡ï¼Œé™æ€æ–¹æ³•ä¸å¯ä»¥ã€‚ 12345678class A(): num = 1 @staticmethod def func():#funcä¸­æ— æ³•ä½¿ç”¨num a = 1 print(&apos;&apos;,a) å¯ä»¥ä½¿ç”¨å®ä¾‹å’Œç±»åè°ƒç”¨ï¼š 12a = A()A.func() ç»§æ‰¿ç»§æ‰¿åˆ†ä¸ºå•ç»§æ‰¿å’Œå¤šç»§æ‰¿ã€‚å•ç»§æ‰¿ï¼šå­ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ã€‚å¤šç»§æ‰¿ï¼šå­ç±»ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚ å•ç»§æ‰¿ï¼š12class A1(A): pass å¯ä»¥ä½¿ç”¨A1.__base__æŸ¥çœ‹A1çš„åŸºç±» 1234class A1(A): def __init__(self): self.var = 1 print(self.var) A1æ˜¯Açš„å­ç±»ï¼Œå¦‚æœA1ä¸­æ²¡æœ‰initï¼ˆselfï¼‰å‡½æ•°ï¼Œé»˜è®¤ä¼šè°ƒç”¨çˆ¶ç±»çš„init(self),å¦‚æœå­ç±»é‡å†™äº†init(self),åˆ™ä¸ä¼šè°ƒç”¨çˆ¶ç±»çš„init_(self)ã€‚ å¤šç»§æ‰¿ï¼šå®šä¹‰ä¸¤ä¸ªåŸºç±»ï¼š 12345678class A(): def __init__(self): print(&apos;this is A&apos;)class B(): def __init__(self): print(&apos;this is B&apos;) å®šä¹‰ä¸€ä¸ªå­ç±»Cï¼š 12class C(A,B):#æ³¨æ„ç»§æ‰¿é¡ºåº pass å®ä¾‹åŒ–Cè¿™ä¸ªç±»ï¼š 1c = C() è¾“å‡ºæ˜¯ï¼š 1this is B è¯´æ˜è°ƒç”¨çš„æ˜¯Bçš„init(self) å¦‚æœå®šä¹‰Cè¿™ä¸ªç±» 12class C(B,A): pass å®ä¾‹åŒ–Cè¿™ä¸ªç±»è¾“å‡ºæ˜¯ï¼š 1this is A è¯´æ˜è°ƒç”¨çš„æ˜¯Açš„init(self) Python å¤šç»§æ‰¿è°ƒç”¨çˆ¶ç±»çš„é¡ºåºï¼špythonè°ƒç”¨çˆ¶ç±»æ„é€ çš„é¡ºåºæ˜¯:ä»å·¦å¾€å³ï¼Œä»ä¸‹å¾€ä¸Šã€‚é‡‡ç”¨çš„æ˜¯å¹¿åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼Œæ€»ä¼šå…ˆæ‰¾ç¦»è‡ªå·±æœ€è¿‘çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚å…·ä½“æ–¹æ³•æ˜¯:é¦–å…ˆè®¿é—®iè¿™ä¸ªèŠ‚ç‚¹ï¼Œç„¶åè®¿é—®iæ‰€æœ‰æœªè¢«è®¿é—®çš„ç›¸é‚»èŠ‚ç‚¹ã€‚ å¦‚å›¾ï¼Œè®¿é—®é¡ºåºæ˜¯ï¼š9-&gt;7-&gt;8-&gt;3-&gt;4-&gt;5-&gt;6-&gt;1-&gt;2 12345678910111213141516171819202122232425262728293031323334353637#!/usr/bin/python3# -*- coding:utf-8 -*-class A(object): def __init__(self): print(&apos;A&apos;) super(A, self).__init__()class B(object): def __init__(self): print(&apos;B&apos;) super(B, self).__init__()class C(A): def __init__(self): print(&apos;C&apos;) super(C, self).__init__()class D(A): def __init__(self): print(&apos;D&apos;) super(D, self).__init__()class E(B,C): def __init__(self): print(&apos;E&apos;) super(E, self).__init__()class F(C,B,D): def __init__(self): print(&apos;F&apos;) super(F, self).__init__()class G(D,B): def __init__(self): print(&apos;G&apos;) super(G, self).__init__()if __name__ == &apos;__main__&apos;: g = G() print(G.mro()) f = F() print(F.mro()) è¾“å‡ºç»“æœï¼š 1234567891011GDAB[&lt;class &apos;__main__.G&apos;&gt;, &lt;class &apos;__main__.D&apos;&gt;, &lt;class &apos;__main__.A&apos;&gt;, &lt;class &apos;__main__.B&apos;&gt;, &lt;class &apos;object&apos;&gt;]FCBDA[&lt;class &apos;__main__.F&apos;&gt;, &lt;class &apos;__main__.C&apos;&gt;, &lt;class &apos;__main__.B&apos;&gt;, &lt;class &apos;__main__.D&apos;&gt;, &lt;class &apos;__main__.A&apos;&gt;, &lt;class &apos;object&apos;&gt;] 1.å¦‚æœæ¯ä¸ªç±»éƒ½æœ‰æ­£ç¡®çš„å†™super(X, self).init()ï¼Œé‚£ä¹ˆmroé¡ºåºçš„æ‰€æœ‰çš„ç±»çš„åˆå§‹åŒ–æ–¹æ³•éƒ½ä¼šæ‰§è¡Œä¸€é2.å¦‚æœä¸­é€”æœ‰çš„ç±»æ²¡æœ‰å†™æˆ–é”™è¯¯çš„å†™äº†super(X, self).init()ï¼Œé‚£ä¹ˆä¼šæŒ‰mroé¡ºåºæ‰§è¡Œåˆ°æ‰§è¡Œå®Œæ²¡å†™çš„é‚£ä¸ªç±»ï¼Œæ‰§è¡Œç»“æŸã€‚3.super(X, self)ä¸æ˜¯å¿…é¡»ç‚¹init()ï¼Œå¯ä»¥ç‚¹åˆ«çš„ï¼Œä½†ä¸€èˆ¬æ²¡æœ‰è¿™ä¹ˆåšçš„4.ç±»å.mroå¯ä»¥å¾—åˆ°mroçš„é¡ºåº5.è¿™ç§å†™æ³•å¯ä»¥å®ç°æ¯ä¸ªç±»éƒ½è¢«æ‰§è¡Œæœ‰ä¸”ä»…æœ‰ä¸€æ¬¡ã€‚ é™æ€è¯­è¨€VSåŠ¨æ€è¯­è¨€çš„ç»§æ‰¿å¯¹äºé™æ€è¯­è¨€ï¼ˆä¾‹å¦‚Javaï¼‰æ¥è¯´ï¼Œå¦‚æœéœ€è¦ä¼ å…¥Animalç±»å‹ï¼Œåˆ™ä¼ å…¥çš„å¯¹è±¡å¿…é¡»æ˜¯Animalç±»å‹æˆ–è€…å®ƒçš„å­ç±»ï¼Œå¦åˆ™ï¼Œå°†æ— æ³•è°ƒç”¨run()æ–¹æ³•ã€‚ å¯¹äºPythonè¿™æ ·çš„åŠ¨æ€è¯­è¨€æ¥è¯´ï¼Œåˆ™ä¸ä¸€å®šéœ€è¦ä¼ å…¥Animalç±»å‹ã€‚æˆ‘ä»¬åªéœ€è¦ä¿è¯ä¼ å…¥çš„å¯¹è±¡æœ‰ä¸€ä¸ªrun()æ–¹æ³•å°±å¯ä»¥äº†ï¼š 123class Timer(object): def run(self): print(&apos;Start...&apos;) è¿™å°±æ˜¯åŠ¨æ€è¯­è¨€çš„â€œé¸­å­ç±»å‹â€ï¼Œå®ƒå¹¶ä¸è¦æ±‚ä¸¥æ ¼çš„ç»§æ‰¿ä½“ç³»ï¼Œä¸€ä¸ªå¯¹è±¡åªè¦â€œçœ‹èµ·æ¥åƒé¸­å­ï¼Œèµ°èµ·è·¯æ¥åƒé¸­å­â€ï¼Œé‚£å®ƒå°±å¯ä»¥è¢«çœ‹åšæ˜¯é¸­å­ã€‚ Pythonçš„â€œfile-like objectâ€œå°±æ˜¯ä¸€ç§é¸­å­ç±»å‹ã€‚å¯¹çœŸæ­£çš„æ–‡ä»¶å¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ªread()æ–¹æ³•ï¼Œè¿”å›å…¶å†…å®¹ã€‚ä½†æ˜¯ï¼Œè®¸å¤šå¯¹è±¡ï¼Œåªè¦æœ‰read()æ–¹æ³•ï¼Œéƒ½è¢«è§†ä¸ºâ€œfile-like objectâ€œã€‚è®¸å¤šå‡½æ•°æ¥æ”¶çš„å‚æ•°å°±æ˜¯â€œfile-like objectâ€œï¼Œä½ ä¸ä¸€å®šè¦ä¼ å…¥çœŸæ­£çš„æ–‡ä»¶å¯¹è±¡ï¼Œå®Œå…¨å¯ä»¥ä¼ å…¥ä»»ä½•å®ç°äº†read()æ–¹æ³•çš„å¯¹è±¡ã€‚ ç»§æ‰¿å¯ä»¥æŠŠçˆ¶ç±»çš„æ‰€æœ‰åŠŸèƒ½éƒ½ç›´æ¥æ‹¿è¿‡æ¥ï¼Œè¿™æ ·å°±ä¸å¿…é‡é›¶åšèµ·ï¼Œå­ç±»åªéœ€è¦æ–°å¢è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æŠŠçˆ¶ç±»ä¸é€‚åˆçš„æ–¹æ³•è¦†ç›–é‡å†™ã€‚ åŠ¨æ€è¯­è¨€çš„é¸­å­ç±»å‹ç‰¹ç‚¹å†³å®šäº†ç»§æ‰¿ä¸åƒé™æ€è¯­è¨€é‚£æ ·æ˜¯å¿…é¡»çš„ è·å–å¯¹è±¡çš„ä¿¡æ¯å½“æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œå¦‚ä½•çŸ¥é“è¿™ä¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆç±»å‹ã€æœ‰å“ªäº›æ–¹æ³•å‘¢ï¼Ÿ ç”¨dir()å¦‚æœè¦è·å¾—ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨dir()å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²çš„listï¼Œæ¯”å¦‚ï¼Œè·å¾—ä¸€ä¸ªstrå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼š 12&gt;&gt;&gt; dir(&apos;ABC&apos;)[&apos;__add__&apos;, &apos;__class__&apos;,..., &apos;__subclasshook__&apos;, &apos;capitalize&apos;, &apos;casefold&apos;,..., &apos;zfill&apos;] ç±»ä¼¼xxxçš„å±æ€§å’Œæ–¹æ³•åœ¨Pythonä¸­éƒ½æ˜¯æœ‰ç‰¹æ®Šç”¨é€”çš„ï¼Œæ¯”å¦‚lenæ–¹æ³•è¿”å›é•¿åº¦ã€‚åœ¨Pythonä¸­ï¼Œå¦‚æœä½ è°ƒç”¨len()å‡½æ•°è¯•å›¾è·å–ä¸€ä¸ªå¯¹è±¡çš„é•¿åº¦ï¼Œå®é™…ä¸Šï¼Œåœ¨len()å‡½æ•°å†…éƒ¨ï¼Œå®ƒè‡ªåŠ¨å»è°ƒç”¨è¯¥å¯¹è±¡çš„len()æ–¹æ³•ï¼Œæ‰€ä»¥ï¼Œä¸‹é¢çš„ä»£ç æ˜¯ç­‰ä»·çš„ï¼š 1234&gt;&gt;&gt; len(&apos;ABC&apos;)3&gt;&gt;&gt; &apos;ABC&apos;.__len__()3 æˆ‘ä»¬è‡ªå·±å†™çš„ç±»ï¼Œå¦‚æœä¹Ÿæƒ³ç”¨len(myObj)çš„è¯ï¼Œå°±è‡ªå·±å†™ä¸€ä¸ªlen()æ–¹æ³•ï¼š 1234567&gt;&gt;&gt; class MyDog(object):... def __len__(self):... return 100...&gt;&gt;&gt; dog = MyDog()&gt;&gt;&gt; len(dog)100 å‰©ä¸‹çš„éƒ½æ˜¯æ™®é€šå±æ€§æˆ–æ–¹æ³•ï¼Œæ¯”å¦‚lower()è¿”å›å°å†™çš„å­—ç¬¦ä¸²ï¼š 12&gt;&gt;&gt; &apos;ABC&apos;.lower()&apos;abc&apos; getattr()ã€setattr()ä»¥åŠhasattr()ä»…ä»…æŠŠå±æ€§å’Œæ–¹æ³•åˆ—å‡ºæ¥æ˜¯ä¸å¤Ÿçš„ï¼Œé…åˆgetattr()ã€setattr()ä»¥åŠhasattr()ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ“ä½œä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ï¼š 1234567&gt;&gt;&gt; class MyObject(object):... def __init__(self):... self.x = 9... def power(self):... return self.x * self.x...&gt;&gt;&gt; obj = MyObject() ç´§æ¥ç€ï¼Œå¯ä»¥æµ‹è¯•è¯¥å¯¹è±¡çš„å±æ€§ï¼š 12345678910111213&gt;&gt;&gt; hasattr(obj, &apos;x&apos;) # æœ‰å±æ€§&apos;x&apos;å—ï¼ŸTrue&gt;&gt;&gt; obj.x9&gt;&gt;&gt; hasattr(obj, &apos;y&apos;) # æœ‰å±æ€§&apos;y&apos;å—ï¼ŸFalse&gt;&gt;&gt; setattr(obj, &apos;y&apos;, 19) # è®¾ç½®ä¸€ä¸ªå±æ€§&apos;y&apos;&gt;&gt;&gt; hasattr(obj, &apos;y&apos;) # æœ‰å±æ€§&apos;y&apos;å—ï¼ŸTrue&gt;&gt;&gt; getattr(obj, &apos;y&apos;) # è·å–å±æ€§&apos;y&apos;19&gt;&gt;&gt; obj.y # è·å–å±æ€§&apos;y&apos;19 å¦‚æœè¯•å›¾è·å–ä¸å­˜åœ¨çš„å±æ€§ï¼Œä¼šæŠ›å‡ºAttributeErrorçš„é”™è¯¯ï¼š 1234&gt;&gt;&gt; getattr(obj, &apos;z&apos;) # è·å–å±æ€§&apos;z&apos;Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;AttributeError: &apos;MyObject&apos; object has no attribute &apos;z&apos; å¯ä»¥ä¼ å…¥ä¸€ä¸ªdefaultå‚æ•°ï¼Œå¦‚æœå±æ€§ä¸å­˜åœ¨ï¼Œå°±è¿”å›é»˜è®¤å€¼ï¼š 12&gt;&gt;&gt; getattr(obj, &apos;z&apos;, 404) # è·å–å±æ€§&apos;z&apos;ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤å€¼404404 ä¹Ÿå¯ä»¥è·å¾—å¯¹è±¡çš„æ–¹æ³•ï¼š 123456789&gt;&gt;&gt; hasattr(obj, &apos;power&apos;) # æœ‰å±æ€§&apos;power&apos;å—ï¼ŸTrue&gt;&gt;&gt; getattr(obj, &apos;power&apos;) # è·å–å±æ€§&apos;power&apos;&lt;bound method MyObject.power of &lt;__main__.MyObject object at 0x10077a6a0&gt;&gt;&gt;&gt;&gt; fn = getattr(obj, &apos;power&apos;) # è·å–å±æ€§&apos;power&apos;å¹¶èµ‹å€¼åˆ°å˜é‡fn&gt;&gt;&gt; fn # fnæŒ‡å‘obj.power&lt;bound method MyObject.power of &lt;__main__.MyObject object at 0x10077a6a0&gt;&gt;&gt;&gt;&gt; fn() # è°ƒç”¨fn()ä¸è°ƒç”¨obj.power()æ˜¯ä¸€æ ·çš„81 ä½¿ç”¨slotså¦‚æœæˆ‘ä»¬æƒ³è¦é™åˆ¶å®ä¾‹çš„å±æ€§æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚ï¼Œåªå…è®¸å¯¹Studentå®ä¾‹æ·»åŠ nameå’Œageå±æ€§ã€‚ ä¸ºäº†è¾¾åˆ°é™åˆ¶çš„ç›®çš„ï¼ŒPythonå…è®¸åœ¨å®šä¹‰classçš„æ—¶å€™ï¼Œå®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„slotså˜é‡ï¼Œæ¥é™åˆ¶è¯¥classå®ä¾‹èƒ½æ·»åŠ çš„å±æ€§ï¼š 12class Student(object): __slots__ = (&apos;name&apos;, &apos;age&apos;) # ç”¨tupleå®šä¹‰å…è®¸ç»‘å®šçš„å±æ€§åç§° ç„¶åï¼Œæˆ‘ä»¬è¯•è¯•ï¼š 1234567&gt;&gt;&gt; s = Student() # åˆ›å»ºæ–°çš„å®ä¾‹&gt;&gt;&gt; s.name = &apos;Michael&apos; # ç»‘å®šå±æ€§&apos;name&apos;&gt;&gt;&gt; s.age = 25 # ç»‘å®šå±æ€§&apos;age&apos;&gt;&gt;&gt; s.score = 99 # ç»‘å®šå±æ€§&apos;score&apos;Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;AttributeError: &apos;Student&apos; object has no attribute &apos;score&apos; ç”±äºâ€™scoreâ€™æ²¡æœ‰è¢«æ”¾åˆ°slotsä¸­ï¼Œæ‰€ä»¥ä¸èƒ½ç»‘å®šscoreå±æ€§ï¼Œè¯•å›¾ç»‘å®šscoreå°†å¾—åˆ°AttributeErrorçš„é”™è¯¯ã€‚ ä½¿ç”¨slotsè¦æ³¨æ„ï¼Œslotså®šä¹‰çš„å±æ€§ä»…å¯¹å½“å‰ç±»å®ä¾‹èµ·ä½œç”¨ï¼Œå¯¹ç»§æ‰¿çš„å­ç±»æ˜¯ä¸èµ·ä½œç”¨çš„ï¼š 12345&gt;&gt;&gt; class GraduateStudent(Student):... pass...&gt;&gt;&gt; g = GraduateStudent()&gt;&gt;&gt; g.score = 9999 é™¤éåœ¨å­ç±»ä¸­ä¹Ÿå®šä¹‰slotsï¼Œè¿™æ ·ï¼Œå­ç±»å®ä¾‹å…è®¸å®šä¹‰çš„å±æ€§å°±æ˜¯è‡ªèº«çš„slotsåŠ ä¸Šçˆ¶ç±»çš„slotsã€‚ ä½¿ç”¨@propertyåœ¨ç»‘å®šå±æ€§æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥æŠŠå±æ€§æš´éœ²å‡ºå»ï¼Œè™½ç„¶å†™èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯ï¼Œæ²¡åŠæ³•æ£€æŸ¥å‚æ•°ï¼Œå¯¼è‡´å¯ä»¥æŠŠæˆç»©éšä¾¿æ”¹ï¼š 12s = Student()s.score = 9999 è¿™æ˜¾ç„¶ä¸åˆé€»è¾‘ã€‚ä¸ºäº†é™åˆ¶scoreçš„èŒƒå›´ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªset_score()æ–¹æ³•æ¥è®¾ç½®æˆç»©ï¼Œå†é€šè¿‡ä¸€ä¸ªget_score()æ¥è·å–æˆç»©ï¼Œè¿™æ ·ï¼Œåœ¨set_score()æ–¹æ³•é‡Œï¼Œå°±å¯ä»¥æ£€æŸ¥å‚æ•°ï¼š 1234567891011class Student(object): def get_score(self): return self._score def set_score(self, value): if not isinstance(value, int): raise ValueError(&apos;score must be an integer!&apos;) if value &lt; 0 or value &gt; 100: raise ValueError(&apos;score must between 0 ~ 100!&apos;) self._score = value ç°åœ¨ï¼Œå¯¹ä»»æ„çš„Studentå®ä¾‹è¿›è¡Œæ“ä½œï¼Œå°±ä¸èƒ½éšå¿ƒæ‰€æ¬²åœ°è®¾ç½®scoreäº†ï¼š 12345678&gt;&gt;&gt; s = Student()&gt;&gt;&gt; s.set_score(60) # ok!&gt;&gt;&gt; s.get_score()60&gt;&gt;&gt; s.set_score(9999)Traceback (most recent call last): ...ValueError: score must between 0 ~ 100! ä½†æ˜¯ï¼Œä¸Šé¢çš„è°ƒç”¨æ–¹æ³•åˆç•¥æ˜¾å¤æ‚ï¼Œæ²¡æœ‰ç›´æ¥ç”¨å±æ€§è¿™ä¹ˆç›´æ¥ç®€å•ã€‚ æœ‰æ²¡æœ‰æ—¢èƒ½æ£€æŸ¥å‚æ•°ï¼Œåˆå¯ä»¥ç”¨ç±»ä¼¼å±æ€§è¿™æ ·ç®€å•çš„æ–¹å¼æ¥è®¿é—®ç±»çš„å˜é‡å‘¢ï¼Ÿå¯¹äºè¿½æ±‚å®Œç¾çš„Pythonç¨‹åºå‘˜æ¥è¯´ï¼Œè¿™æ˜¯å¿…é¡»è¦åšåˆ°çš„ï¼ è¿˜è®°å¾—è£…é¥°å™¨ï¼ˆdecoratorï¼‰å¯ä»¥ç»™å‡½æ•°åŠ¨æ€åŠ ä¸ŠåŠŸèƒ½å—ï¼Ÿå¯¹äºç±»çš„æ–¹æ³•ï¼Œè£…é¥°å™¨ä¸€æ ·èµ·ä½œç”¨ã€‚Pythonå†…ç½®çš„@propertyè£…é¥°å™¨å°±æ˜¯è´Ÿè´£æŠŠä¸€ä¸ªæ–¹æ³•å˜æˆå±æ€§è°ƒç”¨çš„ï¼š 12345678910111213class Student(object): @property def score(self):#å˜æˆå±æ€§è°ƒç”¨è¯»å–å±æ€§ return self._score @score.setter def score(self, value):#è®¾ç½®å±æ€§,ä½¿ç”¨ï¼š@æ–¹æ³•å.setter if not isinstance(value, int): raise ValueError(&apos;score must be an integer!&apos;) if value &lt; 0 or value &gt; 100: raise ValueError(&apos;score must between 0 ~ 100!&apos;) self._score = value @propertyçš„å®ç°æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å…ˆè€ƒå¯Ÿå¦‚ä½•ä½¿ç”¨ã€‚æŠŠä¸€ä¸ªgetteræ–¹æ³•å˜æˆå±æ€§ï¼Œåªéœ€è¦åŠ ä¸Š@propertyå°±å¯ä»¥äº†ï¼Œæ­¤æ—¶ï¼Œ@propertyæœ¬èº«åˆåˆ›å»ºäº†å¦ä¸€ä¸ªè£…é¥°å™¨@score.setterï¼Œè´Ÿè´£æŠŠä¸€ä¸ªsetteræ–¹æ³•å˜æˆå±æ€§èµ‹å€¼ï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬å°±æ‹¥æœ‰ä¸€ä¸ªå¯æ§çš„å±æ€§æ“ä½œï¼š 12345678&gt;&gt;&gt; s = Student()&gt;&gt;&gt; s.score = 60 # OKï¼Œå®é™…è½¬åŒ–ä¸ºs.set_score(60)&gt;&gt;&gt; s.score # OKï¼Œå®é™…è½¬åŒ–ä¸ºs.get_score()60&gt;&gt;&gt; s.score = 9999Traceback (most recent call last): ...ValueError: score must between 0 ~ 100! æ³¨æ„åˆ°è¿™ä¸ªç¥å¥‡çš„@propertyï¼Œæˆ‘ä»¬åœ¨å¯¹å®ä¾‹å±æ€§æ“ä½œçš„æ—¶å€™ï¼Œå°±çŸ¥é“è¯¥å±æ€§å¾ˆå¯èƒ½ä¸æ˜¯ç›´æ¥æš´éœ²çš„ï¼Œè€Œæ˜¯é€šè¿‡getterå’Œsetteræ–¹æ³•æ¥å®ç°çš„ã€‚ è¿˜å¯ä»¥å®šä¹‰åªè¯»å±æ€§ï¼Œåªå®šä¹‰getteræ–¹æ³•ï¼Œä¸å®šä¹‰setteræ–¹æ³•å°±æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼š 12345678910111213class Student(object): @property def birth(self): return self._birth @birth.setter def birth(self, value): self._birth = value @property def age(self): return 2015 - self._birth ä¸Šé¢çš„birthæ˜¯å¯è¯»å†™å±æ€§ï¼Œè€Œageå°±æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œå› ä¸ºageå¯ä»¥æ ¹æ®birthå’Œå½“å‰æ—¶é—´è®¡ç®—å‡ºæ¥ã€‚ å°ç»“@propertyå¹¿æ³›åº”ç”¨åœ¨ç±»çš„å®šä¹‰ä¸­ï¼Œå¯ä»¥è®©è°ƒç”¨è€…å†™å‡ºç®€çŸ­çš„ä»£ç ï¼ŒåŒæ—¶ä¿è¯å¯¹å‚æ•°è¿›è¡Œå¿…è¦çš„æ£€æŸ¥ï¼Œè¿™æ ·ï¼Œç¨‹åºè¿è¡Œæ—¶å°±å‡å°‘äº†å‡ºé”™çš„å¯èƒ½æ€§ã€‚ æšä¸¾ç±»12345678from enum import Enum#è·å¾—äº†Monthç±»å‹çš„æšä¸¾ç±»ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Month.Janæ¥å¼•ç”¨ä¸€ä¸ªå¸¸é‡ï¼Œæˆ–è€…æšä¸¾å®ƒçš„æ‰€æœ‰æˆå‘˜Month = Enum(&apos;Month&apos;,(&apos;Jan&apos;, &apos;Feb&apos;, &apos;Mar&apos;, &apos;Apr&apos;, &apos;May&apos;, &apos;Jun&apos;, &apos;Jul&apos;, &apos;Aug&apos;, &apos;Sep&apos;, &apos;Oct&apos;, &apos;Nov&apos;, &apos;Dec&apos;))#for name, member in Month.__members__.items(): print(name, member, member.value) è¾“å‡º: 123456789101112Jan Month.Jan 1Feb Month.Feb 2Mar Month.Mar 3Apr Month.Apr 4May Month.May 5Jun Month.Jun 6Jul Month.Jul 7Aug Month.Aug 8Sep Month.Sep 9Oct Month.Oct 10Nov Month.Nov 11Dec Month.Dec 12 å¦‚æœæƒ³è‡ªå·±æ§åˆ¶æšä¸¾çš„å€¼ï¼Œå¯ä»¥æ˜¯ä½¿ç”¨æ´¾ç”Ÿç±»ï¼Œç»§æ‰¿Enum: 1234567891011121314151617181920from enum import Enum,unique#è‡ªå®šä¹‰æ§åˆ¶æšä¸¾æ•°å€¼ï¼Œä½¿ç”¨æ´¾ç”Ÿç±»ï¼Œç»§æ‰¿Enum@uniqueclass WeekDay(Enum): Sun = 0 # Sunçš„valueè¢«è®¾å®šä¸º0 Mon = 1 Tue = 2 Wed = 3 Thu = 4 Fri = 5 Sat = 6#æœ‰å¤šç§æ–¹æ³•å¯ä»¥è®¿é—®æšä¸¾print(WeekDay.Sun)#WeekDay.Sunprint(WeekDay.Tue.value)#2print(WeekDay[&apos;Wed&apos;])#WeekDay.Wedprint(WeekDay(0))#WeekDay.Sunfor name, member in WeekDay.__members__.items(): print(name, member, member.value) è¾“å‡ºç»“æœ: 1234567891011WeekDay.Sun2WeekDay.WedWeekDay.SunSun WeekDay.Sun 0Mon WeekDay.Mon 1Tue WeekDay.Tue 2Wed WeekDay.Wed 3Thu WeekDay.Thu 4Fri WeekDay.Fri 5Sat WeekDay.Sat 6 å…ƒç±»å‚è€ƒ[å»–é›ªå³°Pythonæ•™ç¨‹]","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"http://puguojing.com/tags/é¢å‘å¯¹è±¡/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}]},{"title":"Pythonå­¦ä¹ ç¬”è®°-æ­£åˆ™è¡¨è¾¾å¼ï¼ˆ1ï¼‰","slug":" Pythonå­¦ä¹ ç¬”è®°-æ­£åˆ™è¡¨è¾¾å¼ï¼ˆ1ï¼‰","date":"2018-07-20T10:53:48.000Z","updated":"2018-11-06T04:31:11.575Z","comments":true,"path":"2018/07/20/ Pythonå­¦ä¹ ç¬”è®°-æ­£åˆ™è¡¨è¾¾å¼ï¼ˆ1ï¼‰/","link":"","permalink":"http://puguojing.com/2018/07/20/ Pythonå­¦ä¹ ç¬”è®°-æ­£åˆ™è¡¨è¾¾å¼ï¼ˆ1ï¼‰/","excerpt":"","text":"&#8195;&#8195; æ­£åˆ™è¡¨è¾¾å¼1.å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼ç¬¦å·å’Œè¯­æ³•1ã€â€™.â€™ åŒ¹é…æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œé™¤\\nä»¥å¤–2ã€â€˜-â€™ è¡¨ç¤ºèŒƒå›´[0-9]3ã€â€™*â€˜ åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚è¦åŒ¹é… å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ \\\\ã€‚4ã€â€™+â€™ åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚è¦åŒ¹é… + å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ +5ã€â€™\\^â€™ åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´6ã€â€˜$â€™ åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾ re7ã€â€™\\â€™ è½¬ä¹‰å­—ç¬¦ï¼Œ ä½¿åä¸€ä¸ªå­—ç¬¦æ”¹å˜åŸæ¥çš„æ„æ€ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¸­æœ‰å­—ç¬¦ â€˜ * â€˜ éœ€è¦åŒ¹é…ï¼Œå¯ä»¥ä½¿ç”¨â€™ \\* â€˜æˆ–è€…å­—ç¬¦é›†[ *] , re.findall(râ€™3*â€˜,â€™3*dsâ€™)ç»“æœ[â€˜3â€˜]8ã€â€™\\â€˜ åŒ¹é…å‰é¢çš„å­—ç¬¦0æ¬¡æˆ–å¤šæ¬¡re.findall(â€œab*â€œ,â€cabc3abcbbacâ€)ç»“æœï¼š[â€˜abâ€™, â€˜abâ€™, â€˜aâ€™]9ã€â€˜?â€™ åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦ä¸²0æ¬¡æˆ–1æ¬¡ re.findall(â€˜ab?â€™,â€™abcabcabcadfâ€™)ç»“æœ[â€˜abâ€™, â€˜abâ€™, â€˜abâ€™, â€˜aâ€™]10ã€â€™{m}â€™ åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦mæ¬¡ re.findall(â€˜cb{1}â€™,â€™bchbchcbfbcbbâ€™)ç»“æœ[â€˜cbâ€™, â€˜cbâ€™]11ã€â€™{n,m}â€™ åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦nåˆ°mæ¬¡ re.findall(â€˜cb{2,3}â€™,â€™bchbchcbfbcbbâ€™)ç»“æœ[â€˜cbbâ€™]12ã€â€™\\dâ€™ åŒ¹é…æ•°å­—ï¼Œç­‰äº[0-9] re.findall(â€˜\\dâ€™,â€™ç”µè¯:10086â€™)ç»“æœ[â€˜1â€™, â€˜0â€™, â€˜0â€™, â€˜8â€™, â€˜6â€™]13ã€â€™\\Dâ€™ åŒ¹é…éæ•°å­—ï¼Œç­‰äº[^0-9] re.findall(â€˜\\Dâ€™,â€™ç”µè¯:10086â€™)ç»“æœ[â€˜ç”µâ€™, â€˜è¯â€™, â€˜:â€™]14ã€â€™\\wâ€™ åŒ¹é…å­—æ¯å’Œæ•°å­—ï¼Œç­‰äº[A-Za-z0-9] re.findall(â€˜\\wâ€™,â€™alex123,./;;;â€™)ç»“æœ[â€˜aâ€™, â€˜lâ€™, â€˜eâ€™, â€˜xâ€™, â€˜1â€™, â€˜2â€™, â€˜3â€™]15ã€â€™\\Wâ€™ åŒ¹é…éè‹±æ–‡å­—æ¯å’Œæ•°å­—,ç­‰äº[^A-Za-z0-9] re.findall(â€˜\\Wâ€™,â€™alex123,./;;;â€™)ç»“æœ[â€˜,â€™, â€˜.â€™, â€˜/â€˜, â€˜;â€™, â€˜;â€™, â€˜;â€™]16ã€â€™\\sâ€™ åŒ¹é…ç©ºç™½å­—ç¬¦ re.findall(â€˜\\sâ€™,â€™3*ds \\t\\nâ€™)ç»“æœ[â€˜ â€˜, â€˜\\tâ€™, â€˜\\nâ€™]17ã€â€™\\Sâ€™ åŒ¹é…éç©ºç™½å­—ç¬¦ re.findall(â€˜\\sâ€™,â€™3*ds \\t\\nâ€™)ç»“æœ[â€˜3â€™, â€˜*â€˜, â€˜dâ€™, â€˜sâ€™]18ã€â€™\\Aâ€™ åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´19ã€â€™\\Zâ€™ åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾20ã€â€™\\bâ€™ åŒ¹é…å•è¯çš„è¯é¦–å’Œè¯å°¾ï¼Œå•è¯è¢«å®šä¹‰ä¸ºä¸€ä¸ªå­—æ¯æ•°å­—åºåˆ—ï¼Œå› æ­¤è¯å°¾æ˜¯ç”¨ç©ºç™½ç¬¦æˆ–éå­—æ¯æ•°å­—ç¬¦æ¥è¡¨ç¤ºçš„21ã€â€™\\Bâ€™ ä¸\\bç›¸åï¼Œåªåœ¨å½“å‰ä½ç½®ä¸åœ¨å•è¯è¾¹ç•Œæ—¶åŒ¹é…22ã€â€™( ?P\\&lt;name>â€¦ )â€™ åˆ†ç»„ï¼Œé™¤äº†åŸæœ‰ç¼–å·å¤–å†æŒ‡å®šä¸€ä¸ªé¢å¤–çš„åˆ«åã€‚ re.search(â€œ(?P\\[0-9]{4})(?P\\[0-9]{2})(?P\\&lt;birthday>[0-9{8})â€,â€371481199306143242â€).groupdict(â€œcityâ€) ç»“æœ{â€˜provinceâ€™: â€˜3714â€™, â€˜cityâ€™: â€˜81â€™, â€˜birthdayâ€™: â€˜19930614â€™}23ã€[ ] æ˜¯å®šä¹‰åŒ¹é…çš„å­—ç¬¦èŒƒå›´ã€‚æ¯”å¦‚ [a-zA-Z0-9] è¡¨ç¤ºç›¸åº”ä½ç½®çš„å­—ç¬¦è¦åŒ¹é…è‹±æ–‡å­—ç¬¦å’Œæ•°å­—ã€‚[\\s*]è¡¨ç¤ºç©ºæ ¼æˆ–è€…*å·ã€‚ 2.å¸¸ç”¨çš„reå‡½æ•°re.match(pattern,string,flags=0)&#8195;&#8195;ä»å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®åŒ¹é…ï¼Œå¦‚æœèµ·å§‹ä½ç½®åŒ¹é…ä¸æˆåŠŸçš„è¯ï¼Œmatch()å°±è¿”å›none re.search(pattern,string,flags=0)&#8195;&#8195;æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„åŒ¹é… re.findall(pattern,string,flags=0)&#8195;&#8195;æ‰¾åˆ°REåŒ¹é…çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œå¹¶æŠŠä»–ä»¬ä½œä¸ºä¸€ä¸ªåˆ—è¡¨è¿”å› re.finditer(pattern, string, flags=0)&#8195;&#8195;æ‰¾åˆ°REåŒ¹é…çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œå¹¶æŠŠä»–ä»¬ä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨è¿”å› re.sub(pattern, repl, string, count=0, flags=0)#8195;&#8195;æ›¿æ¢åŒ¹é…åˆ°çš„å­—ç¬¦ä¸² re.subn(pattern, repl, string, count=0, flags=0)#8195;&#8195;æ›¿æ¢åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²,å¹¶è¿”å›æ›¿æ¢æ•°é‡ æœªå®Œå¾…ç»­â€¦","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"http://puguojing.com/tags/Python/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"http://puguojing.com/tags/æ­£åˆ™è¡¨è¾¾å¼/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://puguojing.com/categories/æŠ€æœ¯/"},{"name":"python","slug":"æŠ€æœ¯/python","permalink":"http://puguojing.com/categories/æŠ€æœ¯/python/"}]}]}